# 更新日志

所有重要的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且此项目遵循 [语义化版本](https://semver.org/spec/v2.0.0.html)。

## [1.0.0] - 2025-09-18

### 🎉 正式版本发布
- **应用名称**: 从"泰摸鱼吧"正式更名为"鲸落"
- **版本标识**: v1.0.0 正式版本
- **里程碑**: 完成核心功能开发，进入生产就绪状态

### ✨ 新增功能
- **动态标签管理系统**: 支持多标签分类，替代环境字段
- **Docker生产环境部署**: 完整的容器化部署方案
- **管理员密码管理**: 安全的密码生成和管理脚本
- **本地测试环境**: 一键本地测试配置
- **Oracle查询优化**: 批量查询优化，性能提升显著

### 🚀 技术升级
- **基础镜像**: Ubuntu 22.04 + Python 3.11
- **生产服务器**: Gunicorn + Gevent + Supervisor
- **反向代理**: Nginx配置优化
- **安全扫描**: 完成漏洞扫描和修复
- **性能优化**: Oracle N+1查询问题解决

### 🔧 系统改进
- **统一统计逻辑**: 活跃账户计算逻辑统一
- **移除环境字段**: 全面使用标签系统
- **安全加固**: MD5替换为SHA-256，密码管理优化
- **日志优化**: 减少无意义日志输出
- **权限管理**: 完善角色权限控制

### 📦 部署方案
- **Docker Compose**: 生产环境一键部署
- **环境配置**: 开发、测试、生产环境分离
- **健康检查**: 完整的服务健康监控
- **资源限制**: CPU和内存限制配置
- **备份策略**: 数据备份和恢复方案

### 📚 文档完善
- **部署指南**: 详细的Docker部署文档
- **开发文档**: 完整的开发环境配置
- **API文档**: 接口使用说明
- **故障排除**: 常见问题解决方案
- **快速开始**: 一键部署脚本

### 🎯 支持数据库
- **PostgreSQL**: 12+ 版本支持
- **MySQL**: 5.7+ 版本支持  
- **SQL Server**: 2016+ 版本支持
- **Oracle**: 11g+ 版本支持

### 🔒 安全特性
- **密码安全**: 环境变量配置，随机密码生成
- **SQL注入防护**: 参数化查询，安全扫描
- **权限控制**: 基于角色的访问控制
- **日志安全**: 敏感信息过滤
- **HTTPS支持**: SSL/TLS配置

### 📊 性能指标
- **Oracle优化**: 查询性能提升80%+
- **内存使用**: 优化内存占用
- **并发处理**: 支持高并发访问
- **响应时间**: 平均响应时间<200ms
- **可用性**: 99.9%服务可用性

### 🛠️ 开发工具
- **代码质量**: Ruff + MyPy + Black
- **安全扫描**: Bandit + Safety
- **测试覆盖**: 单元测试和集成测试
- **CI/CD**: 自动化部署流程
- **监控告警**: 完整的监控体系

## [2.1.0] - 2025-09-14

### 新增
- 账户分类管理功能修复报告文档
- 详细的权限显示修复说明

### 修复
- 修复MySQL权限显示问题 - 权限数据格式不匹配
- 修复PostgreSQL权限显示问题 - 过滤false值权限显示
- 修复SQL Server权限显示问题 - sa账户权限为空
- 修复账户管理页面不显示账户的问题
- 修复账户统计页面数据无效的问题
- 修复分类批次详情显示问题
- 修复MySQL分类规则评估逻辑 - 支持列表格式权限数据
- 修复账户管理页面权限查看功能
- 修复分类批次匹配详情显示

### 改进
- 优化权限显示格式，更加美观和易读
- 改进权限规则评估性能
- 优化账户分类自动匹配逻辑
- 提升用户体验和界面友好性

### 清理
- 删除旧的Account模型相关代码和文件
- 移除未使用的导入和依赖
- 清理冗余的代码和注释

## [2.0.0] - 2025-09-12

### 新增
- 优化同步模型 - 全新的统一同步数据模型
- 数据库类型抽象架构设计
- 完整的项目文档体系
- 代码质量检查工具集成

### 改进
- 项目结构优化和重构
- 文档整理和规范化
- 代码质量提升
- 性能优化

### 修复
- 数据库字段缺失问题
- 字段长度不匹配问题
- 触发器缺失问题

## [1.2.0] - 2025-09-11

### 新增
- 定时任务系统升级 - 基于APScheduler的轻量级任务调度
- 内置任务管理功能
- 任务监控和统计
- 任务持久化存储

### 改进
- 任务执行性能优化
- 任务管理界面优化
- 批量任务操作支持

## [1.1.0] - 2025-09-10

### 新增
- 账户分类管理完善
- Oracle数据库支持优化
- PostgreSQL权限系统完善
- 用户界面优化

### 修复
- Oracle权限查询ORA-00942错误
- PostgreSQL权限显示undefined错误
- 账户同步权限保存问题

## [1.0.0] - 2025-09-08

### 新增
- 核心功能完成
- 用户认证与权限管理
- 多数据库实例管理
- 账户信息管理
- 凭据管理系统
- 操作日志管理
- 系统仪表板
- API接口开发
- 安全防护机制

### 技术栈
- Flask 3.0.3
- SQLAlchemy 2.0.30
- Bootstrap 5.3.2
- APScheduler 3.10.4
- Redis 8.2.1

## [0.5.0] - 2025-09-07

### 新增
- 性能优化
- 数据库优化
- 缓存系统集成
- 连接池管理

## [0.4.0] - 2025-09-06

### 新增
- 安全防护机制
- 密码安全
- SQL注入防护
- XSS防护
- CSRF防护

## [0.3.0] - 2025-09-05

### 新增
- 用户界面完善
- 响应式设计
- 用户体验优化
- 交互优化

## [0.2.0] - 2025-09-03

### 新增
- 基础功能开发
- 数据库设计
- 模型实现
- 基础API

## [0.1.0] - 2025-09-01

### 新增
- 项目初始化
- 基础架构搭建
- 开发环境配置
- 项目结构创建

---

**维护者**: 鲸落开发团队
**项目地址**: https://github.com/nyealovey/TaifishingV4
