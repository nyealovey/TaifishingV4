---
inclusion: always
---

## 错误修复原则

### 复杂错误处理

- 在遇到复杂错误时，需要重新扫描全部相关文件并彻底修复
- 优先考虑JavaScript问题，但也要检查Python后端错误
- 分析错误根本原因，不要只修复表面症状

### JavaScript错误处理

- 添加try-catch块来捕获JavaScript执行错误
- 在控制台输出详细的错误信息和堆栈跟踪
- 显示用户友好的错误提示
- 帮助诊断模态框显示失败的具体原因

### Python错误处理

- 避免使用裸露的except语句，必须指定具体异常类型
- 使用logging记录详细错误信息，包括堆栈跟踪
- 实现优雅的错误恢复机制
- 不要使用try-except-pass模式忽略错误

### 安全错误修复

- 修复SQL注入漏洞，使用参数化查询
- 移除硬编码密码，使用环境变量
- 实现输入验证和过滤
- 添加CSRF保护

### 代码质量修复

- 使用Black格式化代码
- 使用isort排序导入
- 添加类型提示
- 修复MyPy类型检查错误
- 修复Ruff linting警告

### 错误修复流程

1. 分析错误报告，识别问题类型
2. 检查相关文件，理解错误上下文
3. 实施修复方案，确保不引入新问题
4. 运行测试验证修复效果
5. 更新文档记录修复过程
