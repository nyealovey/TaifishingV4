# ğŸ§¹ Scriptsç›®å½•æ¸…ç†å’Œåˆ†ç±»æ€»ç»“

## âœ… æ¸…ç†å®Œæˆ

æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæˆ‘å·²ç»æˆåŠŸæ¸…ç†äº†scriptsç›®å½•ä¸­çš„æ— ç”¨è„šæœ¬ï¼Œå¹¶æŒ‰ç…§åŠŸèƒ½è¿›è¡Œäº†åˆ†ç±»ç»„ç»‡ã€‚

## ğŸ—‘ï¸ å·²åˆ é™¤çš„æ— ç”¨è„šæœ¬

### åˆ é™¤çš„è„šæœ¬æ–‡ä»¶
- âŒ `scripts/build-image.sh` - æ„å»ºé•œåƒè„šæœ¬
  - **åŸå› **: åŠŸèƒ½å·²è¢«Docker Composeé›†æˆï¼Œdeploy-flask.shä¸­å·²åŒ…å«é•œåƒæ„å»º
  - **æ›¿ä»£**: ä½¿ç”¨ `docker build -t whalefall:latest .` æˆ– `make build`

- âŒ `scripts/init-data-dirs.sh` - åˆå§‹åŒ–æ•°æ®ç›®å½•è„šæœ¬
  - **åŸå› **: åŠŸèƒ½å·²è¢«deploy-base.shé›†æˆï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®ç›®å½•
  - **æ›¿ä»£**: ä½¿ç”¨ `./scripts/deployment/deploy-base.sh` æˆ– `make base`

- âŒ `scripts/.DS_Store` - macOSç³»ç»Ÿæ–‡ä»¶
  - **åŸå› **: ç³»ç»Ÿç”Ÿæˆçš„éšè—æ–‡ä»¶ï¼Œä¸åº”è¯¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

### ç§»åŠ¨çš„æ•°æ®æ–‡ä»¶
- ğŸ“ `scripts/exported_permission_configs.sql` â†’ `sql/exported_permission_configs.sql`
  - **åŸå› **: è¿™æ˜¯æ•°æ®æ–‡ä»¶ï¼Œä¸æ˜¯è„šæœ¬ï¼Œåº”è¯¥æ”¾åœ¨sqlç›®å½•

## ğŸ“ æ–°çš„è„šæœ¬åˆ†ç±»ç»“æ„

```
scripts/
â”œâ”€â”€ deployment/          # éƒ¨ç½²ç›¸å…³è„šæœ¬ (6ä¸ª)
â”‚   â”œâ”€â”€ deploy-base.sh          # åŸºç¡€ç¯å¢ƒéƒ¨ç½²
â”‚   â”œâ”€â”€ deploy-flask.sh         # Flaskåº”ç”¨éƒ¨ç½²
â”‚   â”œâ”€â”€ start-all.sh            # å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”‚   â”œâ”€â”€ stop-all.sh             # åœæ­¢æ‰€æœ‰æœåŠ¡
â”‚   â”œâ”€â”€ test-deployment.sh      # éƒ¨ç½²æµ‹è¯•
â”‚   â””â”€â”€ update-version.sh       # ç‰ˆæœ¬æ›´æ–°
â”œâ”€â”€ ssl/                # SSLè¯ä¹¦ç®¡ç†è„šæœ¬ (5ä¸ª)
â”‚   â”œâ”€â”€ generate-ssl-cert.sh    # ç”ŸæˆSSLè¯ä¹¦
â”‚   â”œâ”€â”€ ssl-backup.sh           # SSLè¯ä¹¦å¤‡ä»½
â”‚   â”œâ”€â”€ ssl-manager.sh          # SSLè¯ä¹¦ç®¡ç†
â”‚   â”œâ”€â”€ update-external-ssl.sh  # æ›´æ–°å¤–éƒ¨SSLè¯ä¹¦
â”‚   â””â”€â”€ verify-ssl-cert.sh      # éªŒè¯SSLè¯ä¹¦
â”œâ”€â”€ local/              # æœ¬åœ°å¼€å‘è„šæœ¬ (2ä¸ª)
â”‚   â”œâ”€â”€ start-local-nginx.sh    # å¯åŠ¨æœ¬åœ°Nginx
â”‚   â””â”€â”€ test-local-nginx.sh     # æµ‹è¯•æœ¬åœ°Nginx
â”œâ”€â”€ quality/            # ä»£ç è´¨é‡æ£€æŸ¥è„šæœ¬ (2ä¸ª)
â”‚   â”œâ”€â”€ quality_check.py        # å®Œæ•´è´¨é‡æ£€æŸ¥
â”‚   â””â”€â”€ quick_check.py          # å¿«é€Ÿè´¨é‡æ£€æŸ¥
â”œâ”€â”€ database/           # æ•°æ®åº“ç®¡ç†è„šæœ¬ (3ä¸ª)
â”‚   â”œâ”€â”€ export_permission_configs.py  # å¯¼å‡ºæƒé™é…ç½®
â”‚   â”œâ”€â”€ reset_admin_password.py       # é‡ç½®ç®¡ç†å‘˜å¯†ç 
â”‚   â””â”€â”€ show_admin_password.py        # æ˜¾ç¤ºç®¡ç†å‘˜å¯†ç 
â””â”€â”€ README.md           # è„šæœ¬è¯´æ˜æ–‡æ¡£
```

## ğŸ“Š åˆ†ç±»ç»Ÿè®¡

| åˆ†ç±» | è„šæœ¬æ•°é‡ | ä¸»è¦åŠŸèƒ½ |
|------|----------|----------|
| deployment | 6ä¸ª | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œç®¡ç† |
| ssl | 5ä¸ª | SSLè¯ä¹¦ç”Ÿæˆã€ç®¡ç†å’ŒéªŒè¯ |
| local | 2ä¸ª | æœ¬åœ°å¼€å‘ç¯å¢ƒå·¥å…· |
| quality | 2ä¸ª | ä»£ç è´¨é‡æ£€æŸ¥å’Œä¿®å¤ |
| database | 3ä¸ª | æ•°æ®åº“ç›¸å…³æ“ä½œ |
| **æ€»è®¡** | **18ä¸ª** | **åˆ†ç±»ç®¡ç†** |

## ğŸ”§ æ›´æ–°çš„é…ç½®æ–‡ä»¶

### Makefileæ›´æ–°
- æ›´æ–°äº†æ‰€æœ‰è„šæœ¬è·¯å¾„ï¼ŒæŒ‡å‘æ–°çš„åˆ†ç±»ç›®å½•
- ä¿æŒäº†åŸæœ‰çš„å‘½ä»¤æ¥å£ä¸å˜
- ç”¨æˆ·æ— éœ€æ”¹å˜ä½¿ç”¨ä¹ æƒ¯

### README.mdæ›´æ–°
- åˆ›å»ºäº†è¯¦ç»†çš„è„šæœ¬åˆ†ç±»è¯´æ˜æ–‡æ¡£
- åŒ…å«æ¯ä¸ªè„šæœ¬çš„ä½¿ç”¨æ–¹æ³•
- æä¾›äº†å¿«é€Ÿä½¿ç”¨æŒ‡å—

## âœ¨ æ¸…ç†æ•ˆæœ

### 1. ç»“æ„æ¸…æ™°
- æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œä¾¿äºæŸ¥æ‰¾å’Œç®¡ç†
- å‡å°‘äº†è„šæœ¬æ··ä¹±å’Œé‡å¤
- æé«˜äº†ç»´æŠ¤æ•ˆç‡

### 2. åŠŸèƒ½å®Œæ•´
- ä¿ç•™äº†æ‰€æœ‰å¿…è¦çš„è„šæœ¬åŠŸèƒ½
- åˆ é™¤äº†é‡å¤å’Œæ— ç”¨çš„è„šæœ¬
- ä¼˜åŒ–äº†è„šæœ¬ç»„ç»‡ç»“æ„

### 3. ä½¿ç”¨ä¾¿åˆ©
- ä¿æŒäº†åŸæœ‰çš„Makefileå‘½ä»¤æ¥å£
- æä¾›äº†è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
- æ”¯æŒå¿«é€ŸæŸ¥æ‰¾å’Œä½¿ç”¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿä½¿ç”¨
```bash
# ä½¿ç”¨Makefileå‘½ä»¤ï¼ˆæ¨èï¼‰
make all          # éƒ¨ç½²æ‰€æœ‰æœåŠ¡
make start        # å¯åŠ¨æ‰€æœ‰æœåŠ¡
make stop         # åœæ­¢æ‰€æœ‰æœåŠ¡
make update       # æ›´æ–°ç‰ˆæœ¬
make quality      # ä»£ç è´¨é‡æ£€æŸ¥
```

### ç›´æ¥ä½¿ç”¨è„šæœ¬
```bash
# éƒ¨ç½²è„šæœ¬
./scripts/deployment/deploy-base.sh
./scripts/deployment/deploy-flask.sh

# SSLè¯ä¹¦ç®¡ç†
./scripts/ssl/generate-ssl-cert.sh
./scripts/ssl/ssl-manager.sh help

# ä»£ç è´¨é‡æ£€æŸ¥
uv run python scripts/quality/quality_check.py
uv run python scripts/quality/quick_check.py

# æ•°æ®åº“ç®¡ç†
uv run python scripts/database/reset_admin_password.py
uv run python scripts/database/show_admin_password.py
```

## ğŸ“‹ ç»´æŠ¤å»ºè®®

### 1. è„šæœ¬å‘½åè§„èŒƒ
- ä½¿ç”¨æè¿°æ€§çš„æ–‡ä»¶å
- ä¿æŒä¸€è‡´çš„å‘½åé£æ ¼
- é¿å…é‡å¤å’Œæ··æ·†

### 2. åˆ†ç±»ç®¡ç†
- æ–°è„šæœ¬æŒ‰åŠŸèƒ½åˆ†ç±»æ”¾ç½®
- å®šæœŸæ£€æŸ¥å’Œæ•´ç†
- ä¿æŒç›®å½•ç»“æ„æ¸…æ™°

### 3. æ–‡æ¡£æ›´æ–°
- åŠæ—¶æ›´æ–°README.md
- è®°å½•è„šæœ¬å˜æ›´
- æä¾›ä½¿ç”¨ç¤ºä¾‹

## ğŸ¯ ä¸‹ä¸€æ­¥

ç°åœ¨scriptsç›®å½•å·²ç»æ¸…ç†å’Œåˆ†ç±»å®Œæˆï¼Œæ‚¨å¯ä»¥ï¼š

1. **ä½¿ç”¨æ–°çš„åˆ†ç±»ç»“æ„** - è„šæœ¬æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œä¾¿äºç®¡ç†
2. **å‚è€ƒREADME.md** - æŸ¥çœ‹è¯¦ç»†çš„è„šæœ¬ä½¿ç”¨è¯´æ˜
3. **ç»§ç»­å¼€å‘** - æ–°è„šæœ¬æŒ‰åˆ†ç±»æ”¾ç½®åˆ°å¯¹åº”ç›®å½•
4. **ç»´æŠ¤æ›´æ–°** - å®šæœŸæ£€æŸ¥å’Œä¼˜åŒ–è„šæœ¬ç»“æ„

æ‰€æœ‰è„šæœ¬å·²åˆ†ç±»æ•´ç†å®Œæˆï¼Œé¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ï¼
