错误: 

标准输出:
app/utils/sqlserver_version_detector.py: note: In member "detect_version" of class "SQLServerVersionDetector":
app/utils/sqlserver_version_detector.py:110:63: error: Function "builtins.any"
is not valid as a type  [valid-type]
        def detect_version(cls, version_string: str) -> dict[str, any]:
                                                                  ^
app/utils/sqlserver_version_detector.py:110:63: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/sqlserver_version_detector.py: note: In member "_unknown_version" of class "SQLServerVersionDetector":
app/utils/sqlserver_version_detector.py:169:44: error: Function "builtins.any"
is not valid as a type  [valid-type]
        def _unknown_version(cls) -> dict[str, any]:
                                               ^
app/utils/sqlserver_version_detector.py:169:44: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/sqlserver_version_detector.py: note: In member "get_recommended_driver" of class "SQLServerVersionDetector":
app/utils/sqlserver_version_detector.py:186:61: error: Function "builtins.any"
is not valid as a type  [valid-type]
    ... def get_recommended_driver(cls, version_info: dict[str, any]) -> str:
                                                                ^
app/utils/sqlserver_version_detector.py:186:61: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/sqlserver_version_detector.py:198:9: error: Statement is unreachable 
[unreachable]
            if version_info["is_modern"]:
            ^
app/utils/sqlserver_version_detector.py: note: In member "get_connection_string_template" of class "SQLServerVersionDetector":
app/utils/sqlserver_version_detector.py:203:69: error: Function "builtins.any"
is not valid as a type  [valid-type]
    ...ion_string_template(cls, version_info: dict[str, any], driver: str) ->...
                                                        ^
app/utils/sqlserver_version_detector.py:203:69: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/sqlserver_version_detector.py:219:13: error: Statement is unreachable
 [unreachable]
                return "DRIVER={{ODBC Driver 17 for SQL Server}};SERVER={s...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/utils/sqlserver_version_detector.py: note: In member "get_compatible_features" of class "SQLServerVersionDetector":
app/utils/sqlserver_version_detector.py:226:62: error: Function "builtins.any"
is not valid as a type  [valid-type]
    ...t_compatible_features(cls, version_info: dict[str, any]) -> list[str]:
                                                          ^
app/utils/sqlserver_version_detector.py:226:62: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/sqlserver_version_detector.py: note: In function "test_version_detection":
app/utils/sqlserver_version_detector.py:252:1: error: Function is missing a
return type annotation  [no-untyped-def]
    def test_version_detection():
    ^
app/utils/sqlserver_version_detector.py:252:1: note: Use "-> None" if function does not return a value
app/utils/sqlserver_version_detector.py: note: At top level:
app/utils/sqlserver_version_detector.py:273:5: error: Call to untyped function
"test_version_detection" in typed context  [no-untyped-call]
        test_version_detection()
        ^~~~~~~~~~~~~~~~~~~~~~~~
app/utils/safe_query_builder.py: note: In member "__init__" of class "SafeQueryBuilder":
app/utils/safe_query_builder.py:12:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __init__(self):
        ^
app/utils/safe_query_builder.py:12:5: note: Use "-> None" if function does not return a value
app/utils/safe_query_builder.py: note: In function "build_safe_filter_conditions":
app/utils/safe_query_builder.py:97:15: error: Call to untyped function
"SafeQueryBuilder" in typed context  [no-untyped-call]
        builder = SafeQueryBuilder()
                  ^~~~~~~~~~~~~~~~~~
app/utils/logging_config.py: note: In class "LogConfig":
app/utils/logging_config.py:65:48: error: Incompatible types in assignment
(expression has type "None", variable has type "dict[LogType, dict[str, Any]]") 
[assignment]
        log_types: dict[LogType, dict[str, Any]] = None
                                                   ^~~~
app/utils/logging_config.py: note: In member "__post_init__" of class "LogConfig":
app/utils/logging_config.py:67:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __post_init__(self):
        ^
app/utils/logging_config.py:67:5: note: Use "-> None" if function does not return a value
app/utils/logging_config.py:69:13: error: Statement is unreachable 
[unreachable]
                self.log_types = {
                ^
app/utils/logging_config.py: note: In member "__init__" of class "LoggingConfigManager":
app/utils/logging_config.py:119:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __init__(self):
        ^
app/utils/logging_config.py:119:5: note: Use "-> None" if function does not return a value
app/utils/logging_config.py: note: At top level:
app/utils/logging_config.py:202:18: error: Call to untyped function
"LoggingConfigManager" in typed context  [no-untyped-call]
    config_manager = LoggingConfigManager()
                     ^~~~~~~~~~~~~~~~~~~~~~
app/utils/security.py: note: In function "sanitize_input":
app/utils/security.py:35:5: error: Returning Any from function declared to
return "str"  [no-any-return]
        return value.strip()
        ^~~~~~~~~~~~~~~~~~~~
app/utils/security.py: note: In function "sanitize_form_data":
app/utils/security.py:155:30: error: Incompatible types in assignment
(expression has type "int | float", target has type "str")  [assignment]
                sanitized[key] = value
                                 ^~~~~
app/services/database_filter_manager.py: note: In member "get_filter_rules" of class "DatabaseFilterManager":
app/services/database_filter_manager.py:237:47: error: Incompatible default for
argument "db_type" (default has type "None", argument has type "str") 
[assignment]
        def get_filter_rules(self, db_type: str = None) -> dict[str, Any]:
                                                  ^~~~
app/services/database_filter_manager.py:237:47: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/database_filter_manager.py:237:47: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/database_filter_manager.py: note: In member "get_filter_statistics" of class "DatabaseFilterManager":
app/services/database_filter_manager.py:303:52: error: Incompatible default for
argument "db_type" (default has type "None", argument has type "str") 
[assignment]
    ...  def get_filter_statistics(self, db_type: str = None) -> dict[str, An...
                                                        ^~~~
app/services/database_filter_manager.py:303:52: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/database_filter_manager.py:303:52: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/api_response.py: note: In member "success" of class "APIResponse":
app/utils/api_response.py:12:23: error: Name "Any" is not defined 
[name-defined]
        def success(data: "Any" = None, message: str = "操作成功") -> "Respons...
                          ^
app/utils/api_response.py:12:23: note: Did you forget to import it from "typing"? (Suggestion: "from typing import Any")
app/utils/api_response.py:12:71: error: Name "Response" is not defined 
[name-defined]
    ... def success(data: "Any" = None, message: str = "操作成功") -> "Response":
                                                                          ^
app/utils/api_response.py: note: In member "error" of class "APIResponse":
app/utils/api_response.py:29:69: error: Name "Any" is not defined 
[name-defined]
    ...age: str = "操作失败", code: int = 400, data: "Any" = None) -> "Response":
                                                         ^
app/utils/api_response.py:29:69: note: Did you forget to import it from "typing"? (Suggestion: "from typing import Any")
app/utils/api_response.py:29:86: error: Name "Response" is not defined 
[name-defined]
    ...age: str = "操作失败", code: int = 400, data: "Any" = None) -> "Response":
                                                                          ^
app/utils/api_response.py: note: In function "success_response":
app/utils/api_response.py:48:1: error: Function is missing a type annotation 
[no-untyped-def]
    def success_response(data=None, message="操作成功"):
    ^
app/utils/api_response.py: note: In function "error_response":
app/utils/api_response.py:53:1: error: Function is missing a type annotation 
[no-untyped-def]
    def error_response(message="操作失败", code=400, data=None):
    ^
app/routes/admin.py:31: error: Unused "type: ignore" comment  [unused-ignore]
                return APIResponse.error("请先登录", code=401)  # type: ignore
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/admin.py:34: error: Unused "type: ignore" comment  [unused-ignore]
                return APIResponse.error("需要管理员权限", code=403)  # type: ign...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "__init__" of class "TaskScheduler":
app/scheduler.py:21:5: error: Function is missing a type annotation 
[no-untyped-def]
        def __init__(self, app=None):
        ^
app/scheduler.py:24:9: error: Call to untyped function "_setup_scheduler" in
typed context  [no-untyped-call]
            self._setup_scheduler()
            ^~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "_setup_scheduler" of class "TaskScheduler":
app/scheduler.py:26:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def _setup_scheduler(self):
        ^
app/scheduler.py:26:5: note: Use "-> None" if function does not return a value
app/scheduler.py: note: In member "_job_executed" of class "TaskScheduler":
app/scheduler.py:53:5: error: Function is missing a type annotation 
[no-untyped-def]
        def _job_executed(self, event):
        ^
app/scheduler.py: note: In member "_job_error" of class "TaskScheduler":
app/scheduler.py:57:5: error: Function is missing a type annotation 
[no-untyped-def]
        def _job_error(self, event):
        ^
app/scheduler.py: note: In member "start" of class "TaskScheduler":
app/scheduler.py:61:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def start(self):
        ^
app/scheduler.py:61:5: note: Use "-> None" if function does not return a value
app/scheduler.py:63:16: error: Item "None" of "Any | None" has no attribute
"running"  [union-attr]
            if not self.scheduler.running:
                   ^~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py:64:13: error: Item "None" of "Any | None" has no attribute
"start"  [union-attr]
                self.scheduler.start()
                ^~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "stop" of class "TaskScheduler":
app/scheduler.py:67:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def stop(self):
        ^
app/scheduler.py:67:5: note: Use "-> None" if function does not return a value
app/scheduler.py:69:12: error: Item "None" of "Any | None" has no attribute
"running"  [union-attr]
            if self.scheduler.running:
               ^~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py:70:13: error: Item "None" of "Any | None" has no attribute
"shutdown"  [union-attr]
                self.scheduler.shutdown()
                ^~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "add_job" of class "TaskScheduler":
app/scheduler.py:73:5: error: Function is missing a type annotation 
[no-untyped-def]
        def add_job(self, func, trigger, **kwargs):
        ^
app/scheduler.py:75:16: error: Item "None" of "Any | None" has no attribute
"add_job"  [union-attr]
            return self.scheduler.add_job(func, trigger, **kwargs)
                   ^~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "remove_job" of class "TaskScheduler":
app/scheduler.py:77:5: error: Function is missing a type annotation 
[no-untyped-def]
        def remove_job(self, job_id):
        ^
app/scheduler.py:80:13: error: Item "None" of "Any | None" has no attribute
"remove_job"  [union-attr]
                self.scheduler.remove_job(job_id)
                ^~~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "get_jobs" of class "TaskScheduler":
app/scheduler.py:85:5: error: Function is missing a return type annotation 
[no-untyped-def]
        def get_jobs(self):
        ^
app/scheduler.py:87:16: error: Item "None" of "Any | None" has no attribute
"get_jobs"  [union-attr]
            return self.scheduler.get_jobs()
                   ^~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "get_job" of class "TaskScheduler":
app/scheduler.py:89:5: error: Function is missing a type annotation 
[no-untyped-def]
        def get_job(self, job_id):
        ^
app/scheduler.py:91:16: error: Item "None" of "Any | None" has no attribute
"get_job"  [union-attr]
            return self.scheduler.get_job(job_id)
                   ^~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "pause_job" of class "TaskScheduler":
app/scheduler.py:93:5: error: Function is missing a type annotation 
[no-untyped-def]
        def pause_job(self, job_id):
        ^
app/scheduler.py:95:9: error: Item "None" of "Any | None" has no attribute
"pause_job"  [union-attr]
            self.scheduler.pause_job(job_id)
            ^~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In member "resume_job" of class "TaskScheduler":
app/scheduler.py:98:5: error: Function is missing a type annotation 
[no-untyped-def]
        def resume_job(self, job_id):
        ^
app/scheduler.py:100:9: error: Item "None" of "Any | None" has no attribute
"resume_job"  [union-attr]
            self.scheduler.resume_job(job_id)
            ^~~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: At top level:
app/scheduler.py:105:13: error: Call to untyped function "TaskScheduler" in
typed context  [no-untyped-call]
    scheduler = TaskScheduler()
                ^~~~~~~~~~~~~~~
app/scheduler.py: note: In function "get_scheduler":
app/scheduler.py:109:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def get_scheduler():
    ^
app/scheduler.py: note: In function "init_scheduler":
app/scheduler.py:114:1: error: Function is missing a type annotation 
[no-untyped-def]
    def init_scheduler(app):
    ^
app/scheduler.py:117:5: error: Call to untyped function "start" in typed
context  [no-untyped-call]
        scheduler.start()
        ^~~~~~~~~~~~~~~~~
app/scheduler.py:120:5: error: Call to untyped function "_add_default_jobs" in
typed context  [no-untyped-call]
        _add_default_jobs()
        ^~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In function "_add_default_jobs":
app/scheduler.py:125:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def _add_default_jobs():
    ^
app/scheduler.py:125:1: note: Use "-> None" if function does not return a value
app/scheduler.py:132:21: error: Call to untyped function "get_jobs" in typed
context  [no-untyped-call]
        existing_jobs = scheduler.get_jobs()
                        ^~~~~~~~~~~~~~~~~~~~
app/scheduler.py:166:13: error: Call to untyped function "add_job" in typed
context  [no-untyped-call]
                scheduler.add_job(
                ^
app/scheduler.py:180:9: error: Call to untyped function
"_add_hardcoded_default_jobs" in typed context  [no-untyped-call]
            _add_hardcoded_default_jobs()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py:184:9: error: Call to untyped function
"_add_hardcoded_default_jobs" in typed context  [no-untyped-call]
            _add_hardcoded_default_jobs()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/scheduler.py: note: In function "_add_hardcoded_default_jobs":
app/scheduler.py:189:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def _add_hardcoded_default_jobs():
    ^
app/scheduler.py:189:1: note: Use "-> None" if function does not return a value
app/scheduler.py:194:5: error: Call to untyped function "add_job" in typed
context  [no-untyped-call]
        scheduler.add_job(
        ^
app/scheduler.py:205:5: error: Call to untyped function "add_job" in typed
context  [no-untyped-call]
        scheduler.add_job(
        ^
app/scheduler.py: note: In function "scheduled_task":
app/scheduler.py:216:1: error: Function is missing a type annotation 
[no-untyped-def]
    def scheduled_task(job_id=None, name=None):
    ^
app/scheduler.py:219:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorator(func):
        ^
app/utils/password_manager.py: note: In member "__init__" of class "PasswordManager":
app/utils/password_manager.py:15:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __init__(self):
        ^
app/utils/password_manager.py:15:5: note: Use "-> None" if function does not return a value
app/utils/password_manager.py:16:20: error: Call to untyped function
"_get_or_create_key" in typed context  [no-untyped-call]
            self.key = self._get_or_create_key()
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/password_manager.py: note: In member "_get_or_create_key" of class "PasswordManager":
app/utils/password_manager.py:19:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def _get_or_create_key(self):
        ^
app/utils/password_manager.py:24:19: error: Incompatible types in assignment
(expression has type "bytes", variable has type "str | None")  [assignment]
                key = Fernet.generate_key()
                      ^~~~~~~~~~~~~~~~~~~~~
app/utils/password_manager.py:29:88: error: Item "str" of "Literal[''] | None"
has no attribute "decode"  [union-attr]
    ...em_logger.info("生成的临时密钥", module="password_manager", key=key.decode())
                                                                             ^
app/utils/password_manager.py:29:88: error: Item "None" of "Literal[''] | None"
has no attribute "decode"  [union-attr]
    ...em_logger.info("生成的临时密钥", module="password_manager", key=key.decode())
                                                                             ^
app/utils/password_manager.py:33:60: error: Item "str" of "Literal[''] | None"
has no attribute "decode"  [union-attr]
    ...           env_var=f"export PASSWORD_ENCRYPTION_KEY='{key.decode()}'",
                                                             ^~~~~~~~~~
app/utils/password_manager.py:33:60: error: Item "None" of "Literal[''] | None"
has no attribute "decode"  [union-attr]
    ...           env_var=f"export PASSWORD_ENCRYPTION_KEY='{key.decode()}'",
                                                             ^~~~~~~~~~
app/utils/password_manager.py:36:19: error: Incompatible types in assignment
(expression has type "bytes", variable has type "str | None")  [assignment]
                key = key.encode()
                      ^~~~~~~~~~~~
app/utils/password_manager.py: note: At top level:
app/utils/password_manager.py:106:20: error: Call to untyped function
"PasswordManager" in typed context  [no-untyped-call]
    password_manager = PasswordManager()
                       ^~~~~~~~~~~~~~~~~
app/__init__.py:13:1: error: Skipping analyzing "flask_bcrypt": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_bcrypt import Bcrypt
    ^
app/__init__.py:15:1: error: Library stubs not installed for "flask_cors" 
[import-untyped]
    from flask_cors import CORS
    ^
app/__init__.py:15:1: note: Hint: "python3 -m pip install types-Flask-Cors"
app/__init__.py:15:1: note: (or run "mypy --install-types" to install all missing stub packages)
app/__init__.py:17:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import LoginManager
    ^
app/__init__.py:18:1: error: Library stubs not installed for "flask_migrate" 
[import-untyped]
    from flask_migrate import Migrate
    ^
app/__init__.py:18:1: note: Hint: "python3 -m pip install types-Flask-Migrate"
app/__init__.py:20:1: error: Skipping analyzing "flask_wtf.csrf": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_wtf.csrf import CSRFProtect
    ^
app/__init__.py:20:1: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
app/__init__.py: note: In function "create_app":
app/__init__.py:79:5: error: Call to untyped function "configure_structlog" in
typed context  [no-untyped-call]
        configure_structlog(app)
        ^~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:84:5: error: Call to untyped function "register_error_handlers"
in typed context  [no-untyped-call]
        register_error_handlers(app)
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:89:5: error: "Flask" has no attribute "advanced_error_handler" 
[attr-defined]
        app.advanced_error_handler = advanced_error_handler
        ^~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:110:16: error: Incompatible return value type (got
"tuple[Response, Any | int]", expected "tuple[str, int]")  [return-value]
            return jsonify(error_response), status_code
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py: note: In function "initialize_extensions":
app/__init__.py:289:6: error: Untyped decorator makes function "load_user"
untyped  [misc]
        @login_manager.user_loader
         ^~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:290:36: error: Name "User" is not defined  [name-defined]
        def load_user(user_id: str) -> "User | None":
                                       ^
app/__init__.py:317:24: error: Call to untyped function "from_url" in typed
context  [no-untyped-call]
            redis_client = redis.from_url(redis_url)
                           ^~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:322:9: error: Call to untyped function "init_rate_limiter" in
typed context  [no-untyped-call]
            init_rate_limiter(redis_client)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:330:5: error: "Flask" has no attribute "redis_client"; maybe
"test_client"?  [attr-defined]
        app.redis_client = redis_client
        ^~~~~~~~~~~~~~~~
app/__init__.py: note: In function "register_blueprints":
app/__init__.py:399:5: error: Call to untyped function "init_scheduler" in
typed context  [no-untyped-call]
        init_scheduler(app)
        ^~~~~~~~~~~~~~~~~~~
app/__init__.py: note: In function "configure_template_filters":
app/__init__.py:447:42: error: Name "datetime" is not defined  [name-defined]
        def china_time_filter(dt: Union[str, "datetime"], format_str: str ...
                                             ^
app/__init__.py:449:16: error: Incompatible return value type (got
"str | None", expected "str")  [return-value]
            return format_china_time(dt, format_str)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:452:42: error: Name "datetime" is not defined  [name-defined]
        def china_date_filter(dt: Union[str, "datetime"]) -> str:
                                             ^
app/__init__.py:454:16: error: Incompatible return value type (got
"str | None", expected "str")  [return-value]
            return format_china_time(dt, "%Y-%m-%d")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/__init__.py:457:46: error: Name "datetime" is not defined  [name-defined]
        def china_datetime_filter(dt: Union[str, "datetime"]) -> str:
                                                 ^
app/__init__.py:459:16: error: Incompatible return value type (got
"str | None", expected "str")  [return-value]
            return format_china_time(dt, "%Y-%m-%d %H:%M:%S")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/user.py:7:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import UserMixin
    ^
app/models/user.py: note: In class "User":
app/models/user.py:13:12: error: Class cannot subclass "UserMixin" (has type
"Any")  [misc]
    class User(UserMixin, db.Model):
               ^~~~~~~~~
app/models/user.py: note: At top level:
app/models/user.py:13:23: error: Name "db.Model" is not defined  [name-defined]
    class User(UserMixin, db.Model):
                          ^
app/models/user.py: note: In class "User":
app/models/user.py:13:23: error: Class cannot subclass "Model" (has type "Any")
 [misc]
    class User(UserMixin, db.Model):
                          ^~~~~~~~
app/models/user.py: note: In member "check_password" of class "User":
app/models/user.py:75:9: error: Returning Any from function declared to return
"bool"  [no-any-return]
            return bcrypt.check_password_hash(self.password, password)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/user.py: note: In member "is_admin" of class "User":
app/models/user.py:84:9: error: Returning Any from function declared to return
"bool"  [no-any-return]
            return self.role == "admin"
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/user.py: note: In member "to_dict" of class "User":
app/models/user.py:91:26: error: Missing type parameters for generic type
"dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/user.py: note: In member "create_admin" of class "User":
app/models/user.py:119:9: error: Returning Any from function declared to return
"User | None"  [no-any-return]
            return admin
            ^~~~~~~~~~~~
app/models/task.py:10:12: error: Name "db.Model" is not defined  [name-defined]
    class Task(db.Model):
               ^
app/models/task.py: note: In class "Task":
app/models/task.py:10:12: error: Class cannot subclass "Model" (has type "Any")
 [misc]
    class Task(db.Model):
               ^~~~~~~~
app/models/task.py: note: In member "to_dict" of class "Task":
app/models/task.py:72:26: error: Missing type parameters for generic type
"dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/task.py: note: In member "get_active_tasks" of class "Task":
app/models/task.py:104:31: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_active_tasks() -> list:
                                  ^
app/models/task.py:106:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Task.query.filter_by(is_active=True).all()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/task.py: note: In member "get_by_type" of class "Task":
app/models/task.py:109:40: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_type(task_type: str) -> list:
                                           ^
app/models/task.py:111:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Task.query.filter_by(task_type=task_type, is_active=Tru...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/task.py: note: In member "get_by_db_type" of class "Task":
app/models/task.py:114:41: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_db_type(db_type: str) -> list:
                                            ^
app/models/task.py:116:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Task.query.filter_by(db_type=db_type, is_active=True).a...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/task.py: note: In member "get_builtin_tasks" of class "Task":
app/models/task.py:119:32: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_builtin_tasks() -> list:
                                   ^
app/models/task.py:121:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Task.query.filter_by(is_builtin=True).all()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/task.py: note: In member "success_rate" of class "Task":
app/models/task.py:128:9: error: Returning Any from function declared to return
"float"  [no-any-return]
            return round((self.success_count / self.run_count * 100), 2)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/task.py: note: In member "get_matching_instances" of class "Task":
app/models/task.py:130:41: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_matching_instances(self) -> list:
                                            ^
app/models/task.py:134:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Instance.query.filter_by(db_type=self.db_type, is_activ...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/log.py:10:11: error: Name "db.Model" is not defined  [name-defined]
    class Log(db.Model):
              ^
app/models/log.py: note: In class "Log":
app/models/log.py:10:11: error: Class cannot subclass "Model" (has type "Any") 
[misc]
    class Log(db.Model):
              ^~~~~~~~
app/models/log.py: note: In member "to_dict" of class "Log":
app/models/log.py:66:26: error: Missing type parameters for generic type "dict"
 [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/log.py: note: In member "get_by_level" of class "Log":
app/models/log.py:228:37: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_level(level: str) -> list:
                                        ^
app/models/log.py:230:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Log.query.filter_by(level=level).order_by(Log.created_a...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/log.py: note: In member "get_by_type" of class "Log":
app/models/log.py:233:39: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_type(log_type: str) -> list:
                                          ^
app/models/log.py:235:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Log.query.filter_by(log_type=log_type).order_by(Log.cre...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/log.py: note: In member "get_by_user" of class "Log":
app/models/log.py:238:38: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_user(user_id: int) -> list:
                                         ^
app/models/log.py:240:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Log.query.filter_by(user_id=user_id).order_by(Log.creat...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/log.py: note: In member "get_recent_logs" of class "Log":
app/models/log.py:243:46: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_recent_logs(limit: int = 100) -> list:
                                                 ^
app/models/log.py:245:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Log.query.order_by(Log.created_at.desc()).limit(limit)....
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/log.py: note: In member "get_error_logs" of class "Log":
app/models/log.py:248:44: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_error_logs(limit: int = 50) -> list:
                                               ^
app/models/log.py:250:9: error: Returning Any from function declared to return
"list[Any]"  [no-any-return]
            return Log.query.filter(Log.level.in_(["ERROR", "CRITICAL"]))....
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/instance.py:11:16: error: Name "db.Model" is not defined 
[name-defined]
    class Instance(db.Model):
                   ^
app/models/instance.py: note: In class "Instance":
app/models/instance.py:11:16: error: Class cannot subclass "Model" (has type
"Any")  [misc]
    class Instance(db.Model):
                   ^~~~~~~~
app/models/instance.py: note: In member "test_connection" of class "Instance":
app/models/instance.py:78:34: error: Missing type parameters for generic type
"dict"  [type-arg]
        def test_connection(self) -> dict:
                                     ^
app/models/instance.py: note: In member "_test_sql_server_connection" of class "Instance":
app/models/instance.py:99:46: error: Missing type parameters for generic type
"dict"  [type-arg]
        def _test_sql_server_connection(self) -> dict:
                                                 ^
app/models/instance.py: note: In member "_test_mysql_connection" of class "Instance":
app/models/instance.py:116:41: error: Missing type parameters for generic type
"dict"  [type-arg]
        def _test_mysql_connection(self) -> dict:
                                            ^
app/models/instance.py: note: In member "_test_oracle_connection" of class "Instance":
app/models/instance.py:133:42: error: Missing type parameters for generic type
"dict"  [type-arg]
        def _test_oracle_connection(self) -> dict:
                                             ^
app/models/instance.py: note: In member "to_dict" of class "Instance":
app/models/instance.py:174:58: error: Missing type parameters for generic type
"dict"  [type-arg]
        def to_dict(self, include_password: bool = False) -> dict:
                                                             ^
app/models/instance.py: note: In member "get_active_instances" of class "Instance":
app/models/instance.py:254:35: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_active_instances() -> list:
                                      ^
app/models/instance.py:256:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Instance.query.filter_by(deleted_at=None, status="activ...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/instance.py: note: In member "get_by_db_type" of class "Instance":
app/models/instance.py:259:41: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_db_type(db_type: str) -> list:
                                            ^
app/models/instance.py:261:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Instance.query.filter_by(db_type=db_type, deleted_at=No...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/instance.py: note: In member "get_by_environment" of class "Instance":
app/models/instance.py:264:49: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_by_environment(environment: str) -> list:
                                                    ^
app/models/instance.py:266:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Instance.query.filter_by(environment=environment, delet...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/instance.py: note: In member "get_by_db_type_and_environment" of class "Instance":
app/models/instance.py:269:75: error: Missing type parameters for generic type
"list"  [type-arg]
    ...et_by_db_type_and_environment(db_type: str, environment: str) -> list:
                                                                        ^
app/models/instance.py:271:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Instance.query.filter_by(db_type=db_type, environment=e...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/instance.py: note: In member "get_environment_choices" of class "Instance":
app/models/instance.py:274:38: error: Missing type parameters for generic type
"list"  [type-arg]
        def get_environment_choices() -> list:
                                         ^
app/models/database_type_config.py:13:26: error: Name "db.Model" is not defined
 [name-defined]
    class DatabaseTypeConfig(db.Model):
                             ^
app/models/database_type_config.py: note: In class "DatabaseTypeConfig":
app/models/database_type_config.py:13:26: error: Class cannot subclass "Model"
(has type "Any")  [misc]
    class DatabaseTypeConfig(db.Model):
                             ^~~~~~~~
app/models/database_type_config.py: note: In function "features_list":
app/models/database_type_config.py:48:17: error: Returning Any from function
declared to return "list[str]"  [no-any-return]
                    return json.loads(self.features)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/database_type_config.py: note: In member "get_active_types" of class "DatabaseTypeConfig":
app/models/database_type_config.py:82:9: error: Returning Any from function
declared to return "list[DatabaseTypeConfig]"  [no-any-return]
            return cls.query.filter_by(is_active=True).order_by(cls.sort_o...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/database_type_config.py: note: In member "get_by_name" of class "DatabaseTypeConfig":
app/models/database_type_config.py:87:9: error: Returning Any from function
declared to return "DatabaseTypeConfig"  [no-any-return]
            return cls.query.filter_by(name=name).first()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/credential.py:12:18: error: Name "db.Model" is not defined 
[name-defined]
    class Credential(db.Model):
                     ^
app/models/credential.py: note: In class "Credential":
app/models/credential.py:12:18: error: Class cannot subclass "Model" (has type
"Any")  [misc]
    class Credential(db.Model):
                     ^~~~~~~~
app/models/credential.py: note: In member "__init__" of class "Credential":
app/models/credential.py:38:23: error: Missing type parameters for generic type
"list"  [type-arg]
            instance_ids: list | None = None,
                          ^
app/models/credential.py: note: In member "check_password" of class "Credential":
app/models/credential.py:86:13: error: Returning Any from function declared to
return "bool"  [no-any-return]
                return bcrypt.check_password_hash(self.password, password)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/credential.py:94:9: error: Returning Any from function declared to
return "bool"  [no-any-return]
            return self.password == password
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/credential.py: note: In member "get_password_masked" of class "Credential":
app/models/credential.py:104:13: error: Returning Any from function declared to
return "str"  [no-any-return]
                return "*" * (len(self.password) - 4) + self.password[-4:]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/credential.py: note: In member "get_plain_password" of class "Credential":
app/models/credential.py:128:9: error: Returning Any from function declared to
return "str"  [no-any-return]
            return self.password
            ^~~~~~~~~~~~~~~~~~~~
app/models/credential.py: note: In member "to_dict" of class "Credential":
app/models/credential.py:130:58: error: Missing type parameters for generic
type "dict"  [type-arg]
        def to_dict(self, include_password: bool = False) -> dict:
                                                             ^
app/models/credential.py: note: In member "get_active_credentials" of class "Credential":
app/models/credential.py:190:37: error: Missing type parameters for generic
type "list"  [type-arg]
        def get_active_credentials() -> list:
                                        ^
app/models/credential.py:192:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Credential.query.filter_by(deleted_at=None).all()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/credential.py: note: In member "get_by_type" of class "Credential":
app/models/credential.py:195:46: error: Missing type parameters for generic
type "list"  [type-arg]
        def get_by_type(credential_type: str) -> list:
                                                 ^
app/models/credential.py:197:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Credential.query.filter_by(credential_type=credential_t...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/credential.py: note: In member "get_by_db_type" of class "Credential":
app/models/credential.py:200:41: error: Missing type parameters for generic
type "list"  [type-arg]
        def get_by_db_type(db_type: str) -> list:
                                            ^
app/models/credential.py:202:9: error: Returning Any from function declared to
return "list[Any]"  [no-any-return]
            return Credential.query.filter_by(db_type=db_type, deleted_at=...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/credential.py: note: In class "Credential":
app/models/credential.py:204:5: error: Name "to_dict" already defined on line
130  [no-redef]
        def to_dict(self) -> dict:
        ^
app/models/credential.py: note: In member "to_dict" of class "Credential":
app/models/credential.py:204:26: error: Missing type parameters for generic
type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/utils/advanced_error_handler.py: note: In member "__init__" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:70:9: error: Need type annotation for
"error_handlers" (hint: "error_handlers: dict[<type>, <type>] = ...") 
[var-annotated]
            self.error_handlers = {}
            ^~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:71:9: error: Need type annotation for
"recovery_strategies" (hint: "recovery_strategies: dict[<type>, <type>] = ...") 
[var-annotated]
            self.recovery_strategies = {}
            ^~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:72:9: error: Need type annotation for
"error_metrics" (hint: "error_metrics: dict[<type>, <type>] = ...") 
[var-annotated]
            self.error_metrics = {}
            ^~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py: note: In member "register_error_handler" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:75:65: error: Missing type parameters for
generic type "Callable"  [type-arg]
    ...ster_error_handler(self, error_type: type, handler: Callable) -> None:
                                                           ^
app/utils/advanced_error_handler.py: note: In member "register_recovery_strategy" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:79:73: error: Missing type parameters for
generic type "Callable"  [type-arg]
    ...overy_strategy(self, error_category: str, strategy: Callable) -> None:
                                                           ^
app/utils/advanced_error_handler.py: note: In member "handle_error" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:83:70: error: Incompatible default for
argument "context" (default has type "None", argument has type "ErrorContext") 
[assignment]
    ...(self, error: Exception, context: ErrorContext = None) -> dict[str, An...
                                                        ^~~~
app/utils/advanced_error_handler.py:83:70: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/advanced_error_handler.py:83:70: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/advanced_error_handler.py:86:13: error: Statement is unreachable 
[unreachable]
                context = ErrorContext(error)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py: note: In member "_log_error" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:263:12: error: Non-overlapping equality
check (left operand type: "str", right operand type:
"Literal[LogLevel.CRITICAL]")  [comparison-overlap]
            if log_level == LogLevel.CRITICAL:
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:264:13: error: Statement is unreachable 
[unreachable]
                logger.critical(f"严重错误: {context.error_id}", extra=log_dat...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:265:14: error: Non-overlapping equality
check (left operand type: "str", right operand type: "Literal[LogLevel.ERROR]") 
[comparison-overlap]
            elif log_level == LogLevel.ERROR:
                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:266:13: error: Statement is unreachable 
[unreachable]
                logger.error(f"错误: {context.error_id}", extra=log_data)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:267:14: error: Non-overlapping equality
check (left operand type: "str", right operand type:
"Literal[LogLevel.WARNING]")  [comparison-overlap]
            elif log_level == LogLevel.WARNING:
                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:268:13: error: Statement is unreachable 
[unreachable]
                logger.warning(f"警告: {context.error_id}", extra=log_data)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py: note: In member "_get_log_level" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:277:20: error: Incompatible return value
type (got "LogLevel", expected "str")  [return-value]
                return LogLevel.ERROR
                       ^~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:279:20: error: Incompatible return value
type (got "LogLevel", expected "str")  [return-value]
                return LogLevel.WARNING
                       ^~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py:280:16: error: Incompatible return value
type (got "LogLevel", expected "str")  [return-value]
            return LogLevel.ERROR
                   ^~~~~~~~~~~~~~
app/utils/advanced_error_handler.py: note: In member "_get_error_info" of class "AdvancedErrorHandler":
app/utils/advanced_error_handler.py:330:13: error: Returning Any from function
declared to return "dict[str, Any]"  [no-any-return]
                return handler(error, context)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/advanced_error_handler.py: note: In function "handle_advanced_errors":
app/utils/advanced_error_handler.py:378:34: error: Missing type parameters for
generic type "Callable"  [type-arg]
    def handle_advanced_errors(func: Callable) -> Callable:
                                     ^
app/utils/advanced_error_handler.py: note: In function "monitor_errors":
app/utils/advanced_error_handler.py:429:26: error: Missing type parameters for
generic type "Callable"  [type-arg]
    def monitor_errors(func: Callable) -> Callable:
                             ^
app/models/unified_log.py:27:18: error: Name "db.Model" is not defined 
[name-defined]
    class UnifiedLog(db.Model):
                     ^
app/models/unified_log.py: note: In class "UnifiedLog":
app/models/unified_log.py:27:18: error: Class cannot subclass "Model" (has type
"Any")  [misc]
    class UnifiedLog(db.Model):
                     ^~~~~~~~
app/models/unified_log.py: note: In member "get_recent_logs" of class "UnifiedLog":
app/models/unified_log.py:120:9: error: Returning Any from function declared to
return "list[UnifiedLog]"  [no-any-return]
            return query.order_by(cls.timestamp.desc()).limit(limit).all()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/unified_log.py: note: In member "get_error_logs" of class "UnifiedLog":
app/models/unified_log.py:125:9: error: Returning Any from function declared to
return "list[UnifiedLog]"  [no-any-return]
            return (
            ^
app/models/unified_log.py: note: In member "get_logs_by_module" of class "UnifiedLog":
app/models/unified_log.py:138:9: error: Returning Any from function declared to
return "list[UnifiedLog]"  [no-any-return]
            return (
            ^
app/models/unified_log.py: note: In member "search_logs" of class "UnifiedLog":
app/models/unified_log.py:170:9: error: Returning Any from function declared to
return "list[UnifiedLog]"  [no-any-return]
            return query.order_by(cls.timestamp.desc()).limit(limit).all()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/unified_log.py: note: In member "cleanup_old_logs" of class "UnifiedLog":
app/models/unified_log.py:256:9: error: Returning Any from function declared to
return "int"  [no-any-return]
            return deleted_count
            ^~~~~~~~~~~~~~~~~~~~
app/models/sync_session.py:11:19: error: Name "db.Model" is not defined 
[name-defined]
    class SyncSession(db.Model):
                      ^
app/models/sync_session.py: note: In class "SyncSession":
app/models/sync_session.py:11:19: error: Class cannot subclass "Model" (has
type "Any")  [misc]
    class SyncSession(db.Model):
                      ^~~~~~~~
app/models/sync_session.py: note: In member "__init__" of class "SyncSession":
app/models/sync_session.py:46:90: error: Incompatible default for argument
"created_by" (default has type "None", argument has type "int")  [assignment]
    ...nc_type: str, sync_category: str = "account", created_by: int = None):
                                                                       ^~~~
app/models/sync_session.py:46:90: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/models/sync_session.py:46:90: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/models/sync_session.py: note: In member "to_dict" of class "SyncSession":
app/models/sync_session.py:62:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def to_dict(self):
        ^
app/models/sync_session.py: note: In member "update_statistics" of class "SyncSession":
app/models/sync_session.py:80:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def update_statistics(self):
        ^
app/models/sync_session.py:80:5: note: Use "-> None" if function does not return a value
app/models/sync_session.py: note: In member "get_progress_percentage" of class "SyncSession":
app/models/sync_session.py:98:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def get_progress_percentage(self):
        ^
app/models/sync_session.py: note: In member "get_sessions_by_type" of class "SyncSession":
app/models/sync_session.py:106:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def get_sessions_by_type(sync_type: str, limit: int = 50):
        ^
app/models/sync_session.py: note: In member "get_sessions_by_category" of class "SyncSession":
app/models/sync_session.py:113:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def get_sessions_by_category(sync_category: str, limit: int = 50):
        ^
app/models/sync_session.py: note: In member "__repr__" of class "SyncSession":
app/models/sync_session.py:122:5: error: Function is missing a type annotation 
[no-untyped-def]
        def __repr__(self):
        ^
app/models/sync_instance_record.py:10:26: error: Name "db.Model" is not defined
 [name-defined]
    class SyncInstanceRecord(db.Model):
                             ^
app/models/sync_instance_record.py: note: In class "SyncInstanceRecord":
app/models/sync_instance_record.py:10:26: error: Class cannot subclass "Model"
(has type "Any")  [misc]
    class SyncInstanceRecord(db.Model):
                             ^~~~~~~~
app/models/sync_instance_record.py: note: In member "__init__" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:52:30: error: Incompatible default for
argument "instance_name" (default has type "None", argument has type "str") 
[assignment]
            instance_name: str = None,
                                 ^~~~
app/models/sync_instance_record.py:52:30: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/models/sync_instance_record.py:52:30: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/models/sync_instance_record.py: note: In member "to_dict" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:70:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def to_dict(self):
        ^
app/models/sync_instance_record.py: note: In member "start_sync" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:90:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def start_sync(self):
        ^
app/models/sync_instance_record.py:90:5: note: Use "-> None" if function does not return a value
app/models/sync_instance_record.py: note: In member "complete_sync" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:95:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def complete_sync(
        ^
app/models/sync_instance_record.py:101:23: error: Missing type parameters for
generic type "dict"  [type-arg]
            sync_details: dict = None,
                          ^
app/models/sync_instance_record.py:101:30: error: Incompatible default for
argument "sync_details" (default has type "None", argument has type
"dict[Any, Any]")  [assignment]
            sync_details: dict = None,
                                 ^~~~
app/models/sync_instance_record.py:101:30: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/models/sync_instance_record.py:101:30: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/models/sync_instance_record.py: note: In member "fail_sync" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:112:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def fail_sync(self, error_message: str, sync_details: dict = None)...
        ^
app/models/sync_instance_record.py:112:59: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...   def fail_sync(self, error_message: str, sync_details: dict = None):
                                                                ^
app/models/sync_instance_record.py:112:66: error: Incompatible default for
argument "sync_details" (default has type "None", argument has type
"dict[Any, Any]")  [assignment]
    ...   def fail_sync(self, error_message: str, sync_details: dict = None):
                                                                       ^~~~
app/models/sync_instance_record.py:112:66: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/models/sync_instance_record.py:112:66: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/models/sync_instance_record.py: note: In member "get_duration_seconds" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:119:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def get_duration_seconds(self):
        ^
app/models/sync_instance_record.py: note: In member "get_records_by_session" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:126:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def get_records_by_session(session_id: str):
        ^
app/models/sync_instance_record.py: note: In member "get_records_by_instance" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:135:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def get_records_by_instance(instance_id: int, limit: int = 50):
        ^
app/models/sync_instance_record.py: note: In member "__repr__" of class "SyncInstanceRecord":
app/models/sync_instance_record.py:144:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __repr__(self):
        ^
app/models/permission_config.py:10:24: error: Name "db.Model" is not defined 
[name-defined]
    class PermissionConfig(db.Model):
                           ^
app/models/permission_config.py: note: In class "PermissionConfig":
app/models/permission_config.py:10:24: error: Class cannot subclass "Model"
(has type "Any")  [misc]
    class PermissionConfig(db.Model):
                           ^~~~~~~~
app/models/permission_config.py: note: In member "to_dict" of class "PermissionConfig":
app/models/permission_config.py:37:26: error: Missing type parameters for
generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/permission_config.py: note: In member "get_permissions_by_db_type" of class "PermissionConfig":
app/models/permission_config.py:52:58: error: Missing type parameters for
generic type "dict"  [type-arg]
        def get_permissions_by_db_type(cls, db_type: str) -> dict:
                                                             ^
app/models/permission_config.py:61:9: error: Need type annotation for "result"
(hint: "result: dict[<type>, <type>] = ...")  [var-annotated]
            result = {}
            ^~~~~~
app/models/classification_batch.py:14:27: error: Name "db.Model" is not defined
 [name-defined]
    class ClassificationBatch(db.Model):
                              ^
app/models/classification_batch.py: note: In class "ClassificationBatch":
app/models/classification_batch.py:14:27: error: Class cannot subclass "Model"
(has type "Any")  [misc]
    class ClassificationBatch(db.Model):
                              ^~~~~~~~
app/models/classification_batch.py: note: In member "__repr__" of class "ClassificationBatch":
app/models/classification_batch.py:76:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __repr__(self):
        ^
app/models/classification_batch.py: note: In member "to_dict" of class "ClassificationBatch":
app/models/classification_batch.py:79:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def to_dict(self):
        ^
app/models/classification_batch.py: note: In member "duration" of class "ClassificationBatch":
app/models/classification_batch.py:101:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def duration(self):
        ^
app/models/classification_batch.py: note: In member "success_rate" of class "ClassificationBatch":
app/models/classification_batch.py:110:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def success_rate(self):
        ^
app/models/base_sync_data.py:12:20: error: Name "db.Model" is not defined 
[name-defined]
    class BaseSyncData(db.Model):
                       ^
app/models/base_sync_data.py: note: In class "BaseSyncData":
app/models/base_sync_data.py:12:20: error: Class cannot subclass "Model" (has
type "Any")  [misc]
    class BaseSyncData(db.Model):
                       ^~~~~~~~
app/models/base_sync_data.py: note: In member "instance_id" of class "BaseSyncData":
app/models/base_sync_data.py:20:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def instance_id(cls):
        ^
app/models/base_sync_data.py: note: In member "to_dict" of class "BaseSyncData":
app/models/base_sync_data.py:32:26: error: Missing type parameters for generic
type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_classification.py:11:29: error: Name "db.Model" is not
defined  [name-defined]
    class AccountClassification(db.Model):
                                ^
app/models/account_classification.py: note: In class "AccountClassification":
app/models/account_classification.py:11:29: error: Class cannot subclass
"Model" (has type "Any")  [misc]
    class AccountClassification(db.Model):
                                ^~~~~~~~
app/models/account_classification.py: note: In member "to_dict" of class "AccountClassification":
app/models/account_classification.py:44:26: error: Missing type parameters for
generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_classification.py: note: At top level:
app/models/account_classification.py:62:26: error: Name "db.Model" is not
defined  [name-defined]
    class ClassificationRule(db.Model):
                             ^
app/models/account_classification.py: note: In class "ClassificationRule":
app/models/account_classification.py:62:26: error: Class cannot subclass
"Model" (has type "Any")  [misc]
    class ClassificationRule(db.Model):
                             ^~~~~~~~
app/models/account_classification.py: note: In member "to_dict" of class "ClassificationRule":
app/models/account_classification.py:79:26: error: Missing type parameters for
generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_classification.py: note: In member "get_rule_expression" of class "ClassificationRule":
app/models/account_classification.py:92:38: error: Missing type parameters for
generic type "dict"  [type-arg]
        def get_rule_expression(self) -> dict:
                                         ^
app/models/account_classification.py:95:13: error: Returning Any from function
declared to return "dict[Any, Any]"  [no-any-return]
                return json.loads(self.rule_expression)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/models/account_classification.py: note: In member "set_rule_expression" of class "ClassificationRule":
app/models/account_classification.py:99:47: error: Missing type parameters for
generic type "dict"  [type-arg]
        def set_rule_expression(self, expression: dict) -> None:
                                                  ^
app/models/account_classification.py: note: At top level:
app/models/account_classification.py:104:39: error: Name "db.Model" is not
defined  [name-defined]
    class AccountClassificationAssignment(db.Model):
                                          ^
app/models/account_classification.py: note: In class "AccountClassificationAssignment":
app/models/account_classification.py:104:39: error: Class cannot subclass
"Model" (has type "Any")  [misc]
    class AccountClassificationAssignment(db.Model):
                                          ^~~~~~~~
app/models/account_classification.py: note: In member "to_dict" of class "AccountClassificationAssignment":
app/models/account_classification.py:134:26: error: Missing type parameters for
generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_change_log.py:10:24: error: Name "db.Model" is not defined 
[name-defined]
    class AccountChangeLog(db.Model):
                           ^
app/models/account_change_log.py: note: In class "AccountChangeLog":
app/models/account_change_log.py:10:24: error: Class cannot subclass "Model"
(has type "Any")  [misc]
    class AccountChangeLog(db.Model):
                           ^~~~~~~~
app/models/account_change_log.py: note: In member "to_dict" of class "AccountChangeLog":
app/models/account_change_log.py:47:26: error: Missing type parameters for
generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_change.py:10:21: error: Name "db.Model" is not defined 
[name-defined]
    class AccountChange(db.Model):
                        ^
app/models/account_change.py: note: In class "AccountChange":
app/models/account_change.py:10:21: error: Class cannot subclass "Model" (has
type "Any")  [misc]
    class AccountChange(db.Model):
                        ^~~~~~~~
app/models/account_change.py: note: In member "__init__" of class "AccountChange":
app/models/account_change.py:26:93: error: Missing type parameters for generic
type "dict"  [type-arg]
    ... int, instance_id: int, change_type: str, account_data: dict) -> None:
                                                               ^
app/models/account_change.py: note: In member "to_dict" of class "AccountChange":
app/models/account_change.py:41:26: error: Missing type parameters for generic
type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/account_change.py: note: In member "get_changes_by_sync" of class "AccountChange":
app/models/account_change.py:59:51: error: Missing type parameters for generic
type "list"  [type-arg]
        def get_changes_by_sync(sync_data_id: int) -> list:
                                                      ^
app/models/account_change.py:69:9: error: Returning Any from function declared
to return "list[Any]"  [no-any-return]
            return AccountChange.query.filter_by(sync_data_id=sync_data_id...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/models/account_change.py: note: In member "get_changes_by_instance" of class "AccountChange":
app/models/account_change.py:72:72: error: Missing type parameters for generic
type "list"  [type-arg]
    ...f get_changes_by_instance(instance_id: int, limit: int = 100) -> list:
                                                                        ^
app/models/account_change.py:83:9: error: Returning Any from function declared
to return "list[Any]"  [no-any-return]
            return (
            ^
app/utils/structlog_config.py:17:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import current_user
    ^
app/utils/structlog_config.py: note: In member "_add_global_context" of class "StructlogConfig":
app/utils/structlog_config.py:31:1: error: Need type annotation for
"_global_context" (hint: "_global_context: dict[<type>, <type>] = ...") 
[var-annotated]
    _global_context = {}
    ^~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In member "__init__" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:40:26: error: Need type annotation for
"log_queue"  [var-annotated]
            self.log_queue = Queue()
                             ^~~~~~~
app/utils/structlog_config.py: note: In member "__call__" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:49:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __call__(self, logger, method_name, event_dict):
        ^
app/utils/structlog_config.py: note: In member "_build_log_entry" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:94:17: error: Statement is unreachable 
[unreachable]
                    if isinstance(event_dict, str):
                    ^
app/utils/structlog_config.py: note: In member "_process_logs" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:186:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def _process_logs(self):
        ^
app/utils/structlog_config.py:186:5: note: Use "-> None" if function does not return a value
app/utils/structlog_config.py:204:21: error: Call to untyped function
"_flush_logs" in typed context  [no-untyped-call]
                        self._flush_logs()
                        ^~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In member "_flush_logs" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:213:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def _flush_logs(self):
        ^
app/utils/structlog_config.py:213:5: note: Use "-> None" if function does not return a value
app/utils/structlog_config.py: note: In member "shutdown" of class "SQLAlchemyLogHandler":
app/utils/structlog_config.py:256:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def shutdown(self):
        ^
app/utils/structlog_config.py:256:5: note: Use "-> None" if function does not return a value
app/utils/structlog_config.py:261:13: error: Call to untyped function
"_flush_logs" in typed context  [no-untyped-call]
                self._flush_logs()
                ^~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In member "__init__" of class "StructlogConfig":
app/utils/structlog_config.py:268:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __init__(self):
        ^
app/utils/structlog_config.py:268:5: note: Use "-> None" if function does not return a value
app/utils/structlog_config.py: note: In member "configure" of class "StructlogConfig":
app/utils/structlog_config.py:272:5: error: Function is missing a type
annotation  [no-untyped-def]
        def configure(self, app=None):
        ^
app/utils/structlog_config.py:295:17: error: Call to untyped function
"_get_handler" in typed context  [no-untyped-call]
                    self._get_handler(),
                    ^~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py:297:17: error: Call to untyped function
"_get_console_renderer" in typed context  [no-untyped-call]
                    self._get_console_renderer(),
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In member "_add_request_context" of class "StructlogConfig":
app/utils/structlog_config.py:309:5: error: Function is missing a type
annotation  [no-untyped-def]
        def _add_request_context(self, logger, method_name, event_dict):
        ^
app/utils/structlog_config.py: note: In member "_add_user_context" of class "StructlogConfig":
app/utils/structlog_config.py:316:5: error: Function is missing a type
annotation  [no-untyped-def]
        def _add_user_context(self, logger, method_name, event_dict):
        ^
app/utils/structlog_config.py: note: In member "_add_global_context" of class "StructlogConfig":
app/utils/structlog_config.py:323:5: error: Function is missing a type
annotation  [no-untyped-def]
        def _add_global_context(self, logger, method_name, event_dict):
        ^
app/utils/structlog_config.py: note: In member "_get_console_renderer" of class "StructlogConfig":
app/utils/structlog_config.py:344:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def _get_console_renderer(self):
        ^
app/utils/structlog_config.py: note: In member "_get_handler" of class "StructlogConfig":
app/utils/structlog_config.py:359:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def _get_handler(self):
        ^
app/utils/structlog_config.py: note: In member "shutdown" of class "StructlogConfig":
app/utils/structlog_config.py:365:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def shutdown(self):
        ^
app/utils/structlog_config.py:365:5: note: Use "-> None" if function does not return a value
app/utils/structlog_config.py: note: At top level:
app/utils/structlog_config.py:372:20: error: Call to untyped function
"StructlogConfig" in typed context  [no-untyped-call]
    structlog_config = StructlogConfig()
                       ^~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In function "get_logger":
app/utils/structlog_config.py:378:9: error: Call to untyped function
"configure" in typed context  [no-untyped-call]
            structlog_config.configure()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py:380:5: error: Returning Any from function
declared to return "BoundLogger"  [no-any-return]
        return structlog.get_logger(name)
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In function "configure_structlog":
app/utils/structlog_config.py:383:1: error: Function is missing a type
annotation  [no-untyped-def]
    def configure_structlog(app):
    ^
app/utils/structlog_config.py:385:5: error: Call to untyped function
"configure" in typed context  [no-untyped-call]
        structlog_config.configure(app)
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py:389:5: error: Function is missing a type
annotation  [no-untyped-def]
        def shutdown_logging(exception):
        ^
app/utils/structlog_config.py: note: In function "set_debug_logging_enabled":
app/utils/structlog_config.py:413:17: error: Call to untyped function
"_get_handler" in typed context  [no-untyped-call]
                    structlog_config._get_handler(),
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py:424:9: error: Call to untyped function
"configure" in typed context  [no-untyped-call]
            structlog_config.configure()
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/structlog_config.py: note: In function "log_info":
app/utils/structlog_config.py:438:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def log_info(message: str, module: str = "app", **kwargs):
    ^
app/utils/structlog_config.py:438:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def log_info(message: str, module: str = "app", **kwargs):
    ^
app/utils/structlog_config.py: note: In function "log_warning":
app/utils/structlog_config.py:444:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def log_warning(message: str, module: str = "app", exception: Exceptio...
    ^
app/utils/structlog_config.py:444:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def log_warning(message: str, module: str = "app", exception: Exceptio...
    ^
app/utils/structlog_config.py: note: In function "log_error":
app/utils/structlog_config.py:453:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def log_error(message: str, module: str = "app", exception: Exception ...
    ^
app/utils/structlog_config.py:453:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def log_error(message: str, module: str = "app", exception: Exception ...
    ^
app/utils/structlog_config.py: note: In function "log_critical":
app/utils/structlog_config.py:462:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def log_critical(message: str, module: str = "app", exception: Excepti...
    ^
app/utils/structlog_config.py:462:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def log_critical(message: str, module: str = "app", exception: Excepti...
    ^
app/utils/structlog_config.py: note: In function "log_debug":
app/utils/structlog_config.py:471:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def log_debug(message: str, module: str = "app", **kwargs):
    ^
app/utils/structlog_config.py:471:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def log_debug(message: str, module: str = "app", **kwargs):
    ^
app/utils/structlog_config.py: note: In function "bind_context":
app/utils/structlog_config.py:511:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    def bind_context(**kwargs) -> None:
    ^
app/utils/structlog_config.py: note: In member "__init__" of class "LogContext":
app/utils/structlog_config.py:545:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __init__(self, **kwargs):
        ^
app/utils/structlog_config.py: note: In member "__enter__" of class "LogContext":
app/utils/structlog_config.py:549:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __enter__(self):
        ^
app/utils/structlog_config.py: note: In member "__exit__" of class "LogContext":
app/utils/structlog_config.py:555:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __exit__(self, exc_type, exc_val, exc_tb):
        ^
app/utils/structlog_config.py: note: In function "with_log_context":
app/utils/structlog_config.py:562:1: error: Function is missing a type
annotation  [no-untyped-def]
    def with_log_context(**context):
    ^
app/utils/structlog_config.py:565:5: error: Function is missing a type
annotation  [no-untyped-def]
        def decorator(func):
        ^
app/utils/structlog_config.py:566:9: error: Function is missing a type
annotation  [no-untyped-def]
            def wrapper(*args, **kwargs):
            ^
app/utils/structlog_config.py:567:18: error: Call to untyped function
"LogContext" in typed context  [no-untyped-call]
                with LogContext(**context):
                     ^~~~~~~~~~~~~~~~~~~~~
app/models/current_account_sync_data.py: note: In member "to_dict" of class "CurrentAccountSyncData":
app/models/current_account_sync_data.py:65:26: error: Missing type parameters
for generic type "dict"  [type-arg]
        def to_dict(self) -> dict:
                             ^
app/models/current_account_sync_data.py: note: In member "get_permissions_by_db_type" of class "CurrentAccountSyncData":
app/models/current_account_sync_data.py:95:45: error: Missing type parameters
for generic type "dict"  [type-arg]
        def get_permissions_by_db_type(self) -> dict:
                                                ^
app/utils/rate_limiter.py: note: In member "__init__" of class "RateLimiter":
app/utils/rate_limiter.py:17:5: error: Function is missing a type annotation 
[no-untyped-def]
        def __init__(self, redis_client=None):
        ^
app/utils/rate_limiter.py: note: In member "is_allowed" of class "RateLimiter":
app/utils/rate_limiter.py:29:96: error: Function "builtins.any" is not valid as
a type  [valid-type]
    ...ifier: str, endpoint: str, limit: int, window: int) -> dict[str, any]:
                                                                        ^
app/utils/rate_limiter.py:29:96: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/rate_limiter.py: note: In member "_check_redis" of class "RateLimiter":
app/utils/rate_limiter.py:68:20: error: Function "builtins.any" is not valid as
a type  [valid-type]
        ) -> dict[str, any]:
                       ^
app/utils/rate_limiter.py:68:20: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/rate_limiter.py: note: In member "_check_memory" of class "RateLimiter":
app/utils/rate_limiter.py:111:20: error: Function "builtins.any" is not valid
as a type  [valid-type]
        ) -> dict[str, any]:
                       ^
app/utils/rate_limiter.py:111:20: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/rate_limiter.py: note: In member "reset" of class "RateLimiter":
app/utils/rate_limiter.py:151:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def reset(self, identifier: str, endpoint: str):
        ^
app/utils/rate_limiter.py: note: At top level:
app/utils/rate_limiter.py:171:16: error: Call to untyped function "RateLimiter"
in typed context  [no-untyped-call]
    rate_limiter = RateLimiter()
                   ^~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "rate_limit":
app/utils/rate_limiter.py:174:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def rate_limit(
    ^
app/utils/rate_limiter.py:178:22: error: Missing type parameters for generic
type "Callable"  [type-arg]
        identifier_func: Callable | None = None,
                         ^
app/utils/rate_limiter.py:190:5: error: Function is missing a type annotation 
[no-untyped-def]
        def rate_limit_decorator(f):
        ^
app/utils/rate_limiter.py:192:9: error: Function is missing a type annotation 
[no-untyped-def]
            def decorated_function(*args, **kwargs):
            ^
app/utils/rate_limiter.py: note: At top level:
app/utils/rate_limiter.py:197:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
                    from flask_login import current_user
    ^
app/utils/rate_limiter.py: note: In function "rate_limit":
app/utils/rate_limiter.py:207:17: error: Statement is unreachable 
[unreachable]
                    response = jsonify(
                    ^
app/utils/rate_limiter.py: note: In function "login_rate_limit":
app/utils/rate_limiter.py:235:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def login_rate_limit(func=None, *, limit: int = None, window: int = No...
    ^
app/utils/rate_limiter.py:235:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def login_rate_limit(func=None, *, limit: int = None, window: int = No...
    ^
app/utils/rate_limiter.py:235:49: error: Incompatible default for argument
"limit" (default has type "None", argument has type "int")  [assignment]
    def login_rate_limit(func=None, *, limit: int = None, window: int = No...
                                                    ^~~~
app/utils/rate_limiter.py:235:49: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/rate_limiter.py:235:49: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/rate_limiter.py:235:69: error: Incompatible default for argument
"window" (default has type "None", argument has type "int")  [assignment]
    ...login_rate_limit(func=None, *, limit: int = None, window: int = None):
                                                                       ^~~~
app/utils/rate_limiter.py:240:9: error: Statement is unreachable  [unreachable]
            limit = SystemConstants.LOGIN_RATE_LIMIT
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py:242:9: error: Statement is unreachable  [unreachable]
            window = SystemConstants.LOGIN_RATE_WINDOW
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "api_rate_limit":
app/utils/rate_limiter.py:248:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def api_rate_limit(func=None, *, limit: int = None, window: int = None...
    ^
app/utils/rate_limiter.py:248:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def api_rate_limit(func=None, *, limit: int = None, window: int = None...
    ^
app/utils/rate_limiter.py:248:47: error: Incompatible default for argument
"limit" (default has type "None", argument has type "int")  [assignment]
    def api_rate_limit(func=None, *, limit: int = None, window: int = None...
                                                  ^~~~
app/utils/rate_limiter.py:248:47: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/rate_limiter.py:248:47: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/rate_limiter.py:248:67: error: Incompatible default for argument
"window" (default has type "None", argument has type "int")  [assignment]
    ...f api_rate_limit(func=None, *, limit: int = None, window: int = None):
                                                                       ^~~~
app/utils/rate_limiter.py:253:9: error: Statement is unreachable  [unreachable]
            limit = SystemConstants.RATE_LIMIT_REQUESTS
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py:255:9: error: Statement is unreachable  [unreachable]
            window = SystemConstants.RATE_LIMIT_WINDOW
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "password_reset_rate_limit":
app/utils/rate_limiter.py:261:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def password_reset_rate_limit(func=None, *, limit: int = None, window:...
    ^
app/utils/rate_limiter.py:261:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def password_reset_rate_limit(func=None, *, limit: int = None, window:...
    ^
app/utils/rate_limiter.py:261:58: error: Incompatible default for argument
"limit" (default has type "None", argument has type "int")  [assignment]
    ...word_reset_rate_limit(func=None, *, limit: int = None, window: int = N...
                                                        ^~~~
app/utils/rate_limiter.py:261:58: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/rate_limiter.py:261:58: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/rate_limiter.py:261:78: error: Incompatible default for argument
"window" (default has type "None", argument has type "int")  [assignment]
    ...reset_rate_limit(func=None, *, limit: int = None, window: int = None):
                                                                       ^~~~
app/utils/rate_limiter.py:265:9: error: Statement is unreachable  [unreachable]
            limit = 3  # 密码重置限制
            ^~~~~~~~~
app/utils/rate_limiter.py:267:9: error: Statement is unreachable  [unreachable]
            window = SystemConstants.SESSION_LIFETIME  # 1小时
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "registration_rate_limit":
app/utils/rate_limiter.py:274:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def registration_rate_limit(func=None, *, limit: int = None, window: i...
    ^
app/utils/rate_limiter.py:274:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def registration_rate_limit(func=None, *, limit: int = None, window: i...
    ^
app/utils/rate_limiter.py:274:56: error: Incompatible default for argument
"limit" (default has type "None", argument has type "int")  [assignment]
    ...gistration_rate_limit(func=None, *, limit: int = None, window: int = N...
                                                        ^~~~
app/utils/rate_limiter.py:274:56: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/rate_limiter.py:274:56: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/rate_limiter.py:274:76: error: Incompatible default for argument
"window" (default has type "None", argument has type "int")  [assignment]
    ...ation_rate_limit(func=None, *, limit: int = None, window: int = None):
                                                                       ^~~~
app/utils/rate_limiter.py:278:9: error: Statement is unreachable  [unreachable]
            limit = 3  # 注册限制
            ^~~~~~~~~
app/utils/rate_limiter.py:280:9: error: Statement is unreachable  [unreachable]
            window = SystemConstants.SESSION_LIFETIME  # 1小时
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "task_execution_rate_limit":
app/utils/rate_limiter.py:287:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def task_execution_rate_limit(func=None, *, limit: int = 10, window: i...
    ^
app/utils/rate_limiter.py:287:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def task_execution_rate_limit(func=None, *, limit: int = 10, window: i...
    ^
app/utils/rate_limiter.py: note: In function "init_rate_limiter":
app/utils/rate_limiter.py:295:1: error: Function is missing a type annotation 
[no-untyped-def]
    def init_rate_limiter(redis_client=None):
    ^
app/utils/rate_limiter.py:298:20: error: Call to untyped function "RateLimiter"
in typed context  [no-untyped-call]
        rate_limiter = RateLimiter(redis_client)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/rate_limiter.py: note: In function "get_rate_limit_status":
app/utils/rate_limiter.py:304:97: error: Function "builtins.any" is not valid
as a type  [valid-type]
    ...ifier: str, endpoint: str, limit: int, window: int) -> dict[str, any]:
                                                                        ^
app/utils/rate_limiter.py:304:97: note: Perhaps you meant "typing.Any" instead of "any"?
app/utils/rate_limiter.py: note: In function "cleanup_rate_limits":
app/utils/rate_limiter.py:310:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def cleanup_rate_limits():
    ^
app/utils/rate_limiter.py:310:1: note: Use "-> None" if function does not return a value
app/utils/error_handler.py: note: In function "register_error_handlers":
app/utils/error_handler.py:14:1: error: Function is missing a type annotation 
[no-untyped-def]
    def register_error_handlers(app):
    ^
app/utils/error_handler.py:23:5: error: Function is missing a type annotation 
[no-untyped-def]
        def bad_request(error):
        ^
app/utils/error_handler.py:25:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 400, "请求参数错误")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:28:5: error: Function is missing a type annotation 
[no-untyped-def]
        def unauthorized(error):
        ^
app/utils/error_handler.py:30:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 401, "未授权访问")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:33:5: error: Function is missing a type annotation 
[no-untyped-def]
        def forbidden(error):
        ^
app/utils/error_handler.py:35:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 403, "禁止访问")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:38:5: error: Function is missing a type annotation 
[no-untyped-def]
        def not_found(error):
        ^
app/utils/error_handler.py:40:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 404, "页面不存在")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:43:5: error: Function is missing a type annotation 
[no-untyped-def]
        def too_many_requests(error):
        ^
app/utils/error_handler.py:45:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 429, "请求过于频繁")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:48:5: error: Function is missing a type annotation 
[no-untyped-def]
        def internal_server_error(error):
        ^
app/utils/error_handler.py:50:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 500, "服务器内部错误")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:53:5: error: Function is missing a type annotation 
[no-untyped-def]
        def handle_sqlalchemy_error(error):
        ^
app/utils/error_handler.py:62:20: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
                return _handle_error(error, 503, "数据库连接失败，请稍后重试")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:64:20: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
                return _handle_error(error, 400, "数据约束错误，请检查输入数据")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:66:20: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
                return _handle_error(error, 504, "数据库操作超时，请稍后重试")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:67:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 500, "数据库操作错误")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:70:5: error: Function is missing a type annotation 
[no-untyped-def]
        def handle_generic_error(error):
        ^
app/utils/error_handler.py:75:16: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
            return _handle_error(error, 500, "系统错误")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py: note: In function "_handle_error":
app/utils/error_handler.py:78:1: error: Function is missing a type annotation 
[no-untyped-def]
    def _handle_error(error, status_code, message):
    ^
app/utils/error_handler.py:91:5: error: Call to untyped function "_log_error"
in typed context  [no-untyped-call]
        _log_error(error, status_code)
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py:100:34: error: Call to untyped function
"_get_timestamp" in typed context  [no-untyped-call]
                        "timestamp": _get_timestamp(),
                                     ^~~~~~~~~~~~~~~~
app/utils/error_handler.py: note: In function "_log_error":
app/utils/error_handler.py:111:1: error: Function is missing a type annotation 
[no-untyped-def]
    def _log_error(error, status_code):
    ^
app/utils/error_handler.py: note: In function "_get_timestamp":
app/utils/error_handler.py:153:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def _get_timestamp():
    ^
app/utils/error_handler.py: note: In function "safe_error_message":
app/utils/error_handler.py:164:1: error: Function is missing a type annotation 
[no-untyped-def]
    def safe_error_message(error):
    ^
app/utils/error_handler.py: note: In function "validate_error_response":
app/utils/error_handler.py:182:1: error: Function is missing a type annotation 
[no-untyped-def]
    def validate_error_response(response_data):
    ^
app/utils/error_handler.py: note: In function "handle_security_error":
app/utils/error_handler.py:208:1: error: Function is missing a type annotation 
[no-untyped-def]
    def handle_security_error(error):
    ^
app/utils/error_handler.py:220:12: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
        return _handle_error(error, 403, "安全验证失败")
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py: note: In function "handle_validation_error":
app/utils/error_handler.py:223:1: error: Function is missing a type annotation 
[no-untyped-def]
    def handle_validation_error(error):
    ^
app/utils/error_handler.py:235:12: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
        return _handle_error(error, 400, str(error))
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/error_handler.py: note: In function "handle_business_logic_error":
app/utils/error_handler.py:238:1: error: Function is missing a type annotation 
[no-untyped-def]
    def handle_business_logic_error(error):
    ^
app/utils/error_handler.py:250:12: error: Call to untyped function
"_handle_error" in typed context  [no-untyped-call]
        return _handle_error(error, 422, str(error))
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/decorators.py:8:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user
    ^
app/utils/decorators.py: note: In function "admin_required":
app/utils/decorators.py:13:1: error: Function is missing a type annotation 
[no-untyped-def]
    def admin_required(f):
    ^
app/utils/decorators.py:25:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorated_function(*args, **kwargs):
        ^
app/utils/decorators.py: note: In function "scheduler_manage_required":
app/utils/decorators.py:102:1: error: Function is missing a type annotation 
[no-untyped-def]
    def scheduler_manage_required(f):
    ^
app/utils/decorators.py:115:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorated_function(*args, **kwargs):
        ^
app/utils/decorators.py: note: In function "scheduler_view_required":
app/utils/decorators.py:192:1: error: Function is missing a type annotation 
[no-untyped-def]
    def scheduler_view_required(f):
    ^
app/utils/decorators.py:205:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorated_function(*args, **kwargs):
        ^
app/utils/decorators.py: note: In function "login_required":
app/utils/decorators.py:252:1: error: Function is missing a type annotation 
[no-untyped-def]
    def login_required(f):
    ^
app/utils/decorators.py:264:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorated_function(*args, **kwargs):
        ^
app/utils/decorators.py: note: In function "login_required_json":
app/utils/decorators.py:311:1: error: Function is missing a type annotation 
[no-untyped-def]
    def login_required_json(f):
    ^
app/utils/decorators.py:323:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorated_function(*args, **kwargs):
        ^
app/utils/decorators.py: note: In function "rate_limit":
app/utils/decorators.py:335:1: error: Function is missing a type annotation 
[no-untyped-def]
    def rate_limit(requests_per_minute=60):
    ^
app/utils/decorators.py:346:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorator(f):
        ^
app/utils/decorators.py:348:9: error: Function is missing a type annotation 
[no-untyped-def]
            def decorated_function(*args, **kwargs):
            ^
app/utils/decorators.py: note: In function "validate_json":
app/utils/decorators.py:358:1: error: Function is missing a type annotation 
[no-untyped-def]
    def validate_json(required_fields=None):
    ^
app/utils/decorators.py:369:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorator(f):
        ^
app/utils/decorators.py:371:9: error: Function is missing a type annotation 
[no-untyped-def]
            def decorated_function(*args, **kwargs):
            ^
app/utils/decorators.py: note: In function "permission_required":
app/utils/decorators.py:418:1: error: Function is missing a type annotation 
[no-untyped-def]
    def permission_required(permission):
    ^
app/utils/decorators.py:429:5: error: Function is missing a type annotation 
[no-untyped-def]
        def decorator(f):
        ^
app/utils/decorators.py:431:9: error: Function is missing a type annotation 
[no-untyped-def]
            def decorated_function(*args, **kwargs):
            ^
app/utils/decorators.py:463:20: error: Call to untyped function
"has_permission" in typed context  [no-untyped-call]
                if not has_permission(current_user, permission):
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/decorators.py: note: In function "has_permission":
app/utils/decorators.py:511:1: error: Function is missing a type annotation 
[no-untyped-def]
    def has_permission(user, permission):
    ^
app/utils/decorators.py: note: In function "view_required":
app/utils/decorators.py:542:1: error: Function is missing a type annotation 
[no-untyped-def]
    def view_required(f):
    ^
app/utils/decorators.py:544:12: error: Call to untyped function
"permission_required" in typed context  [no-untyped-call]
        return permission_required("view")(f)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/decorators.py: note: In function "create_required":
app/utils/decorators.py:547:1: error: Function is missing a type annotation 
[no-untyped-def]
    def create_required(f):
    ^
app/utils/decorators.py:549:12: error: Call to untyped function
"permission_required" in typed context  [no-untyped-call]
        return permission_required("create")(f)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/decorators.py: note: In function "update_required":
app/utils/decorators.py:552:1: error: Function is missing a type annotation 
[no-untyped-def]
    def update_required(f):
    ^
app/utils/decorators.py:554:12: error: Call to untyped function
"permission_required" in typed context  [no-untyped-call]
        return permission_required("update")(f)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/decorators.py: note: In function "delete_required":
app/utils/decorators.py:557:1: error: Function is missing a type annotation 
[no-untyped-def]
    def delete_required(f):
    ^
app/utils/decorators.py:559:12: error: Call to untyped function
"permission_required" in typed context  [no-untyped-call]
        return permission_required("delete")(f)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In member "_generate_key" of class "CacheManager":
app/utils/cache_manager.py:24:5: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
        def _generate_key(self, prefix: str, *args, **kwargs) -> str:
        ^
app/utils/cache_manager.py: note: In member "get_or_set" of class "CacheManager":
app/utils/cache_manager.py:71:5: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
        def get_or_set(self, key: str, func: Callable, timeout: int | None...
        ^
app/utils/cache_manager.py:71:42: error: Missing type parameters for generic
type "Callable"  [type-arg]
        def get_or_set(self, key: str, func: Callable, timeout: int | None...
                                             ^
app/utils/cache_manager.py: note: In member "invalidate_pattern" of class "CacheManager":
app/utils/cache_manager.py:85:17: error: Returning Any from function declared
to return "int"  [no-any-return]
                    return self.cache.cache.delete_pattern(pattern)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "cached":
app/utils/cache_manager.py:108:13: error: Missing type parameters for generic
type "Callable"  [type-arg]
        unless: Callable | None = None,
                ^
app/utils/cache_manager.py:109:15: error: Missing type parameters for generic
type "Callable"  [type-arg]
        key_func: Callable | None = None,
                  ^
app/utils/cache_manager.py:110:6: error: Missing type parameters for generic
type "Callable"  [type-arg]
    ) -> Callable:
         ^
app/utils/cache_manager.py:121:28: error: Missing type parameters for generic
type "Callable"  [type-arg]
        def cache_decorator(f: Callable) -> Callable:
                               ^
app/utils/cache_manager.py:132:29: error: Item "None" of "CacheManager | None"
has no attribute "_generate_key"  [union-attr]
                    cache_key = cache_manager._generate_key(f"{key_prefix}...
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py:135:28: error: Item "None" of "CacheManager | None"
has no attribute "get"  [union-attr]
                cached_value = cache_manager.get(cache_key)
                               ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py:143:13: error: Item "None" of "CacheManager | None"
has no attribute "set"  [union-attr]
                cache_manager.set(cache_key, result, timeout)
                ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "cache_invalidate":
app/utils/cache_manager.py:154:39: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def cache_invalidate(pattern: str) -> Callable:
                                          ^
app/utils/cache_manager.py:157:28: error: Missing type parameters for generic
type "Callable"  [type-arg]
        def cache_decorator(f: Callable) -> Callable:
                               ^
app/utils/cache_manager.py:161:13: error: Item "None" of "CacheManager | None"
has no attribute "invalidate_pattern"  [union-attr]
                cache_manager.invalidate_pattern(pattern)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "user_cache":
app/utils/cache_manager.py:172:39: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def user_cache(timeout: int = 600) -> Callable:
                                          ^
app/utils/cache_manager.py: note: In function "instance_cache":
app/utils/cache_manager.py:177:43: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def instance_cache(timeout: int = 300) -> Callable:
                                              ^
app/utils/cache_manager.py: note: In function "task_cache":
app/utils/cache_manager.py:182:39: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def task_cache(timeout: int = 180) -> Callable:
                                          ^
app/utils/cache_manager.py: note: In function "dashboard_cache":
app/utils/cache_manager.py:187:43: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def dashboard_cache(timeout: int = 60) -> Callable:
                                              ^
app/utils/cache_manager.py: note: In function "api_cache":
app/utils/cache_manager.py:192:38: error: Missing type parameters for generic
type "Callable"  [type-arg]
    def api_cache(timeout: int = 300) -> Callable:
                                         ^
app/utils/cache_manager.py: note: In function "user_key_func":
app/utils/cache_manager.py:198:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def user_key_func(user_id: int, *args, **kwargs) -> str:
    ^
app/utils/cache_manager.py: note: In function "instance_key_func":
app/utils/cache_manager.py:203:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def instance_key_func(instance_id: int, *args, **kwargs) -> str:
    ^
app/utils/cache_manager.py: note: In function "task_key_func":
app/utils/cache_manager.py:208:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def task_key_func(task_id: int, *args, **kwargs) -> str:
    ^
app/utils/cache_manager.py: note: In function "dashboard_key_func":
app/utils/cache_manager.py:213:1: error: Function is missing a type annotation
for one or more arguments  [no-untyped-def]
    def dashboard_key_func(*args, **kwargs) -> str:
    ^
app/utils/cache_manager.py: note: At top level:
app/utils/cache_manager.py:215:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
        from flask_login import current_user
    ^
app/utils/cache_manager.py: note: In function "cache_dashboard_data":
app/utils/cache_manager.py:224:5: error: Item "None" of "CacheManager | None"
has no attribute "set"  [union-attr]
        cache_manager.set("dashboard_data", data, timeout)
        ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "get_cached_dashboard_data":
app/utils/cache_manager.py:229:12: error: Item "None" of "CacheManager | None"
has no attribute "get"  [union-attr]
        return cache_manager.get("dashboard_data")
               ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "invalidate_dashboard_cache":
app/utils/cache_manager.py:234:5: error: Item "None" of "CacheManager | None"
has no attribute "delete"  [union-attr]
        cache_manager.delete("dashboard_data")
        ^~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "clear_user_cache":
app/utils/cache_manager.py:240:5: error: Item "None" of "CacheManager | None"
has no attribute "invalidate_pattern"  [union-attr]
        cache_manager.invalidate_pattern(f"user:{user_id}*")
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "clear_instance_cache":
app/utils/cache_manager.py:245:5: error: Item "None" of "CacheManager | None"
has no attribute "invalidate_pattern"  [union-attr]
        cache_manager.invalidate_pattern(f"instance:{instance_id}*")
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "clear_task_cache":
app/utils/cache_manager.py:250:5: error: Item "None" of "CacheManager | None"
has no attribute "invalidate_pattern"  [union-attr]
        cache_manager.invalidate_pattern(f"task:{task_id}*")
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "clear_dashboard_cache":
app/utils/cache_manager.py:255:5: error: Item "None" of "CacheManager | None"
has no attribute "invalidate_pattern"  [union-attr]
        cache_manager.invalidate_pattern("dashboard:*")
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "clear_all_cache":
app/utils/cache_manager.py:260:5: error: Item "None" of "CacheManager | None"
has no attribute "clear"  [union-attr]
        cache_manager.clear()
        ^~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "get_cache_stats":
app/utils/cache_manager.py:267:20: error: Item "None" of "CacheManager | None"
has no attribute "cache"  [union-attr]
            if hasattr(cache_manager.cache.cache, "info"):
                       ^~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py:268:20: error: Item "None" of "CacheManager | None"
has no attribute "cache"  [union-attr]
                info = cache_manager.cache.cache.info()
                       ^~~~~~~~~~~~~~~~~~~
app/utils/cache_manager.py: note: In function "warm_up_cache":
app/utils/cache_manager.py:286:13: error: Item "None" of "CacheManager | None"
has no attribute "set"  [union-attr]
                cache_manager.set(f"user:{user.id}", user.to_dict(), 600)
                ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py:291:13: error: Item "None" of "CacheManager | None"
has no attribute "set"  [union-attr]
                cache_manager.set(f"instance:{instance.id}", instance.to_d...
                ^~~~~~~~~~~~~~~~~
app/utils/cache_manager.py:296:13: error: Item "None" of "CacheManager | None"
has no attribute "set"  [union-attr]
                cache_manager.set(f"task:{task.id}", task.to_dict(), 180)
                ^~~~~~~~~~~~~~~~~
app/services/sync_session_service.py: note: In member "__init__" of class "SyncSessionService":
app/services/sync_session_service.py:19:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def __init__(self):
        ^
app/services/sync_session_service.py:19:5: note: Use "-> None" if function does not return a value
app/services/sync_session_service.py: note: In member "create_session" of class "SyncSessionService":
app/services/sync_session_service.py:23:96: error: Incompatible default for
argument "created_by" (default has type "None", argument has type "int") 
[assignment]
    ...ync_category: str = "account", created_by: int = None) -> SyncSession:
                                                        ^~~~
app/services/sync_session_service.py:23:96: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_session_service.py:23:96: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_session_service.py: note: In member "complete_instance_sync" of class "SyncSessionService":
app/services/sync_session_service.py:153:40: error: Incompatible default for
argument "sync_details" (default has type "None", argument has type
"dict[str, Any]")  [assignment]
            sync_details: dict[str, Any] = None,
                                           ^~~~
app/services/sync_session_service.py:153:40: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_session_service.py:153:40: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_session_service.py: note: In member "fail_instance_sync" of class "SyncSessionService":
app/services/sync_session_service.py:209:101: error: Incompatible default for
argument "sync_details" (default has type "None", argument has type
"dict[str, Any]")  [assignment]
    ...int, error_message: str, sync_details: dict[str, Any] = None) -> bool:
                                                               ^~~~
app/services/sync_session_service.py:209:101: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_session_service.py:209:101: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_session_service.py: note: In member "_update_session_statistics" of class "SyncSessionService":
app/services/sync_session_service.py:252:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _update_session_statistics(self, session_id: str):
        ^
app/services/sync_session_service.py: note: In member "get_session_records" of class "SyncSessionService":
app/services/sync_session_service.py:277:9: error: Returning Any from function
declared to return "list[SyncInstanceRecord]"  [no-any-return]
            return SyncInstanceRecord.get_records_by_session(session_id)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/sync_session_service.py: note: In member "get_session_by_id" of class "SyncSessionService":
app/services/sync_session_service.py:289:9: error: Returning Any from function
declared to return "SyncSession | None"  [no-any-return]
            return SyncSession.query.filter_by(session_id=session_id).firs...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/sync_session_service.py: note: In member "get_sessions_by_type" of class "SyncSessionService":
app/services/sync_session_service.py:302:9: error: Returning Any from function
declared to return "list[SyncSession]"  [no-any-return]
            return SyncSession.get_sessions_by_type(sync_type, limit)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/sync_session_service.py: note: In member "get_sessions_by_category" of class "SyncSessionService":
app/services/sync_session_service.py:315:9: error: Returning Any from function
declared to return "list[SyncSession]"  [no-any-return]
            return SyncSession.get_sessions_by_category(sync_category, lim...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/sync_session_service.py: note: In member "get_recent_sessions" of class "SyncSessionService":
app/services/sync_session_service.py:327:9: error: Returning Any from function
declared to return "list[SyncSession]"  [no-any-return]
            return SyncSession.query.order_by(SyncSession.created_at.desc(...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/sync_session_service.py: note: At top level:
app/services/sync_session_service.py:365:24: error: Call to untyped function
"SyncSessionService" in typed context  [no-untyped-call]
    sync_session_service = SyncSessionService()
                           ^~~~~~~~~~~~~~~~~~~~
app/services/sync_data_manager.py: note: In member "__init__" of class "SyncDataManager":
app/services/sync_data_manager.py:16:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def __init__(self):
        ^
app/services/sync_data_manager.py:16:5: note: Use "-> None" if function does not return a value
app/services/sync_data_manager.py: note: In member "sync_mysql_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:19:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def sync_mysql_accounts(self, instance, conn, session_id: str) -> ...
        ^
app/services/sync_data_manager.py:19:71: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...ef sync_mysql_accounts(self, instance, conn, session_id: str) -> dict:
                                                                        ^
app/services/sync_data_manager.py: note: In member "sync_postgresql_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:59:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def sync_postgresql_accounts(self, instance, conn, session_id: str...
        ^
app/services/sync_data_manager.py:59:76: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...nc_postgresql_accounts(self, instance, conn, session_id: str) -> dict:
                                                                        ^
app/services/sync_data_manager.py: note: In member "sync_sqlserver_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:101:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def sync_sqlserver_accounts(self, instance, conn, session_id: str)...
        ^
app/services/sync_data_manager.py:101:75: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...ync_sqlserver_accounts(self, instance, conn, session_id: str) -> dict:
                                                                        ^
app/services/sync_data_manager.py: note: In member "sync_oracle_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:143:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def sync_oracle_accounts(self, instance, conn, session_id: str) ->...
        ^
app/services/sync_data_manager.py:143:72: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...f sync_oracle_accounts(self, instance, conn, session_id: str) -> dict:
                                                                        ^
app/services/sync_data_manager.py: note: In member "_get_mysql_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:182:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_mysql_accounts(self, conn) -> list:
        ^
app/services/sync_data_manager.py:182:44: error: Missing type parameters for
generic type "list"  [type-arg]
        def _get_mysql_accounts(self, conn) -> list:
                                               ^
app/services/sync_data_manager.py:216:17: error: Need type annotation for
"database_privileges" (hint: "database_privileges: dict[<type>, <type>] = ...") 
[var-annotated]
                    database_privileges = {}
                    ^~~~~~~~~~~~~~~~~~~
app/services/sync_data_manager.py: note: In member "_get_postgresql_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:259:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_postgresql_accounts(self, conn) -> list:
        ^
app/services/sync_data_manager.py:259:49: error: Missing type parameters for
generic type "list"  [type-arg]
        def _get_postgresql_accounts(self, conn) -> list:
                                                    ^
app/services/sync_data_manager.py: note: In member "_get_sqlserver_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:308:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_sqlserver_accounts(self, conn) -> list:
        ^
app/services/sync_data_manager.py:308:48: error: Missing type parameters for
generic type "list"  [type-arg]
        def _get_sqlserver_accounts(self, conn) -> list:
                                                   ^
app/services/sync_data_manager.py: note: In member "_get_sqlserver_server_roles" of class "SyncDataManager":
app/services/sync_data_manager.py:365:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_sqlserver_server_roles(self, conn, username: str) -> list...
        ^
app/services/sync_data_manager.py:365:67: error: Missing type parameters for
generic type "list"  [type-arg]
    ...   def _get_sqlserver_server_roles(self, conn, username: str) -> list:
                                                                        ^
app/services/sync_data_manager.py: note: In member "_get_sqlserver_server_permissions" of class "SyncDataManager":
app/services/sync_data_manager.py:381:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_sqlserver_server_permissions(self, conn, username: str) -...
        ^
app/services/sync_data_manager.py:381:73: error: Missing type parameters for
generic type "list"  [type-arg]
    ... _get_sqlserver_server_permissions(self, conn, username: str) -> list:
                                                                        ^
app/services/sync_data_manager.py: note: In member "_get_sqlserver_database_permissions" of class "SyncDataManager":
app/services/sync_data_manager.py:400:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_sqlserver_database_permissions(self, conn, username: str)...
        ^
app/services/sync_data_manager.py:400:75: error: Missing type parameters for
generic type "tuple"  [type-arg]
    ...et_sqlserver_database_permissions(self, conn, username: str) -> tuple:
                                                                       ^
app/services/sync_data_manager.py: note: In member "_get_oracle_accounts" of class "SyncDataManager":
app/services/sync_data_manager.py:455:5: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
        def _get_oracle_accounts(self, conn) -> list:
        ^
app/services/sync_data_manager.py:455:45: error: Missing type parameters for
generic type "list"  [type-arg]
        def _get_oracle_accounts(self, conn) -> list:
                                                ^
app/services/sync_data_manager.py: note: In member "get_account_latest" of class "SyncDataManager":
app/services/sync_data_manager.py:505:25: error: Incompatible default for
argument "username" (default has type "None", argument has type "str") 
[assignment]
            username: str = None,
                            ^~~~
app/services/sync_data_manager.py:505:25: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:505:25: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py:514:9: error: Returning Any from function
declared to return "CurrentAccountSyncData | None"  [no-any-return]
            return query.first()
            ^~~~~~~~~~~~~~~~~~~~
app/services/sync_data_manager.py: note: In member "get_accounts_by_instance" of class "SyncDataManager":
app/services/sync_data_manager.py:522:9: error: Returning Any from function
declared to return "list[CurrentAccountSyncData]"  [no-any-return]
            return query.all()
            ^~~~~~~~~~~~~~~~~~
app/services/sync_data_manager.py: note: In member "get_account_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:527:9: error: Returning Any from function
declared to return "list[AccountChangeLog]"  [no-any-return]
            return (
            ^
app/services/sync_data_manager.py: note: In member "upsert_account" of class "SyncDataManager":
app/services/sync_data_manager.py:539:27: error: Missing type parameters for
generic type "dict"  [type-arg]
            permissions_data: dict,
                              ^
app/services/sync_data_manager.py:541:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:541:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:541:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "_upsert_mysql_account" of class "SyncDataManager":
app/services/sync_data_manager.py:560:27: error: Missing type parameters for
generic type "dict"  [type-arg]
            permissions_data: dict,
                              ^
app/services/sync_data_manager.py:562:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:562:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:562:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "_upsert_postgresql_account" of class "SyncDataManager":
app/services/sync_data_manager.py:595:27: error: Missing type parameters for
generic type "dict"  [type-arg]
            permissions_data: dict,
                              ^
app/services/sync_data_manager.py:597:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:597:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:597:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "_upsert_sqlserver_account" of class "SyncDataManager":
app/services/sync_data_manager.py:632:27: error: Missing type parameters for
generic type "dict"  [type-arg]
            permissions_data: dict,
                              ^
app/services/sync_data_manager.py:634:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:634:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:634:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "_upsert_oracle_account" of class "SyncDataManager":
app/services/sync_data_manager.py:669:27: error: Missing type parameters for
generic type "dict"  [type-arg]
            permissions_data: dict,
                              ^
app/services/sync_data_manager.py:671:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:671:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:671:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "_detect_mysql_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:701:86: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...(cls, account: CurrentAccountSyncData, new_permissions: dict) -> dict:
                                                               ^
app/services/sync_data_manager.py:719:17: error: Dict entry 0 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "added": {
                    ^
app/services/sync_data_manager.py:722:17: error: Dict entry 1 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "removed": {
                    ^
app/services/sync_data_manager.py: note: In member "_detect_postgresql_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:732:91: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...(cls, account: CurrentAccountSyncData, new_permissions: dict) -> dict:
                                                               ^
app/services/sync_data_manager.py:759:17: error: Dict entry 0 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "added": {
                    ^
app/services/sync_data_manager.py:762:17: error: Dict entry 1 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "removed": {
                    ^
app/services/sync_data_manager.py: note: In member "_detect_sqlserver_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:772:90: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...(cls, account: CurrentAccountSyncData, new_permissions: dict) -> dict:
                                                               ^
app/services/sync_data_manager.py:799:17: error: Dict entry 0 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "added": {
                    ^
app/services/sync_data_manager.py:802:17: error: Dict entry 1 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "removed": {
                    ^
app/services/sync_data_manager.py:814:17: error: Dict entry 0 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "added": {
                    ^
app/services/sync_data_manager.py:817:17: error: Dict entry 1 has incompatible
type "str": "dict[Any, Any]"; expected "str": "list[Any]"  [dict-item]
                    "removed": {
                    ^
app/services/sync_data_manager.py: note: In member "_detect_oracle_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:827:87: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...(cls, account: CurrentAccountSyncData, new_permissions: dict) -> dict:
                                                               ^
app/services/sync_data_manager.py: note: In member "_update_mysql_account" of class "SyncDataManager":
app/services/sync_data_manager.py:861:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _update_mysql_account(cls, account: CurrentAccountSyncData, pe...
        ^
app/services/sync_data_manager.py:861:87: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...count: CurrentAccountSyncData, permissions_data: dict, is_superuser: b...
                                                        ^
app/services/sync_data_manager.py: note: In member "_update_postgresql_account" of class "SyncDataManager":
app/services/sync_data_manager.py:873:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _update_postgresql_account(cls, account: CurrentAccountSyncDat...
        ^
app/services/sync_data_manager.py:873:92: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...count: CurrentAccountSyncData, permissions_data: dict, is_superuser: b...
                                                        ^
app/services/sync_data_manager.py: note: In member "_update_sqlserver_account" of class "SyncDataManager":
app/services/sync_data_manager.py:887:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _update_sqlserver_account(cls, account: CurrentAccountSyncData...
        ^
app/services/sync_data_manager.py:887:91: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...count: CurrentAccountSyncData, permissions_data: dict, is_superuser: b...
                                                        ^
app/services/sync_data_manager.py: note: In member "_update_oracle_account" of class "SyncDataManager":
app/services/sync_data_manager.py:901:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _update_oracle_account(cls, account: CurrentAccountSyncData, p...
        ^
app/services/sync_data_manager.py:901:88: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...count: CurrentAccountSyncData, permissions_data: dict, is_superuser: b...
                                                        ^
app/services/sync_data_manager.py: note: In member "_log_changes" of class "SyncDataManager":
app/services/sync_data_manager.py:914:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def _log_changes(
        ^
app/services/sync_data_manager.py:919:18: error: Missing type parameters for
generic type "dict"  [type-arg]
            changes: dict,
                     ^
app/services/sync_data_manager.py:920:27: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
            session_id: str = None,
                              ^~~~
app/services/sync_data_manager.py:920:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:920:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "mark_account_deleted" of class "SyncDataManager":
app/services/sync_data_manager.py:936:5: error: Function is missing a return
type annotation  [no-untyped-def]
        def mark_account_deleted(cls, instance_id: int, db_type: str, user...
        ^
app/services/sync_data_manager.py:936:100: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
    ...nstance_id: int, db_type: str, username: str, session_id: str = None):
                                                                       ^~~~
app/services/sync_data_manager.py:936:100: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/sync_data_manager.py:936:100: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/sync_data_manager.py: note: In member "get_accounts_by_db_type" of class "SyncDataManager":
app/services/sync_data_manager.py:963:9: error: Returning Any from function
declared to return "list[CurrentAccountSyncData]"  [no-any-return]
            return query.all()
            ^~~~~~~~~~~~~~~~~~
app/services/sync_data_manager.py: note: In member "get_accounts_by_instance_and_db_type" of class "SyncDataManager":
app/services/sync_data_manager.py:973:9: error: Returning Any from function
declared to return "list[CurrentAccountSyncData]"  [no-any-return]
            return query.all()
            ^~~~~~~~~~~~~~~~~~
app/services/database_type_service.py: note: In member "get_all_types" of class "DatabaseTypeService":
app/services/database_type_service.py:21:9: error: Returning Any from function
declared to return "list[DatabaseTypeConfig]"  [no-any-return]
            return DatabaseTypeConfig.query.order_by(DatabaseTypeConfig.so...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/database_type_service.py: note: In member "get_type_by_id" of class "DatabaseTypeService":
app/services/database_type_service.py:36:9: error: Returning Any from function
declared to return "DatabaseTypeConfig | None"  [no-any-return]
            return DatabaseTypeConfig.query.get(type_id)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_type_service.py: note: In member "init_default_types" of class "DatabaseTypeService":
app/services/database_type_service.py:277:51: error: Argument 1 to
"get_by_name" of "DatabaseTypeConfig" has incompatible type "object"; expected
"str"  [arg-type]
                if not DatabaseTypeConfig.get_by_name(type_data["name"]):
                                                      ^~~~~~~~~~~~~~~~~
app/services/database_type_service.py:293:40: error: Incompatible types in
assignment (expression has type "object", variable has type "list[str]") 
[assignment]
                    config.features_list = type_data.get("features", [])
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_type_service.py:298:13: error: Name "api_logger" is not
defined  [name-defined]
                api_logger.info(
                ^~~~~~~~~~
app/services/classification_batch_service.py: note: In member "get_batch" of class "ClassificationBatchService":
app/services/classification_batch_service.py:196:13: error: Returning Any from
function declared to return "ClassificationBatch | None"  [no-any-return]
                return ClassificationBatch.query.filter_by(batch_id=batch_...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/classification_batch_service.py: note: In member "get_batches" of class "ClassificationBatchService":
app/services/classification_batch_service.py:212:10: error: Missing type
parameters for generic type "list"  [type-arg]
        ) -> list:
             ^
app/services/classification_batch_service.py:234:13: error: Returning Any from
function declared to return "list[Any]"  [no-any-return]
                return query.order_by(ClassificationBatch.started_at.desc(...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/unified_logs.py:9:1: error: Skipping analyzing "flask_login": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/unified_logs.py: note: In function "logs_dashboard":
app/routes/unified_logs.py:26:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def logs_dashboard():
    ^
app/routes/unified_logs.py:32:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to load logs dashboard", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "search_logs":
app/routes/unified_logs.py:37:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def search_logs():
    ^
app/routes/unified_logs.py:60:24: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
                    return error_response("Invalid start_time format", 400...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:67:24: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
                    return error_response("Invalid end_time format", 400)
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:80:24: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
                    return error_response("Invalid log level", 400)
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:137:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response(response_data)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:141:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to search logs", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "get_log_statistics":
app/routes/unified_logs.py:146:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_log_statistics():
    ^
app/routes/unified_logs.py:160:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response(stats)
                   ^~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:164:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to get log statistics", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "get_error_logs":
app/routes/unified_logs.py:169:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_error_logs():
    ^
app/routes/unified_logs.py:181:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response({"logs": logs})
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:185:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to get error logs", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "get_log_modules":
app/routes/unified_logs.py:190:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_log_modules():
    ^
app/routes/unified_logs.py:202:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response({"modules": module_list})
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:206:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to get log modules", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "export_logs":
app/routes/unified_logs.py:211:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def export_logs():
    ^
app/routes/unified_logs.py:284:25: error: Name "json" is not defined 
[name-defined]
                            json.dumps(log.context) if log.context else ""...
                            ^~~~
app/routes/unified_logs.py:296:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Unsupported export format", 400)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:300:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to export logs", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "cleanup_logs":
app/routes/unified_logs.py:305:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def cleanup_logs():
    ^
app/routes/unified_logs.py:310:20: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
                return error_response("Permission denied", 403)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:312:20: error: Item "None" of "Any | None" has no
attribute "get"  [union-attr]
            days = int(request.json.get("days", 90))
                       ^~~~~~~~~~~~~~~~
app/routes/unified_logs.py:323:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response(
                   ^
app/routes/unified_logs.py:332:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to cleanup logs", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "get_recent_logs":
app/routes/unified_logs.py:337:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_recent_logs():
    ^
app/routes/unified_logs.py:350:24: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
                    return error_response("Invalid log level", 400)
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:357:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response({"logs": logs})
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:361:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to get recent logs", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py: note: In function "get_log_health":
app/routes/unified_logs.py:366:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def get_log_health():
    ^
app/routes/unified_logs.py:397:16: error: Call to untyped function
"success_response" in typed context  [no-untyped-call]
            return success_response(health_data)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/unified_logs.py:401:16: error: Call to untyped function
"error_response" in typed context  [no-untyped-call]
            return error_response("Failed to get log health", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/health.py: note: In function "health_check":
app/routes/health.py:19:23: error: Name "Response" is not defined 
[name-defined]
    def health_check() -> "Response":
                          ^
app/routes/health.py:29:16: error: "type[APIResponse]" has no attribute
"server_error"  [attr-defined]
            return APIResponse.server_error("健康检查失败")
                   ^~~~~~~~~~~~~~~~~~~~~~~~
app/routes/health.py: note: In function "detailed_health_check":
app/routes/health.py:33:32: error: Name "Response" is not defined 
[name-defined]
    def detailed_health_check() -> "Response":
                                   ^
app/routes/health.py:75:16: error: "type[APIResponse]" has no attribute
"server_error"  [attr-defined]
            return APIResponse.server_error("详细健康检查失败")
                   ^~~~~~~~~~~~~~~~~~~~~~~~
app/routes/health.py: note: In function "check_database_health":
app/routes/health.py:78:32: error: Missing type parameters for generic type
"dict"  [type-arg]
    def check_database_health() -> dict:
                                   ^
app/routes/health.py: note: In function "check_cache_health":
app/routes/health.py:96:29: error: Missing type parameters for generic type
"dict"  [type-arg]
    def check_cache_health() -> dict:
                                ^
app/routes/health.py: note: In function "check_system_health":
app/routes/health.py:115:30: error: Missing type parameters for generic type
"dict"  [type-arg]
    def check_system_health() -> dict:
                                 ^
app/routes/health.py: note: In function "readiness_check":
app/routes/health.py:152:26: error: Name "Response" is not defined 
[name-defined]
    def readiness_check() -> "Response":
                             ^
app/routes/health.py:165:16: error: "type[APIResponse]" has no attribute
"server_error"  [attr-defined]
            return APIResponse.server_error("就绪检查失败")
                   ^~~~~~~~~~~~~~~~~~~~~~~~
app/routes/health.py: note: In function "liveness_check":
app/routes/health.py:169:25: error: Name "Response" is not defined 
[name-defined]
    def liveness_check() -> "Response":
                            ^
app/routes/health.py:177:16: error: "type[APIResponse]" has no attribute
"server_error"  [attr-defined]
            return APIResponse.server_error("存活检查失败")
                   ^~~~~~~~~~~~~~~~~~~~~~~~
app/routes/account_static.py:10:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import login_required
    ^
app/routes/account_static.py:27:2: error: Untyped decorator makes function
"index" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_static.py: note: In function "index":
app/routes/account_static.py:42:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(
                   ^
app/routes/account_static.py: note: At top level:
app/routes/account_static.py:59:2: error: Untyped decorator makes function
"account_statistics" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_static.py: note: In function "account_statistics":
app/routes/account_static.py:60:29: error: Name "Response" is not defined 
[name-defined]
    def account_statistics() -> "Response":
                                ^
app/routes/account_static.py: note: At top level:
app/routes/account_static.py:75:2: error: Untyped decorator makes function
"api_statistics" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_static.py: note: In function "api_statistics":
app/routes/account_static.py:76:25: error: Name "Response" is not defined 
[name-defined]
    def api_statistics() -> "Response":
                            ^
app/routes/account_static.py: note: In function "get_account_statistics":
app/routes/account_static.py:85:33: error: Missing type parameters for generic
type "dict"  [type-arg]
    def get_account_statistics() -> dict:
                                    ^
app/routes/account_static.py:129:29: error: Need type annotation for
"environment_stats"  [var-annotated]
            environment_stats = defaultdict(lambda: {"total": 0, "active":...
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/account_static.py:203:9: error: Need type annotation for
"permission_stats"  [var-annotated]
            permission_stats = defaultdict(int)
            ^~~~~~~~~~~~~~~~
app/middleware/error_logging_middleware.py:10:1: error: Skipping analyzing
"flask_login": module is installed, but missing library stubs or py.typed marker
 [import-untyped]
    from flask_login import current_user
    ^
app/middleware/error_logging_middleware.py: note: In function "register_error_logging_middleware":
app/middleware/error_logging_middleware.py:78:9: error: No return value
expected  [return-value]
            return response
            ^~~~~~~~~~~~~~~
app/middleware/error_logging_middleware.py:80:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(400)
         ^
app/middleware/error_logging_middleware.py:84:9: error: No return value
expected  [return-value]
            return {"error": "请求参数错误", "message": str(error), "status_code...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/middleware/error_logging_middleware.py:86:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(401)
         ^
app/middleware/error_logging_middleware.py:90:9: error: No return value
expected  [return-value]
            return {"error": "未授权访问", "message": "请先登录", "status_code": 40...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/middleware/error_logging_middleware.py:92:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(403)
         ^
app/middleware/error_logging_middleware.py:96:9: error: No return value
expected  [return-value]
            return {
            ^
app/middleware/error_logging_middleware.py:102:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(404)
         ^
app/middleware/error_logging_middleware.py:117:9: error: No return value
expected  [return-value]
            return {
            ^
app/middleware/error_logging_middleware.py:123:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(500)
         ^
app/middleware/error_logging_middleware.py:127:9: error: No return value
expected  [return-value]
            return {
            ^
app/middleware/error_logging_middleware.py:133:6: error: Value of type variable
"T_error_handler" of function cannot be "Callable[[Exception], None]" 
[type-var]
        @app.errorhandler(Exception)
         ^
app/middleware/error_logging_middleware.py:149:9: error: No return value
expected  [return-value]
            return {
            ^
app/middleware/error_logging_middleware.py: note: In function "_find_related_sync_logs":
app/middleware/error_logging_middleware.py:219:74: error: Missing type
parameters for generic type "list"  [type-arg]
    ...d_related_sync_logs(start_time: datetime, end_time: datetime) -> list:
                                                                        ^
app/middleware/error_logging_middleware.py:234:9: error: Returning Any from
function declared to return "list[Any]"  [no-any-return]
            return sync_logs
            ^~~~~~~~~~~~~~~~
app/middleware/error_logging_middleware.py: note: In function "_merge_batch_sync_logs":
app/middleware/error_logging_middleware.py:242:16: error: Missing type
parameters for generic type "list"  [type-arg]
        sync_logs: list,
                   ^
app/middleware/error_logging_middleware.py:337:9: error: No return value
expected  [return-value]
            return merged_log
            ^~~~~~~~~~~~~~~~~
app/middleware/error_logging_middleware.py: note: In function "_handle_batch_sync_log_merge":
app/middleware/error_logging_middleware.py:367:22: error:
"_merge_batch_sync_logs" does not return a value (it only ever returns None) 
[func-returns-value]
            merged_log = _merge_batch_sync_logs(start_log, sync_logs, end_...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/account_sync_service.py:10:15: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psycopg = None
                  ^~~~
app/services/account_sync_service.py:20:16: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        oracledb = None
                   ^~~~
app/services/account_sync_service.py: note: In member "sync_accounts" of class "AccountSyncService":
app/services/account_sync_service.py:37:93: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
    ...nce, sync_type: str = "batch", session_id: str = None) -> dict[str, An...
                                                        ^~~~
app/services/account_sync_service.py:37:93: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_sync_service.py:37:93: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_sync_service.py:77:28: error: Call to untyped function
"SyncDataManager" in typed context  [no-untyped-call]
                sync_manager = SyncDataManager()
                               ^~~~~~~~~~~~~~~~~
app/services/account_sync_service.py: note: In member "_get_connection" of class "AccountSyncService":
app/services/account_sync_service.py:188:16: error: Item "None" of
"DatabaseConnection | None" has no attribute "connect"  [union-attr]
                if connection_obj.connect():
                   ^~~~~~~~~~~~~~~~~~~~~~
app/services/account_classification_service.py: note: In member "_get_account_permissions" of class "AccountClassificationService":
app/services/account_classification_service.py:28:76: error: Missing type
parameters for generic type "dict"  [type-arg]
    ...et_account_permissions(self, account: CurrentAccountSyncData) -> dict:
                                                                        ^
app/services/account_classification_service.py:39:17: error: Returning Any from
function declared to return "dict[Any, Any]"  [no-any-return]
                    return json.loads(sync_data.sync_data)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/account_classification_service.py: note: In member "create_classification" of class "AccountClassificationService":
app/services/account_classification_service.py:48:28: error: Incompatible
default for argument "description" (default has type "None", argument has type
"str")  [assignment]
            description: str = None,
                               ^~~~
app/services/account_classification_service.py:48:28: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:48:28: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py:50:22: error: Incompatible
default for argument "color" (default has type "None", argument has type "str") 
[assignment]
            color: str = None,
                         ^~~~
app/services/account_classification_service.py:50:22: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:50:22: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py: note: In member "update_classification" of class "AccountClassificationService":
app/services/account_classification_service.py:90:5: error: Function is missing
a type annotation for one or more arguments  [no-untyped-def]
        def update_classification(self, classification_id: int, **kwargs) ...
        ^
app/services/account_classification_service.py: note: In member "update_rule" of class "AccountClassificationService":
app/services/account_classification_service.py:218:5: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
        def update_rule(self, rule_id: int, **kwargs) -> dict[str, Any]:
        ^
app/services/account_classification_service.py: note: In member "get_classification_rules" of class "AccountClassificationService":
app/services/account_classification_service.py:294:65: error: Incompatible
default for argument "classification_id" (default has type "None", argument has
type "int")  [assignment]
    ...ssification_rules(self, classification_id: int = None, db_type: str = ...
                                                        ^~~~
app/services/account_classification_service.py:294:65: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:294:65: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py:294:86: error: Incompatible
default for argument "db_type" (default has type "None", argument has type
"str")  [assignment]
    ...f, classification_id: int = None, db_type: str = None) -> list[dict[st...
                                                        ^~~~
app/services/account_classification_service.py: note: In member "classify_account" of class "AccountClassificationService":
app/services/account_classification_service.py:337:28: error: Incompatible
default for argument "assigned_by" (default has type "None", argument has type
"int")  [assignment]
            assigned_by: int = None,
                               ^~~~
app/services/account_classification_service.py:337:28: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:337:28: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py:338:22: error: Incompatible
default for argument "notes" (default has type "None", argument has type "str") 
[assignment]
            notes: str = None,
                         ^~~~
app/services/account_classification_service.py:338:22: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:338:22: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py:339:25: error: Incompatible
default for argument "batch_id" (default has type "None", argument has type
"str")  [assignment]
            batch_id: str = None,
                            ^~~~
app/services/account_classification_service.py:339:25: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:339:25: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py: note: In member "auto_classify_accounts" of class "AccountClassificationService":
app/services/account_classification_service.py:408:28: error: Incompatible
default for argument "instance_id" (default has type "None", argument has type
"int")  [assignment]
            instance_id: int = None,
                               ^~~~
app/services/account_classification_service.py:408:28: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:408:28: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py:410:27: error: Incompatible
default for argument "created_by" (default has type "None", argument has type
"int")  [assignment]
            created_by: int = None,
                              ^~~~
app/services/account_classification_service.py:410:27: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:410:27: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py: note: In member "_evaluate_mysql_rule" of class "AccountClassificationService":
app/services/account_classification_service.py:746:86: error: Missing type
parameters for generic type "dict"  [type-arg]
    ...self, account: CurrentAccountSyncData, rule_expression: dict) -> bool:
                                                               ^
app/services/account_classification_service.py: note: In member "_evaluate_sqlserver_rule" of class "AccountClassificationService":
app/services/account_classification_service.py:785:90: error: Missing type
parameters for generic type "dict"  [type-arg]
    ...self, account: CurrentAccountSyncData, rule_expression: dict) -> bool:
                                                               ^
app/services/account_classification_service.py: note: In member "get_account_classifications" of class "AccountClassificationService":
app/services/account_classification_service.py:948:61: error: Incompatible
default for argument "account_id" (default has type "None", argument has type
"int")  [assignment]
    ..._account_classifications(self, account_id: int = None) -> list[dict[st...
                                                        ^~~~
app/services/account_classification_service.py:948:61: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_classification_service.py:948:61: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_classification_service.py: note: In member "_evaluate_postgresql_rule" of class "AccountClassificationService":
app/services/account_classification_service.py:1030:91: error: Missing type
parameters for generic type "dict"  [type-arg]
    ...self, account: CurrentAccountSyncData, rule_expression: dict) -> bool:
                                                               ^
app/services/account_classification_service.py: note: In member "_evaluate_oracle_rule" of class "AccountClassificationService":
app/services/account_classification_service.py:1067:87: error: Missing type
parameters for generic type "dict"  [type-arg]
    ...self, account: CurrentAccountSyncData, rule_expression: dict) -> bool:
                                                               ^
app/routes/user_management.py:8:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/user_management.py:26:2: error: Untyped decorator makes function
"index" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:27:2: error: Untyped decorator makes function
"index" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/user_management.py:46:2: error: Untyped decorator makes function
"api_get_users" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:47:2: error: Untyped decorator makes function
"api_get_users" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_get_users":
app/routes/user_management.py:48:24: error: Name "Response" is not defined 
[name-defined]
    def api_get_users() -> "Response":
                           ^
app/routes/user_management.py: note: At top level:
app/routes/user_management.py:105:2: error: Untyped decorator makes function
"api_create_user" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:106:2: error: Untyped decorator makes function
"api_create_user" untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_create_user":
app/routes/user_management.py:107:26: error: Name "Response" is not defined 
[name-defined]
    def api_create_user() -> "Response":
                             ^
app/routes/user_management.py: note: At top level:
app/routes/user_management.py:174:2: error: Untyped decorator makes function
"api_update_user" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:175:2: error: Untyped decorator makes function
"api_update_user" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_update_user":
app/routes/user_management.py:176:38: error: Name "Response" is not defined 
[name-defined]
    def api_update_user(user_id: int) -> "Response":
                                         ^
app/routes/user_management.py: note: At top level:
app/routes/user_management.py:246:2: error: Untyped decorator makes function
"api_delete_user" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:247:2: error: Untyped decorator makes function
"api_delete_user" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_delete_user":
app/routes/user_management.py:248:38: error: Name "Response" is not defined 
[name-defined]
    def api_delete_user(user_id: int) -> "Response":
                                         ^
app/routes/user_management.py: note: At top level:
app/routes/user_management.py:307:2: error: Untyped decorator makes function
"api_toggle_user_status" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:308:2: error: Untyped decorator makes function
"api_toggle_user_status" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_toggle_user_status":
app/routes/user_management.py:309:45: error: Name "Response" is not defined 
[name-defined]
    def api_toggle_user_status(user_id: int) -> "Response":
                                                ^
app/routes/user_management.py: note: At top level:
app/routes/user_management.py:372:2: error: Untyped decorator makes function
"api_get_stats" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/user_management.py:373:2: error: Untyped decorator makes function
"api_get_stats" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/user_management.py: note: In function "api_get_stats":
app/routes/user_management.py:374:24: error: Name "Response" is not defined 
[name-defined]
    def api_get_stats() -> "Response":
                           ^
app/routes/sync_sessions.py:6:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/sync_sessions.py: note: In function "index":
app/routes/sync_sessions.py:22:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def index():
    ^
app/routes/sync_sessions.py: note: In function "api_list_sessions":
app/routes/sync_sessions.py:39:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def api_list_sessions():
    ^
app/routes/sync_sessions.py:60:26: error: Call to untyped function "to_dict" in
typed context  [no-untyped-call]
            sessions_data = [session.to_dict() for session in sessions]
                             ^~~~~~~~~~~~~~~~~
app/routes/sync_sessions.py: note: In function "api_get_session_detail":
app/routes/sync_sessions.py:91:1: error: Function is missing a type annotation 
[no-untyped-def]
    def api_get_session_detail(session_id):
    ^
app/routes/sync_sessions.py:101:25: error: Call to untyped function "to_dict"
in typed context  [no-untyped-call]
            records_data = [record.to_dict() for record in records]
                            ^~~~~~~~~~~~~~~~
app/routes/sync_sessions.py:104:24: error: Call to untyped function "to_dict"
in typed context  [no-untyped-call]
            session_data = session.to_dict()
                           ^~~~~~~~~~~~~~~~~
app/routes/sync_sessions.py:106:47: error: Call to untyped function
"get_progress_percentage" in typed context  [no-untyped-call]
            session_data["progress_percentage"] = session.get_progress_per...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/sync_sessions.py: note: In function "api_cancel_session":
app/routes/sync_sessions.py:134:1: error: Function is missing a type annotation
 [no-untyped-def]
    def api_cancel_session(session_id):
    ^
app/routes/sync_sessions.py: note: In function "api_get_statistics":
app/routes/sync_sessions.py:168:1: error: Function is missing a return type
annotation  [no-untyped-def]
    def api_get_statistics():
    ^
app/routes/scheduler.py:368: error: Unused "type: ignore" comment 
[unused-ignore]
                app = create_app()  # type: ignore
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/main.py:7:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import login_required
    ^
app/routes/main.py: note: In function "index":
app/routes/main.py:20:12: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
        return redirect(url_for("auth.login"))
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/main.py: note: In function "favicon":
app/routes/main.py:24:18: error: Name "Response" is not defined  [name-defined]
    def favicon() -> "Response":
                     ^
app/routes/main.py: note: In function "chrome_devtools":
app/routes/main.py:31:26: error: Name "Response" is not defined  [name-defined]
    def chrome_devtools() -> "Response":
                             ^
app/routes/main.py: note: At top level:
app/routes/main.py:38:2: error: Untyped decorator makes function "admin"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/main.py:39:2: error: Untyped decorator makes function "admin"
untyped  [misc]
    @admin_required
     ^~~~~~~~~~~~~~
app/routes/main.py: note: In function "api_health":
app/routes/main.py:46:21: error: Name "Response" is not defined  [name-defined]
    def api_health() -> "Response":
                        ^
app/routes/logs.py: note: In function "get_unified_logs":
app/routes/logs.py:93:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response(
            ^
app/routes/logs.py:93:16: error: Call to untyped function "success_response" in
typed context  [no-untyped-call]
            return success_response(
                   ^
app/routes/logs.py:114:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取统一日志失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:114:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取统一日志失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "get_unified_log_stats":
app/routes/logs.py:124:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response(stats)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:124:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response(stats)
                   ^~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:131:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取统一日志统计失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:131:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取统一日志统计失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "get_unified_error_logs":
app/routes/logs.py:167:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response({"logs": logs_data})
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:167:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response({"logs": logs_data})
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:174:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取统一错误日志失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:174:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取统一错误日志失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "get_unified_log_modules":
app/routes/logs.py:185:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response(module_list)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:185:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response(module_list)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:192:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取统一日志模块失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:192:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取统一日志模块失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "get_unified_log_detail":
app/routes/logs.py:219:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response(log_detail)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:219:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response(log_detail)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:226:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取日志详情失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:226:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取日志详情失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "export_unified_logs":
app/routes/logs.py:314:13: error: Returning Any from function declared to
return "Response"  [no-any-return]
                return success_response(
                ^
app/routes/logs.py:314:20: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
                return success_response(
                       ^
app/routes/logs.py:323:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("Unsupported format", 400)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:323:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("Unsupported format", 400)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:330:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("导出统一日志失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:330:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("导出统一日志失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "get_debug_status":
app/routes/logs.py:339:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response({"enabled": enabled, "status": "启用" if...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/logs.py:339:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response({"enabled": enabled, "status": "启用" if...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/logs.py:345:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("获取DEBUG日志状态失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:345:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("获取DEBUG日志状态失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "toggle_debug_logging":
app/routes/logs.py:364:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response(
            ^
app/routes/logs.py:364:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response(
                   ^
app/routes/logs.py:376:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("切换DEBUG日志状态失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:376:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("切换DEBUG日志状态失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py: note: In function "frontend_log":
app/routes/logs.py:385:13: error: Returning Any from function declared to
return "Response"  [no-any-return]
                return error_response("无效的请求数据", 400)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:385:20: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
                return error_response("无效的请求数据", 400)
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:408:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return success_response({"message": "日志记录成功"})
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:408:16: error: Call to untyped function "success_response"
in typed context  [no-untyped-call]
            return success_response({"message": "日志记录成功"})
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:416:9: error: Returning Any from function declared to return
"Response"  [no-any-return]
            return error_response("记录前端日志失败", 500)
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/logs.py:416:16: error: Call to untyped function "error_response" in
typed context  [no-untyped-call]
            return error_response("记录前端日志失败", 500)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instance_accounts.py:6:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import login_required
    ^
app/routes/instance_accounts.py:20:2: error: Untyped decorator makes function
"get_instance_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instance_accounts.py:21:2: error: Untyped decorator makes function
"get_instance_accounts" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instance_accounts.py: note: In function "get_instance_accounts":
app/routes/instance_accounts.py:69:16: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/routes/instance_accounts.py: note: At top level:
app/routes/instance_accounts.py:76:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instance_accounts.py:77:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instance_accounts.py: note: In function "get_account_permissions":
app/routes/instance_accounts.py:99:20: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
                return jsonify({"success": False, "error": "账户不存在"}), 404
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instance_accounts.py:136:16: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/routes/instance_accounts.py: note: At top level:
app/routes/instance_accounts.py:143:2: error: Untyped decorator makes function
"get_account_history" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instance_accounts.py:144:2: error: Untyped decorator makes function
"get_account_history" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instance_accounts.py: note: In function "get_account_history":
app/routes/instance_accounts.py:182:16: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/routes/instance_accounts.py: note: At top level:
app/routes/instance_accounts.py:189:2: error: Untyped decorator makes function
"delete_account" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instance_accounts.py:190:2: error: Untyped decorator makes function
"delete_account" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instance_accounts.py: note: In function "delete_account":
app/routes/instance_accounts.py:214:20: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
                return jsonify({"success": False, "error": "账户不存在"}), 404
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instance_accounts.py:217:20: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
                return jsonify({"success": False, "error": "账户已经被删除"}), 40...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instance_accounts.py:220:78: error: Argument 4 to
"mark_account_deleted" of "SyncDataManager" has incompatible type "str | None";
expected "str"  [arg-type]
    ...nager.mark_account_deleted(instance_id, db_type, username, session_id)
                                                                  ^~~~~~~~~~
app/routes/instance_accounts.py:240:16: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/routes/instance_accounts.py: note: At top level:
app/routes/instance_accounts.py:247:2: error: Untyped decorator makes function
"get_account_statistics" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instance_accounts.py:248:2: error: Untyped decorator makes function
"get_account_statistics" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instance_accounts.py: note: In function "get_account_statistics":
app/routes/instance_accounts.py:306:16: error: Incompatible return value type
(got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/routes/database_types.py:7:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import login_required
    ^
app/routes/database_types.py:15:2: error: Untyped decorator makes function
"index" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py:23:2: error: Untyped decorator makes function
"create" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "create":
app/routes/database_types.py:24:17: error: Name "Response" is not defined 
[name-defined]
    def create() -> "Response":
                    ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:33:2: error: Untyped decorator makes function
"edit" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "edit":
app/routes/database_types.py:34:27: error: Name "Response" is not defined 
[name-defined]
    def edit(type_id: int) -> "Response":
                              ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:43:2: error: Untyped decorator makes function
"delete" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "delete":
app/routes/database_types.py:44:29: error: Name "Response" is not defined 
[name-defined]
    def delete(type_id: int) -> "Response":
                                ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:53:2: error: Untyped decorator makes function
"toggle_status" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "toggle_status":
app/routes/database_types.py:54:36: error: Name "Response" is not defined 
[name-defined]
    def toggle_status(type_id: int) -> "Response":
                                       ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:60:2: error: Untyped decorator makes function
"api_list" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "api_list":
app/routes/database_types.py:61:19: error: Name "Response" is not defined 
[name-defined]
    def api_list() -> "Response":
                      ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:68:2: error: Untyped decorator makes function
"api_active" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "api_active":
app/routes/database_types.py:69:21: error: Name "Response" is not defined 
[name-defined]
    def api_active() -> "Response":
                        ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:76:2: error: Untyped decorator makes function
"api_form_options" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "api_form_options":
app/routes/database_types.py:77:27: error: Name "Response" is not defined 
[name-defined]
    def api_form_options() -> "Response":
                              ^
app/routes/database_types.py: note: At top level:
app/routes/database_types.py:84:2: error: Untyped decorator makes function
"init_defaults" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/database_types.py: note: In function "init_defaults":
app/routes/database_types.py:85:24: error: Name "Response" is not defined 
[name-defined]
    def init_defaults() -> "Response":
                           ^
app/routes/dashboard.py:9:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/dashboard.py:37:2: error: Untyped decorator makes function "index"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/dashboard.py: note: In function "index":
app/routes/dashboard.py:65:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(
                   ^
app/routes/dashboard.py: note: At top level:
app/routes/dashboard.py:82:2: error: Untyped decorator makes function
"api_overview" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/dashboard.py: note: In function "api_overview":
app/routes/dashboard.py:83:23: error: Name "Response" is not defined 
[name-defined]
    def api_overview() -> "Response":
                          ^
app/routes/dashboard.py: note: At top level:
app/routes/dashboard.py:105:2: error: Untyped decorator makes function
"api_charts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/dashboard.py: note: In function "api_charts":
app/routes/dashboard.py:106:21: error: Name "Response" is not defined 
[name-defined]
    def api_charts() -> "Response":
                        ^
app/routes/dashboard.py: note: At top level:
app/routes/dashboard.py:129:2: error: Untyped decorator makes function
"api_activities" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/dashboard.py: note: In function "api_activities":
app/routes/dashboard.py:130:25: error: Name "Response" is not defined 
[name-defined]
    def api_activities() -> "Response":
                            ^
app/routes/dashboard.py: note: At top level:
app/routes/dashboard.py:136:2: error: Untyped decorator makes function
"api_status" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/dashboard.py: note: In function "api_status":
app/routes/dashboard.py:137:21: error: Name "Response" is not defined 
[name-defined]
    def api_status() -> "Response":
                        ^
app/routes/dashboard.py: note: In function "get_system_overview":
app/routes/dashboard.py:159:30: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_system_overview() -> dict:
                                 ^
app/routes/dashboard.py: note: In function "get_chart_data":
app/routes/dashboard.py:210:48: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_chart_data(chart_type: str = "all") -> dict:
                                                   ^
app/routes/dashboard.py: note: In function "get_log_trend_data":
app/routes/dashboard.py:240:29: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_log_trend_data() -> dict:
                                ^
app/routes/dashboard.py:276:16: error: Incompatible return value type (got
"list[dict[str, Any]]", expected "dict[Any, Any]")  [return-value]
            return trend_data
                   ^~~~~~~~~~
app/routes/dashboard.py:279:16: error: Incompatible return value type (got
"list[Never]", expected "dict[Any, Any]")  [return-value]
            return []
                   ^~
app/routes/dashboard.py: note: In function "get_log_level_distribution":
app/routes/dashboard.py:282:37: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_log_level_distribution() -> dict:
                                        ^
app/routes/dashboard.py:292:16: error: Incompatible return value type (got
"list[dict[str, Any]]", expected "dict[Any, Any]")  [return-value]
            return [{"level": stat.level, "count": stat.count} for stat in...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/dashboard.py:295:16: error: Incompatible return value type (got
"list[Never]", expected "dict[Any, Any]")  [return-value]
            return []
                   ^~
app/routes/dashboard.py: note: In function "get_instance_type_distribution":
app/routes/dashboard.py:298:41: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_instance_type_distribution() -> dict:
                                            ^
app/routes/dashboard.py:307:16: error: Incompatible return value type (got
"list[dict[str, Any]]", expected "dict[Any, Any]")  [return-value]
            return [{"type": stat.db_type, "count": stat.count} for stat i...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/dashboard.py:310:16: error: Incompatible return value type (got
"list[Never]", expected "dict[Any, Any]")  [return-value]
            return []
                   ^~
app/routes/dashboard.py: note: In function "get_task_status_distribution":
app/routes/dashboard.py:313:39: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_task_status_distribution() -> dict:
                                          ^
app/routes/dashboard.py:320:16: error: Incompatible return value type (got
"list[dict[str, Any]]", expected "dict[Any, Any]")  [return-value]
            return [{"status": stat.last_status or "unknown", "count": sta...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/dashboard.py:323:16: error: Incompatible return value type (got
"list[Never]", expected "dict[Any, Any]")  [return-value]
            return []
                   ^~
app/routes/dashboard.py: note: In function "get_sync_trend_data":
app/routes/dashboard.py:326:30: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_sync_trend_data() -> dict:
                                 ^
app/routes/dashboard.py:341:16: error: Incompatible return value type (got
"list[dict[str, Any]]", expected "dict[Any, Any]")  [return-value]
            return trend_data
                   ^~~~~~~~~~
app/routes/dashboard.py:344:16: error: Incompatible return value type (got
"list[Never]", expected "dict[Any, Any]")  [return-value]
            return []
                   ^~
app/routes/dashboard.py: note: In function "get_system_status":
app/routes/dashboard.py:347:28: error: Missing type parameters for generic type
"dict"  [type-arg]
    def get_system_status() -> dict:
                               ^
app/routes/credentials.py:6:1: error: Skipping analyzing "flask_login": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/credentials.py:32:2: error: Untyped decorator makes function "index"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:33:2: error: Untyped decorator makes function "index"
untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/credentials.py: note: In function "index":
app/routes/credentials.py:89:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(
                   ^
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:112:2: error: Untyped decorator makes function
"create" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:113:2: error: Untyped decorator makes function
"create" untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/credentials.py: note: In function "create":
app/routes/credentials.py:114:17: error: Name "Response" is not defined 
[name-defined]
    def create() -> "str | Response":
                    ^
app/routes/credentials.py:132:44: error: Argument 1 to "validate_username" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
            username_error = validate_username(data.get("username"))
                                               ^~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:140:44: error: Argument 1 to "validate_password" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
            password_error = validate_password(data.get("password"))
                                               ^~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:149:46: error: Argument 1 to "validate_db_type" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
                db_type_error = validate_db_type(data.get("db_type"))
                                                 ^~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:157:58: error: Argument 1 to
"validate_credential_type" has incompatible type "Any | str | None"; expected
"str"  [arg-type]
    ...credential_type_error = validate_credential_type(data.get("credential_...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
app/routes/credentials.py:176:22: error: Item "None" of "Any | str | None" has
no attribute "strip"  [union-attr]
                    name=data.get("name").strip(),
                         ^~~~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:177:33: error: Argument "credential_type" to
"Credential" has incompatible type "Any | str | None"; expected "str" 
[arg-type]
                    credential_type=data.get("credential_type"),
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:178:26: error: Item "None" of "Any | str | None" has
no attribute "strip"  [union-attr]
                    username=data.get("username").strip(),
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:179:26: error: Argument "password" to "Credential"
has incompatible type "Any | str | None"; expected "str"  [arg-type]
                    password=data.get("password"),
                             ^~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:232:2: error: Untyped decorator makes function
"detail" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:233:2: error: Untyped decorator makes function
"detail" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/credentials.py: note: In function "detail":
app/routes/credentials.py:239:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(credential.to_dict())
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:245:2: error: Untyped decorator makes function "edit"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:246:2: error: Untyped decorator makes function "edit"
untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/credentials.py: note: In function "edit":
app/routes/credentials.py:247:33: error: Name "Response" is not defined 
[name-defined]
    def edit(credential_id: int) -> "str | Response":
                                    ^
app/routes/credentials.py:267:44: error: Argument 1 to "validate_username" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
            username_error = validate_username(data.get("username"))
                                               ^~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:276:48: error: Argument 1 to "validate_password" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
                password_error = validate_password(data.get("password"))
                                                   ^~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:285:46: error: Argument 1 to "validate_db_type" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
                db_type_error = validate_db_type(data.get("db_type"))
                                                 ^~~~~~~~~~~~~~~~~~~
app/routes/credentials.py:293:58: error: Argument 1 to
"validate_credential_type" has incompatible type "Any | str | None"; expected
"str"  [arg-type]
    ...credential_type_error = validate_credential_type(data.get("credential_...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
app/routes/credentials.py:319:42: error: Item "None" of "Any | str | None" has
no attribute "strip"  [union-attr]
                    credential.description = data.get("description").strip...
                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:377:2: error: Untyped decorator makes function
"toggle" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:378:2: error: Untyped decorator makes function
"toggle" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/credentials.py: note: In function "toggle":
app/routes/credentials.py:379:35: error: Name "Response" is not defined 
[name-defined]
    def toggle(credential_id: int) -> "Response":
                                      ^
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:422:2: error: Untyped decorator makes function
"delete" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:423:2: error: Untyped decorator makes function
"delete" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/credentials.py: note: In function "delete":
app/routes/credentials.py:424:35: error: Name "Response" is not defined 
[name-defined]
    def delete(credential_id: int) -> "Response":
                                      ^
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:466:2: error: Untyped decorator makes function
"api_list" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:467:2: error: Untyped decorator makes function
"api_list" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/credentials.py: note: In function "api_list":
app/routes/credentials.py:468:19: error: Name "Response" is not defined 
[name-defined]
    def api_list() -> "Response":
                      ^
app/routes/credentials.py: note: At top level:
app/routes/credentials.py:475:2: error: Untyped decorator makes function
"api_detail" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/credentials.py:476:2: error: Untyped decorator makes function
"api_detail" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/credentials.py: note: In function "api_detail":
app/routes/credentials.py:477:39: error: Name "Response" is not defined 
[name-defined]
    def api_detail(credential_id: int) -> "Response":
                                          ^
app/routes/auth.py:12:1: error: Skipping analyzing "flask_login": module is
installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required, login_user, logo...
    ^
app/routes/auth.py: note: In function "login":
app/routes/auth.py:29:16: error: Name "Response" is not defined  [name-defined]
    def login() -> "str | Response":
                   ^
app/routes/auth.py: note: At top level:
app/routes/auth.py:113:2: error: Untyped decorator makes function "logout"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/auth.py: note: In function "logout":
app/routes/auth.py:114:17: error: Name "Response" is not defined 
[name-defined]
    def logout() -> "Response":
                    ^
app/routes/auth.py: note: At top level:
app/routes/auth.py:138:2: error: Untyped decorator makes function "profile"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/auth.py: note: In function "profile":
app/routes/auth.py:139:18: error: Name "Response" is not defined 
[name-defined]
    def profile() -> "str | Response":
                     ^
app/routes/auth.py: note: At top level:
app/routes/auth.py:158:2: error: Untyped decorator makes function
"change_password" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/auth.py: note: In function "change_password":
app/routes/auth.py:160:26: error: Name "Response" is not defined 
[name-defined]
    def change_password() -> "str | Response":
                             ^
app/routes/auth.py: note: At top level:
app/routes/auth.py:214:2: error: Untyped decorator makes function "refresh"
untyped  [misc]
    @jwt_required(refresh=True)
     ^~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/auth.py: note: In function "refresh":
app/routes/auth.py:215:18: error: Name "Response" is not defined 
[name-defined]
    def refresh() -> "Response":
                     ^
app/routes/auth.py: note: At top level:
app/routes/auth.py:223:2: error: Untyped decorator makes function "me" untyped 
[misc]
    @jwt_required()
     ^~~~~~~~~~~~~~
app/routes/auth.py: note: In function "me":
app/routes/auth.py:224:13: error: Name "Response" is not defined 
[name-defined]
    def me() -> "Response":
                ^
app/tasks.py: note: In function "cleanup_old_logs":
app/tasks.py:17:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def cleanup_old_logs():
    ^
app/tasks.py:29:29: error: Call to untyped function "_cleanup_temp_files" in
typed context  [no-untyped-call]
                cleaned_files = _cleanup_temp_files()
                                ^~~~~~~~~~~~~~~~~~~~~
app/tasks.py: note: In function "_cleanup_temp_files":
app/tasks.py:70:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def _cleanup_temp_files():
    ^
app/tasks.py: note: In function "sync_accounts":
app/tasks.py:104:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def sync_accounts():
    ^
app/tasks.py:127:28: error: Argument "created_by" to "create_session" of
"SyncSessionService" has incompatible type "None"; expected "int"  [arg-type]
                    created_by=None,  # 定时任务没有用户
                               ^~~~
app/tasks.py: note: In function "health_check":
app/tasks.py:302:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def health_check():
    ^
app/tasks.py: note: In function "cleanup_temp_files":
app/tasks.py:342:1: error: Function is missing a return type annotation 
[no-untyped-def]
    def cleanup_temp_files():
    ^
app/services/connection_factory.py: note: In member "execute_query" of class "DatabaseConnection":
app/services/connection_factory.py:38:49: error: Missing type parameters for
generic type "tuple"  [type-arg]
        def execute_query(self, query: str, params: tuple | None = None) -...
                                                    ^
app/services/connection_factory.py: note: In member "connect" of class "MySQLConnection":
app/services/connection_factory.py:61:20: error: Item "None" of
"DatabaseTypeConfig | None" has no attribute "default_schema"  [union-attr]
                    or DatabaseTypeUtils.get_database_type_config("mysql")...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/connection_factory.py: note: In member "disconnect" of class "MySQLConnection":
app/services/connection_factory.py:88:13: error: Statement is unreachable 
[unreachable]
                try:
                ^
app/services/connection_factory.py: note: In member "execute_query" of class "MySQLConnection":
app/services/connection_factory.py:119:49: error: Missing type parameters for
generic type "tuple"  [type-arg]
        def execute_query(self, query: str, params: tuple | None = None) -...
                                                    ^
app/services/connection_factory.py:126:18: error: "None" has no attribute
"cursor"  [attr-defined]
            cursor = self.connection.cursor()
                     ^~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "connect" of class "PostgreSQLConnection":
app/services/connection_factory.py:153:31: error: Incompatible types in
assignment (expression has type "Connection[tuple[Any, ...]]", variable has type
"None")  [assignment]
                self.connection = psycopg.connect(
                                  ^
app/services/connection_factory.py:157:20: error: Item "None" of
"DatabaseTypeConfig | None" has no attribute "default_schema"  [union-attr]
                    or DatabaseTypeUtils.get_database_type_config("postgre...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/connection_factory.py: note: In member "disconnect" of class "PostgreSQLConnection":
app/services/connection_factory.py:179:13: error: Statement is unreachable 
[unreachable]
                try:
                ^
app/services/connection_factory.py: note: In member "execute_query" of class "PostgreSQLConnection":
app/services/connection_factory.py:210:49: error: Missing type parameters for
generic type "tuple"  [type-arg]
        def execute_query(self, query: str, params: tuple | None = None) -...
                                                    ^
app/services/connection_factory.py:217:18: error: "None" has no attribute
"cursor"  [attr-defined]
            cursor = self.connection.cursor()
                     ^~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "__init__" of class "SQLServerConnection":
app/services/connection_factory.py:236:5: error: Function is missing a type
annotation  [no-untyped-def]
        def __init__(self, instance):
        ^
app/services/connection_factory.py: note: In member "connect" of class "SQLServerConnection":
app/services/connection_factory.py:248:16: error: Item "None" of
"DatabaseTypeConfig | None" has no attribute "default_schema"  [union-attr]
                or DatabaseTypeUtils.get_database_type_config("sqlserver")...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/connection_factory.py: note: In member "_try_pymssql_connection" of class "SQLServerConnection":
app/services/connection_factory.py:318:31: error: Incompatible types in
assignment (expression has type "Connection", variable has type "None") 
[assignment]
                self.connection = pymssql.connect(
                                  ^
app/services/connection_factory.py: note: In member "disconnect" of class "SQLServerConnection":
app/services/connection_factory.py:361:13: error: Statement is unreachable 
[unreachable]
                try:
                ^
app/services/connection_factory.py: note: In member "execute_query" of class "SQLServerConnection":
app/services/connection_factory.py:394:49: error: Missing type parameters for
generic type "tuple"  [type-arg]
        def execute_query(self, query: str, params: tuple | None = None) -...
                                                    ^
app/services/connection_factory.py:401:18: error: "None" has no attribute
"cursor"  [attr-defined]
            cursor = self.connection.cursor()
                     ^~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "get_version" of class "SQLServerConnection":
app/services/connection_factory.py:413:26: error: "None" has no attribute
"cursor"  [attr-defined]
                    cursor = self.connection.cursor()
                             ^~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "connect" of class "OracleConnection":
app/services/connection_factory.py:439:20: error: Item "None" of
"DatabaseTypeConfig | None" has no attribute "default_schema"  [union-attr]
                    or DatabaseTypeUtils.get_database_type_config("oracle"...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/services/connection_factory.py:459:35: error: Incompatible types in
assignment (expression has type "Connection", variable has type "None") 
[assignment]
                    self.connection = oracledb.connect(
                                      ^
app/services/connection_factory.py:469:43: error: Incompatible types in
assignment (expression has type "Connection", variable has type "None") 
[assignment]
                            self.connection = oracledb.connect(
                                              ^
app/services/connection_factory.py: note: In member "disconnect" of class "OracleConnection":
app/services/connection_factory.py:496:13: error: Statement is unreachable 
[unreachable]
                try:
                ^
app/services/connection_factory.py: note: In member "execute_query" of class "OracleConnection":
app/services/connection_factory.py:527:49: error: Missing type parameters for
generic type "tuple"  [type-arg]
        def execute_query(self, query: str, params: tuple | None = None) -...
                                                    ^
app/services/connection_factory.py:534:18: error: "None" has no attribute
"cursor"  [attr-defined]
            cursor = self.connection.cursor()
                     ^~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "create_connection" of class "ConnectionFactory":
app/services/connection_factory.py:584:16: error: Cannot instantiate abstract
class "DatabaseConnection" with abstract attributes "connect", "disconnect",
"execute_query", "get_version" and "test_connection"  [abstract]
            return connection_class(instance)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/connection_factory.py: note: In member "get_supported_types" of class "ConnectionFactory":
app/services/connection_factory.py:607:34: error: Missing type parameters for
generic type "list"  [type-arg]
        def get_supported_types() -> list:
                                     ^
app/routes/account_sync.py:19:1: error: Skipping analyzing "flask_login":
module is installed, but missing library stubs or py.typed marker 
[import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/account_sync.py:33:2: error: Untyped decorator makes function
"sync_records" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync.py:34:2: error: Untyped decorator makes function
"sync_records" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_sync.py:258:2: error: Untyped decorator makes function
"sync_all_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync.py:463:2: error: Untyped decorator makes function
"sync_details_batch" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync.py:539:2: error: Untyped decorator makes function
"sync_details" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync.py: note: In function "sync_details":
app/routes/account_sync.py:573:16: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
            return redirect(url_for("account_sync.sync_records"))
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/account_classification.py:8:1: error: Skipping analyzing
"flask_login": module is installed, but missing library stubs or py.typed marker
 [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/account_classification.py:30:2: error: Untyped decorator makes
function "index" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:31:2: error: Untyped decorator makes
function "index" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py:38:2: error: Untyped decorator makes
function "batches" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:39:2: error: Untyped decorator makes
function "batches" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py:46:2: error: Untyped decorator makes
function "rules" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:47:2: error: Untyped decorator makes
function "rules" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py:54:2: error: Untyped decorator makes
function "get_classifications" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:55:2: error: Untyped decorator makes
function "get_classifications" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_classifications":
app/routes/account_classification.py:56:30: error: Name "Response" is not
defined  [name-defined]
    def get_classifications() -> "Response":
                                 ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:98:2: error: Untyped decorator makes
function "create_classification" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:99:2: error: Untyped decorator makes
function "create_classification" untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "create_classification":
app/routes/account_classification.py:100:32: error: Name "Response" is not
defined  [name-defined]
    def create_classification() -> "Response":
                                   ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:139:2: error: Untyped decorator makes
function "get_classification" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:140:2: error: Untyped decorator makes
function "get_classification" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_classification":
app/routes/account_classification.py:141:51: error: Name "Response" is not
defined  [name-defined]
    def get_classification(classification_id: int) -> "Response":
                                                      ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:169:2: error: Untyped decorator makes
function "update_classification" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:170:2: error: Untyped decorator makes
function "update_classification" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "update_classification":
app/routes/account_classification.py:171:54: error: Name "Response" is not
defined  [name-defined]
    def update_classification(classification_id: int) -> "Response":
                                                         ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:194:2: error: Untyped decorator makes
function "delete_classification" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:195:2: error: Untyped decorator makes
function "delete_classification" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "delete_classification":
app/routes/account_classification.py:196:54: error: Name "Response" is not
defined  [name-defined]
    def delete_classification(classification_id: int) -> "Response":
                                                         ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:217:2: error: Untyped decorator makes
function "get_rules" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:218:2: error: Untyped decorator makes
function "get_rules" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_rules":
app/routes/account_classification.py:219:20: error: Name "Response" is not
defined  [name-defined]
    def get_rules() -> "Response":
                       ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:259:2: error: Untyped decorator makes
function "list_rules" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:260:2: error: Untyped decorator makes
function "list_rules" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "list_rules":
app/routes/account_classification.py:261:21: error: Name "Response" is not
defined  [name-defined]
    def list_rules() -> "Response":
                        ^
app/routes/account_classification.py:288:9: error: Need type annotation for
"rules_by_db_type" (hint: "rules_by_db_type: dict[<type>, <type>] = ...") 
[var-annotated]
            rules_by_db_type = {}
            ^~~~~~~~~~~~~~~~
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:303:2: error: Untyped decorator makes
function "create_rule" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:304:2: error: Untyped decorator makes
function "create_rule" untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "create_rule":
app/routes/account_classification.py:305:22: error: Name "Response" is not
defined  [name-defined]
    def create_rule() -> "Response":
                         ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:333:2: error: Untyped decorator makes
function "get_rule" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:334:2: error: Untyped decorator makes
function "get_rule" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_rule":
app/routes/account_classification.py:335:31: error: Name "Response" is not
defined  [name-defined]
    def get_rule(rule_id: int) -> "Response":
                                  ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:366:2: error: Untyped decorator makes
function "update_rule" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:367:2: error: Untyped decorator makes
function "update_rule" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "update_rule":
app/routes/account_classification.py:368:34: error: Name "Response" is not
defined  [name-defined]
    def update_rule(rule_id: int) -> "Response":
                                     ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:393:2: error: Untyped decorator makes
function "get_matched_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:394:2: error: Untyped decorator makes
function "get_matched_accounts" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_matched_accounts":
app/routes/account_classification.py:395:43: error: Name "Response" is not
defined  [name-defined]
    def get_matched_accounts(rule_id: int) -> "Response":
                                              ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:476:2: error: Untyped decorator makes
function "delete_rule" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:477:2: error: Untyped decorator makes
function "delete_rule" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "delete_rule":
app/routes/account_classification.py:478:34: error: Name "Response" is not
defined  [name-defined]
    def delete_rule(rule_id: int) -> "Response":
                                     ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:495:2: error: Untyped decorator makes
function "assign_classification" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:496:2: error: Untyped decorator makes
function "assign_classification" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "assign_classification":
app/routes/account_classification.py:497:32: error: Name "Response" is not
defined  [name-defined]
    def assign_classification() -> "Response":
                                   ^
app/routes/account_classification.py:508:13: error: Argument 5 to
"classify_account" of "AccountClassificationService" has incompatible type
"None"; expected "str"  [arg-type]
                None,  # notes
                ^~~~
app/routes/account_classification.py:509:13: error: Argument 6 to
"classify_account" of "AccountClassificationService" has incompatible type
"None"; expected "str"  [arg-type]
                None,  # batch_id (手动分配不需要批次ID)
                ^~~~
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:520:2: error: Untyped decorator makes
function "auto_classify" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:521:2: error: Untyped decorator makes
function "auto_classify" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "auto_classify":
app/routes/account_classification.py:522:24: error: Name "Response" is not
defined  [name-defined]
    def auto_classify() -> "Response":
                           ^
app/routes/account_classification.py:540:24: error: Argument "created_by" to
"auto_classify_accounts" of "AccountClassificationService" has incompatible type
"Any | None"; expected "int"  [arg-type]
                created_by=current_user.id if current_user.is_authenticate...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:575:2: error: Untyped decorator makes
function "get_assignments" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:576:2: error: Untyped decorator makes
function "get_assignments" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_assignments":
app/routes/account_classification.py:577:26: error: Name "Response" is not
defined  [name-defined]
    def get_assignments() -> "Response":
                             ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:610:2: error: Untyped decorator makes
function "remove_assignment" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:611:2: error: Untyped decorator makes
function "remove_assignment" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "remove_assignment":
app/routes/account_classification.py:612:46: error: Name "Response" is not
defined  [name-defined]
    def remove_assignment(assignment_id: int) -> "Response":
                                                 ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:628:2: error: Untyped decorator makes
function "get_permissions" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:629:2: error: Untyped decorator makes
function "get_permissions" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_permissions":
app/routes/account_classification.py:630:38: error: Name "Response" is not
defined  [name-defined]
    def get_permissions(db_type: str) -> "Response":
                                         ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:642:2: error: Untyped decorator makes
function "batches_page" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:643:2: error: Untyped decorator makes
function "batches_page" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "batches_page":
app/routes/account_classification.py:644:23: error: Name "Response" is not
defined  [name-defined]
    def batches_page() -> "Response":
                          ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:650:2: error: Untyped decorator makes
function "api_get_batches" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:651:2: error: Untyped decorator makes
function "api_get_batches" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "api_get_batches":
app/routes/account_classification.py:652:26: error: Name "Response" is not
defined  [name-defined]
    def api_get_batches() -> "Response":
                             ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:674:2: error: Untyped decorator makes
function "api_get_batch" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:675:2: error: Untyped decorator makes
function "api_get_batch" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "api_get_batch":
app/routes/account_classification.py:676:37: error: Name "Response" is not
defined  [name-defined]
    def api_get_batch(batch_id: str) -> "Response":
                                        ^
app/routes/account_classification.py:683:51: error: Call to untyped function
"to_dict" in typed context  [no-untyped-call]
            return jsonify({"success": True, "batch": batch.to_dict()})
                                                      ^~~~~~~~~~~~~~~
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:696:2: error: Untyped decorator makes
function "get_batch_stats" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:697:2: error: Untyped decorator makes
function "get_batch_stats" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "get_batch_stats":
app/routes/account_classification.py:698:39: error: Name "Response" is not
defined  [name-defined]
    def get_batch_stats(batch_id: str) -> "Response":
                                          ^
app/routes/account_classification.py: note: At top level:
app/routes/account_classification.py:718:2: error: Untyped decorator makes
function "api_get_batch_matches" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_classification.py:719:2: error: Untyped decorator makes
function "api_get_batch_matches" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_classification.py: note: In function "api_get_batch_matches":
app/routes/account_classification.py:720:45: error: Name "Response" is not
defined  [name-defined]
    def api_get_batch_matches(batch_id: str) -> "Response":
                                                ^
app/routes/account_classification.py: note: In function "_get_db_permissions":
app/routes/account_classification.py:941:42: error: Missing type parameters for
generic type "dict"  [type-arg]
    def _get_db_permissions(db_type: str) -> dict:
                                             ^
app/services/database_service.py: note: In member "__init__" of class "DatabaseService":
app/services/database_service.py:18:9: error: Need type annotation for
"connections" (hint: "connections: dict[<type>, <type>] = ...")  [var-annotated]
            self.connections = {}  # 连接池
            ^~~~~~~~~~~~~~~~
app/services/database_service.py: note: In member "get_connection" of class "DatabaseService":
app/services/database_service.py:37:16: error: Item "None" of
"DatabaseConnection | None" has no attribute "connect"  [union-attr]
                if connection_obj.connect():
                   ^~~~~~~~~~~~~~~~~~~~~~
app/services/database_service.py: note: In member "get_database_version" of class "DatabaseService":
app/services/database_service.py:161:17: error: Returning Any from function
declared to return "str | None"  [no-any-return]
                    return conn.get_version()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_service.py: note: In member "sync_accounts" of class "DatabaseService":
app/services/database_service.py:208:28: error: Call to untyped function
"SyncDataManager" in typed context  [no-untyped-call]
                sync_manager = SyncDataManager()
                               ^~~~~~~~~~~~~~~~~
app/routes/instances.py:17:1: error: Skipping analyzing "flask_login": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/instances.py:46:2: error: Untyped decorator makes function "index"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:47:2: error: Untyped decorator makes function "index"
untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py: note: In function "index":
app/routes/instances.py:86:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(
                   ^
app/routes/instances.py: note: At top level:
app/routes/instances.py:114:2: error: Untyped decorator makes function "create"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:115:2: error: Untyped decorator makes function "create"
untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "create":
app/routes/instances.py:137:42: error: Argument 1 to "validate_db_type" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
            db_type_error = validate_db_type(data.get("db_type"))
                                             ^~~~~~~~~~~~~~~~~~~
app/routes/instances.py:155:24: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                port = int(data.get("port"))
                           ^~~~~~~~~~~~~~~~
app/routes/instances.py:169:37: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    credential_id = int(data.get("credential_id"))
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:193:22: error: Item "None" of "Any | str | None" has no
attribute "strip"  [union-attr]
                    name=data.get("name").strip(),
                         ^~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:194:25: error: Argument "db_type" to "Instance" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
                    db_type=data.get("db_type"),
                            ^~~~~~~~~~~~~~~~~~~
app/routes/instances.py:195:22: error: Item "None" of "Any | str | None" has no
attribute "strip"  [union-attr]
                    host=data.get("host").strip(),
                         ^~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:196:26: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    port=int(data.get("port")),
                             ^~~~~~~~~~~~~~~~
app/routes/instances.py:198:36: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    credential_id=(int(data.get("credential_id")) if data....
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:226:20: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
                return redirect(url_for("instances.index"))
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:267:2: error: Untyped decorator makes function
"test_instance_connection" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:268:2: error: Untyped decorator makes function
"test_instance_connection" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py: note: In function "test_instance_connection":
app/routes/instances.py:277:34: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
            log_info(f"请求数据: {request.get_data()}", module="instances")
                                     ^~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:382:2: error: Untyped decorator makes function "detail"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:383:2: error: Untyped decorator makes function "detail"
untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:422:2: error: Untyped decorator makes function
"statistics" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:423:2: error: Untyped decorator makes function
"statistics" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:435:2: error: Untyped decorator makes function
"api_statistics" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:436:2: error: Untyped decorator makes function
"api_statistics" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:444:2: error: Untyped decorator makes function "edit"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:445:2: error: Untyped decorator makes function "edit"
untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "edit":
app/routes/instances.py:466:42: error: Argument 1 to "validate_db_type" has
incompatible type "Any | str | None"; expected "str"  [arg-type]
            db_type_error = validate_db_type(data.get("db_type"))
                                             ^~~~~~~~~~~~~~~~~~~
app/routes/instances.py:484:24: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                port = int(data.get("port"))
                           ^~~~~~~~~~~~~~~~
app/routes/instances.py:498:37: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                    credential_id = int(data.get("credential_id"))
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:529:42: error: Argument 1 to "int" has incompatible
type "Any | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
                instance.credential_id = int(data.get("credential_id")) if...
                                             ^~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:532:40: error: Item "None" of "Any | str | None" has no
attribute "strip"  [union-attr]
                    instance.description = data.get("description").strip()
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:567:20: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
                return redirect(url_for("instances.detail", instance_id=in...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/instances.py: note: At top level:
app/routes/instances.py:614:2: error: Untyped decorator makes function "delete"
untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:615:2: error: Untyped decorator makes function "delete"
untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "delete":
app/routes/instances.py:664:16: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
            return redirect(url_for("instances.index"))
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:674:16: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
            return redirect(url_for("instances.index"))
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:678:2: error: Untyped decorator makes function
"batch_delete" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:679:2: error: Untyped decorator makes function
"batch_delete" untyped  [misc]
    @delete_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py:763:2: error: Untyped decorator makes function
"batch_create" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:764:2: error: Untyped decorator makes function
"batch_create" untyped  [misc]
    @create_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "batch_create":
app/routes/instances.py:771:25: error: Item "None" of "str | None" has no
attribute "endswith"  [union-attr]
                if file and file.filename.endswith(".csv"):
                            ^~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:772:24: error: Incompatible return value type (got
"dict[str, Any] | Response | tuple[Response, int]", expected
"str | Response | tuple[Response, int]")  [return-value]
                    return _process_csv_file(file)
                           ^~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:782:16: error: Incompatible return value type (got
"dict[str, Any] | Response | tuple[Response, int]", expected
"str | Response | tuple[Response, int]")  [return-value]
            return _process_instances_data(instances_data)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "_process_instances_data":
app/routes/instances.py:869:22: error: Argument "tags" to "Instance" has
incompatible type "dict[Never, Never]"; expected "str | None"  [arg-type]
                    tags={},
                         ^~
app/routes/instances.py: note: At top level:
app/routes/instances.py:912:2: error: Untyped decorator makes function
"export_instances" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:913:2: error: Untyped decorator makes function
"export_instances" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1008:2: error: Untyped decorator makes function
"download_template" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1009:2: error: Untyped decorator makes function
"download_template" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1085:2: error: Untyped decorator makes function
"test_connection" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1086:2: error: Untyped decorator makes function
"test_connection" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py: note: In function "test_connection":
app/routes/instances.py:1119:12: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
        return redirect(url_for("instances.detail", instance_id=instance_i...
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:1123:2: error: Untyped decorator makes function
"sync_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1124:2: error: Untyped decorator makes function
"sync_accounts" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/instances.py: note: In function "sync_accounts":
app/routes/instances.py:1207:9: error: Statement is unreachable  [unreachable]
            return jsonify({"error": "同步失败，请重试"}), 500
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py:1209:12: error: Incompatible return value type (got
"werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response | tuple[flask.wrappers.Response, int]") 
[return-value]
        return redirect(url_for("instances.detail", instance_id=instance_i...
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:1214:2: error: Untyped decorator makes function
"api_list" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1215:2: error: Untyped decorator makes function
"api_list" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1223:2: error: Untyped decorator makes function
"api_detail" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1224:2: error: Untyped decorator makes function
"api_detail" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1232:2: error: Untyped decorator makes function
"api_test_connection" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1233:2: error: Untyped decorator makes function
"api_test_connection" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1247:2: error: Untyped decorator makes function
"api_test_instance_connection" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1248:2: error: Untyped decorator makes function
"api_test_instance_connection" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py: note: In function "api_test_instance_connection":
app/routes/instances.py:1259:34: error: If x = b'abc' then f"{x}" or
"{}".format(x) produces "b'abc'", not "abc". If this is desired behavior, use
f"{x!r}" or "{!r}".format(x). Otherwise, decode the bytes  [str-bytes-safe]
            log_info(f"请求数据: {request.get_data()}", module="instances")
                                     ^~~~~~~~~~~~~~~~~~~~
app/routes/instances.py: note: At top level:
app/routes/instances.py:1448:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1449:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py:1523:2: error: Untyped decorator makes function
"get_account_change_history" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/instances.py:1524:2: error: Untyped decorator makes function
"get_account_change_history" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/instances.py: note: In function "get_account_change_history":
app/routes/instances.py:1578:16: error: Incompatible return value type (got
"tuple[Response, int]", expected "Response")  [return-value]
            return jsonify({"success": False, "error": f"获取变更历史失败: {str(e)...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
app/routes/account_list.py:8:1: error: Skipping analyzing "flask_login": module
is installed, but missing library stubs or py.typed marker  [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/account_list.py:22:2: error: Untyped decorator makes function
"list_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:23:2: error: Untyped decorator makes function
"list_accounts" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_list.py: note: In function "list_accounts":
app/routes/account_list.py:101:5: error: Need type annotation for
"classifications" (hint: "classifications: dict[<type>, <type>] = ...") 
[var-annotated]
        classifications = {}
        ^~~~~~~~~~~~~~~
app/routes/account_list.py:119:16: error: Incompatible return value type (got
"Response", expected "str")  [return-value]
            return jsonify(
                   ^
app/routes/account_list.py: note: At top level:
app/routes/account_list.py:156:2: error: Untyped decorator makes function
"export_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:157:2: error: Untyped decorator makes function
"export_accounts" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_list.py: note: In function "export_accounts":
app/routes/account_list.py:158:26: error: Name "Response" is not defined 
[name-defined]
    def export_accounts() -> "Response":
                             ^
app/routes/account_list.py:207:5: error: Need type annotation for
"classifications" (hint: "classifications: dict[<type>, <type>] = ...") 
[var-annotated]
        classifications = {}
        ^~~~~~~~~~~~~~~
app/routes/account_list.py: note: At top level:
app/routes/account_list.py:289:2: error: Untyped decorator makes function
"sync_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:290:2: error: Untyped decorator makes function
"sync_accounts" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_list.py: note: In function "sync_accounts":
app/routes/account_list.py:291:40: error: Name "Response" is not defined 
[name-defined]
    def sync_accounts(instance_id: int) -> "Response":
                                           ^
app/routes/account_list.py: note: At top level:
app/routes/account_list.py:345:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:346:2: error: Untyped decorator makes function
"get_account_permissions" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_list.py: note: In function "get_account_permissions":
app/routes/account_list.py:347:49: error: Name "Response" is not defined 
[name-defined]
    def get_account_permissions(account_id: int) -> "Response":
                                                    ^
app/routes/account_list.py: note: At top level:
app/routes/account_list.py:402:2: error: Untyped decorator makes function
"get_account_change_history" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:403:2: error: Untyped decorator makes function
"get_account_change_history" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_list.py: note: In function "get_account_change_history":
app/routes/account_list.py:404:52: error: Name "Response" is not defined 
[name-defined]
    def get_account_change_history(account_id: int) -> "Response":
                                                       ^
app/routes/account_list.py: note: At top level:
app/routes/account_list.py:456:2: error: Untyped decorator makes function
"api_sync_accounts" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_list.py:457:2: error: Untyped decorator makes function
"api_sync_accounts" untyped  [misc]
    @update_required
     ^~~~~~~~~~~~~~~
app/routes/account_list.py: note: In function "api_sync_accounts":
app/routes/account_list.py:458:44: error: Name "Response" is not defined 
[name-defined]
    def api_sync_accounts(instance_id: int) -> "Response":
                                               ^
app/utils/validation.py: note: In member "sanitize_html" of class "InputValidator":
app/utils/validation.py:267:9: error: Need type annotation for
"allowed_attributes" (hint: "allowed_attributes: dict[<type>, <type>] = ...") 
[var-annotated]
            allowed_attributes = {}
            ^~~~~~~~~~~~~~~~~~
app/utils/validation.py:272:9: error: Returning Any from function declared to
return "str"  [no-any-return]
            return cleaned
            ^~~~~~~~~~~~~~
app/utils/validation.py: note: In member "validate_json" of class "InputValidator":
app/utils/validation.py:315:40: error: Missing type parameters for generic type
"dict"  [type-arg]
        def validate_json(json_data: str | dict) -> dict | None:
                                           ^
app/utils/validation.py:332:17: error: Returning Any from function declared to
return "dict[Any, Any] | None"  [no-any-return]
                    return json.loads(json_data)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/validation.py:336:9: error: Statement is unreachable  [unreachable]
            return None
            ^~~~~~~~~~~
app/utils/validation.py: note: In member "validate_request_data" of class "InputValidator":
app/utils/validation.py:373:48: error: Item "None" of "Any | None" has no
attribute "get"  [union-attr]
                value = request.form.get(field) or request.json.get(field)...
                                                   ^~~~~~~~~~~~~~~~
app/utils/validation.py:383:48: error: Item "None" of "Any | None" has no
attribute "get"  [union-attr]
                        request.form.get(field) or request.json.get(field)...
                                                   ^~~~~~~~~~~~~~~~
app/utils/validation.py: note: In function "validate_instance_data":
app/utils/validation.py:414:47: error: Argument 1 to "validate_db_type" of
"InputValidator" has incompatible type "Any | None"; expected "str"  [arg-type]
        db_type = InputValidator.validate_db_type(data.get("db_type"))
                                                  ^~~~~~~~~~~~~~~~~~~
app/utils/validation.py:438:25: error: Incompatible types in assignment
(expression has type "int", target has type "str")  [assignment]
        validated["port"] = port
                            ^~~~
app/utils/validation.py:459:30: error: Incompatible types in assignment
(expression has type "bool", target has type "str")  [assignment]
        validated["is_active"] = is_active if is_active is not None else T...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/validation.py: note: In function "validate_credential_data":
app/utils/validation.py:509:30: error: Incompatible types in assignment
(expression has type "bool", target has type "str")  [assignment]
        validated["is_active"] = is_active if is_active is not None else T...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/retry_manager.py: note: In function "retry":
app/utils/retry_manager.py:118:21: error: Name "self" is not defined 
[name-defined]
                        self.system_logger.debug(f"执行函数 {func.__name__}, 尝...
                        ^~~~
app/utils/retry_manager.py:120:21: error: Name "self" is not defined 
[name-defined]
                        self.system_logger.debug(f"函数 {func.__name__} 执行成功...
                        ^~~~
app/utils/retry_manager.py:125:21: error: Name "self" is not defined 
[name-defined]
                        self.system_logger.warning(f"函数 {func.__name__} 执行...
                        ^~~~
app/utils/retry_manager.py:129:25: error: Name "self" is not defined 
[name-defined]
                            self.system_logger.debug(f"等待 {delay} 秒后重试..."...
                            ^~~~
app/utils/retry_manager.py:132:25: error: Name "self" is not defined 
[name-defined]
                            self.system_logger.error(f"函数 {func.__name__} ...
                            ^~~~
app/utils/retry_manager.py:136:21: error: Name "self" is not defined 
[name-defined]
                        self.system_logger.error(f"函数 {func.__name__} 发生不可...
                        ^~~~
app/utils/db_context.py: note: In member "__init__" of class "DatabaseContextManager":
app/utils/db_context.py:19:5: error: Function is missing a return type
annotation  [no-untyped-def]
        def __init__(self):
        ^
app/utils/db_context.py:19:5: note: Use "-> None" if function does not return a value
app/utils/db_context.py: note: In member "execute_query" of class "DatabaseContextManager":
app/utils/db_context.py:56:69: error: Missing type parameters for generic type
"tuple"  [type-arg]
    ...ry(self, instance: Instance, query: str, params: tuple = None) -> Gene...
                                                        ^
app/utils/db_context.py:56:77: error: Incompatible default for argument
"params" (default has type "None", argument has type "tuple[Any, ...]") 
[assignment]
    ... instance: Instance, query: str, params: tuple = None) -> Generator[di...
                                                        ^~~~
app/utils/db_context.py:56:77: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/db_context.py:56:77: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/db_context.py:56:96: error: Missing type parameters for generic type
"dict"  [type-arg]
    ...tance: Instance, query: str, params: tuple = None) -> Generator[dict]:
                                                                       ^
app/utils/db_context.py:69:22: error: "DatabaseService" has no attribute
"execute_query"  [attr-defined]
                result = self.db_service.execute_query(instance, query, pa...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/utils/db_context.py: note: At top level:
app/utils/db_context.py:132:14: error: Call to untyped function
"DatabaseContextManager" in typed context  [no-untyped-call]
    db_context = DatabaseContextManager()
                 ^~~~~~~~~~~~~~~~~~~~~~~~
app/utils/db_context.py: note: In function "execute_db_query":
app/utils/db_context.py:144:62: error: Missing type parameters for generic type
"tuple"  [type-arg]
    ...db_query(instance: Instance, query: str, params: tuple = None) -> Gene...
                                                        ^
app/utils/db_context.py:144:70: error: Incompatible default for argument
"params" (default has type "None", argument has type "tuple[Any, ...]") 
[assignment]
    ...(instance: Instance, query: str, params: tuple = None) -> Generator[di...
                                                        ^~~~
app/utils/db_context.py:144:70: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/utils/db_context.py:144:70: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/utils/db_context.py:144:89: error: Missing type parameters for generic type
"dict"  [type-arg]
    ...tance: Instance, query: str, params: tuple = None) -> Generator[dict]:
                                                                       ^
app/services/database_size_service.py:15:15: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psycopg = None
                  ^~~~
app/services/database_size_service.py:25:16: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        oracledb = None
                   ^~~~
app/services/database_size_service.py: note: In member "_get_connection" of class "DatabaseSizeService":
app/services/database_size_service.py:99:21: error: Statement is unreachable 
[unreachable]
                        error_msg = "psycopg模块未安装，无法连接PostgreSQL"
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_size_service.py:121:21: error: Statement is unreachable 
[unreachable]
                        error_msg = "oracledb模块未安装，无法连接Oracle"
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_service_new.py:10:1: error: Module
"app.utils.structlog_config" has no attribute "get_database_logger"; maybe
"get_task_logger", "get_db_logger", or "get_auth_logger"?  [attr-defined]
    from app.utils.structlog_config import get_database_logger
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_service_new.py: note: In member "__init__" of class "DatabaseService":
app/services/database_service_new.py:18:9: error: Need type annotation for
"connections" (hint: "connections: dict[<type>, <type>] = ...")  [var-annotated]
            self.connections = {}  # 连接池
            ^~~~~~~~~~~~~~~~
app/services/database_service_new.py: note: In member "get_connection" of class "DatabaseService":
app/services/database_service_new.py:37:16: error: Item "None" of
"DatabaseConnection | None" has no attribute "connect"  [union-attr]
                if connection_obj.connect():
                   ^~~~~~~~~~~~~~~~~~~~~~
app/services/database_service_new.py: note: In member "get_database_version" of class "DatabaseService":
app/services/database_service_new.py:161:17: error: Returning Any from function
declared to return "str | None"  [no-any-return]
                    return conn.get_version()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~
app/services/database_service_new.py: note: In member "sync_accounts" of class "DatabaseService":
app/services/database_service_new.py:208:28: error: Call to untyped function
"SyncDataManager" in typed context  [no-untyped-call]
                sync_manager = SyncDataManager()
                               ^~~~~~~~~~~~~~~~~
app/services/account_sync_service_new.py:10:15: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        psycopg = None
                  ^~~~
app/services/account_sync_service_new.py:20:16: error: Incompatible types in
assignment (expression has type "None", variable has type Module)  [assignment]
        oracledb = None
                   ^~~~
app/services/account_sync_service_new.py: note: In member "sync_accounts" of class "AccountSyncService":
app/services/account_sync_service_new.py:37:93: error: Incompatible default for
argument "session_id" (default has type "None", argument has type "str") 
[assignment]
    ...nce, sync_type: str = "batch", session_id: str = None) -> dict[str, An...
                                                        ^~~~
app/services/account_sync_service_new.py:37:93: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
app/services/account_sync_service_new.py:37:93: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
app/services/account_sync_service_new.py:77:28: error: Call to untyped function
"SyncDataManager" in typed context  [no-untyped-call]
                sync_manager = SyncDataManager()
                               ^~~~~~~~~~~~~~~~~
app/services/account_sync_service_new.py: note: At top level:
app/services/account_sync_service_new.py:134:1: error: Skipping analyzing
"app.models.sync_data": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
                    from app.models.sync_data import SyncData
    ^
app/services/account_sync_service_new.py: note: In member "_get_connection" of class "AccountSyncService":
app/services/account_sync_service_new.py:207:16: error: Item "None" of
"DatabaseConnection | None" has no attribute "connect"  [union-attr]
                if connection_obj.connect():
                   ^~~~~~~~~~~~~~~~~~~~~~
app/routes/account_sync_optimized.py:18:1: error: Skipping analyzing
"flask_login": module is installed, but missing library stubs or py.typed marker
 [import-untyped]
    from flask_login import current_user, login_required
    ^
app/routes/account_sync_optimized.py:21:1: error: Skipping analyzing
"app.models.sync_data": module is installed, but missing library stubs or
py.typed marker  [import-untyped]
    from app.models.sync_data import SyncData
    ^
app/routes/account_sync_optimized.py:23:1: error: Skipping analyzing
"app.services.sync_session_service_optimized": module is installed, but missing
library stubs or py.typed marker  [import-untyped]
    from app.services.sync_session_service_optimized import optimized_sync...
    ^
app/routes/account_sync_optimized.py:24:1: error: Skipping analyzing
"app.utils.auth": module is installed, but missing library stubs or py.typed
marker  [import-untyped]
    from app.utils.auth import view_required
    ^
app/routes/account_sync_optimized.py:32:2: error: Untyped decorator makes
function "sync_records" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync_optimized.py:33:2: error: Untyped decorator makes
function "sync_records" untyped  [misc]
    @view_required
     ^~~~~~~~~~~~~
app/routes/account_sync_optimized.py: note: In function "sync_records":
app/routes/account_sync_optimized.py:51:16: error: Incompatible return value
type (got "werkzeug.wrappers.response.Response", expected
"str | flask.wrappers.Response")  [return-value]
            return redirect(url_for("dashboard.index"))
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
app/routes/account_sync_optimized.py: note: At top level:
app/routes/account_sync_optimized.py:55:2: error: Untyped decorator makes
function "sync_all_accounts_optimized" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync_optimized.py: note: In function "sync_all_accounts_optimized":
app/routes/account_sync_optimized.py:170:21: error: Name "db" is not defined 
[name-defined]
                        db.session.add(sync_record)
                        ^~
app/routes/account_sync_optimized.py:171:21: error: Name "db" is not defined 
[name-defined]
                        db.session.commit()
                        ^~
app/routes/account_sync_optimized.py:209:21: error: Name "db" is not defined 
[name-defined]
                        db.session.add(sync_record)
                        ^~
app/routes/account_sync_optimized.py:210:21: error: Name "db" is not defined 
[name-defined]
                        db.session.commit()
                        ^~
app/routes/account_sync_optimized.py:258:17: error: Name "db" is not defined 
[name-defined]
                    db.session.add(sync_record)
                    ^~
app/routes/account_sync_optimized.py:259:17: error: Name "db" is not defined 
[name-defined]
                    db.session.commit()
                    ^~
app/routes/account_sync_optimized.py: note: At top level:
app/routes/account_sync_optimized.py:333:2: error: Untyped decorator makes
function "sync_details_batch_optimized" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync_optimized.py:394:2: error: Untyped decorator makes
function "cleanup_old_sessions" untyped  [misc]
    @login_required
     ^~~~~~~~~~~~~~
app/routes/account_sync_optimized.py: note: In function "cleanup_old_sessions":
app/routes/account_sync_optimized.py:398:16: error: Item "None" of "Any | None"
has no attribute "get"  [union-attr]
            days = request.json.get("days", 7) if request.is_json else 7
                   ^~~~~~~~~~~~~~~~
app/routes/account_sync_optimized.py:424:16: error: Incompatible return value
type (got "tuple[Response, int]", expected "Response")  [return-value]
            return (
                   ^
app/services/task_executor.py: note: In member "execute_task" of class "TaskExecutor":
app/services/task_executor.py:22:65: error: Missing type parameters for generic
type "dict"  [type-arg]
        def execute_task(self, task_id: int, timeout: int = 300) -> dict:
                                                                    ^
app/services/task_executor.py: note: In function "execute_task":
app/services/task_executor.py:89:29: error: "TaskExecutor" has no attribute
"_record_sync_data"  [attr-defined]
                                self._record_sync_data(task, instance, ins...
                                ^~~~~~~~~~~~~~~~~~~~~~
app/services/task_executor.py: note: In member "execute_task" of class "TaskExecutor":
app/services/task_executor.py:133:21: error: Argument 2 to
"_update_task_status" of "TaskExecutor" has incompatible type "object"; expected
"int"  [arg-type]
                        result["total_success"],
                        ^~~~~~~~~~~~~~~~~~~~~~~
app/services/task_executor.py:134:21: error: Argument 3 to
"_update_task_status" of "TaskExecutor" has incompatible type "object"; expected
"int"  [arg-type]
                        result["total_failed"],
                        ^~~~~~~~~~~~~~~~~~~~~~
app/services/task_executor.py:135:21: error: Argument 4 to
"_update_task_status" of "TaskExecutor" has incompatible type "object"; expected
"list[Any]"  [arg-type]
                        result["results"],
                        ^~~~~~~~~~~~~~~~~
app/services/task_executor.py:140:21: error: Argument 2 to
"_record_task_execution_summary" of "TaskExecutor" has incompatible type
"object"; expected "int"  [arg-type]
                        result["total_success"],
                        ^~~~~~~~~~~~~~~~~~~~~~~
app/services/task_executor.py:141:21: error: Argument 3 to
"_record_task_execution_summary" of "TaskExecutor" has incompatible type
"object"; expected "int"  [arg-type]
                        result["total_failed"],
                        ^~~~~~~~~~~~~~~~~~~~~~
app/services/task_executor.py:142:21: error: Argument 4 to
"_record_task_execution_summary" of "TaskExecutor" has incompatible type
"object"; expected "list[Any]"  [arg-type]
                        result["results"],
                        ^~~~~~~~~~~~~~~~~
app/services/task_executor.py: note: In member "_execute_task_for_instance" of class "TaskExecutor":
app/services/task_executor.py:156:48: error: Name "Any" is not defined 
[name-defined]
        def _execute_task_for_instance(self, task: "Any", instance: "Any")...
                                                   ^
app/services/task_executor.py:156:48: note: Did you forget to import it from "typing"? (Suggestion: "from typing import Any")
app/services/task_executor.py:156:75: error: Missing type parameters for
generic type "dict"  [type-arg]
    ...execute_task_for_instance(self, task: "Any", instance: "Any") -> dict:
                                                                        ^
app/services/task_executor.py:194:32: error: Name "logging" is not defined 
[name-defined]
                        "logging": logging,
                                   ^~~~~~~
app/services/task_executor.py:215:17: error: Returning Any from function
declared to return "dict[Any, Any]"  [no-any-return]
                    return result
                    ^~~~~~~~~~~~~
app/services/task_executor.py:218:17: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                    self.logger.error(f"执行任务代码时出错: {e}")
                    ^~~~~~~~~~~
app/services/task_executor.py: note: In member "_record_task_execution_summary" of class "TaskExecutor":
app/services/task_executor.py:221:52: error: Name "Any" is not defined 
[name-defined]
    ...  def _record_task_execution_summary(self, task: "Any", success_count:...
                                                        ^
app/services/task_executor.py:221:52: note: Did you forget to import it from "typing"? (Suggestion: "from typing import Any")
app/services/task_executor.py:221:107: error: Missing type parameters for
generic type "list"  [type-arg]
    ... "Any", success_count: int, failed_count: int, results: list) -> None:
                                                               ^
app/services/task_executor.py:253:17: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                    self.logger.info(f"记录任务执行汇总: {task.name}, 成功:{success_...
                    ^~~~~~~~~~~
app/services/task_executor.py:255:17: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                    self.logger.error(f"记录任务执行汇总失败: {e}")
                    ^~~~~~~~~~~
app/services/task_executor.py: note: In member "_update_task_status" of class "TaskExecutor":
app/services/task_executor.py:257:41: error: Name "Any" is not defined 
[name-defined]
        def _update_task_status(self, task: "Any", success_count: int, fai...
                                            ^
app/services/task_executor.py:257:41: note: Did you forget to import it from "typing"? (Suggestion: "from typing import Any")
app/services/task_executor.py:257:96: error: Missing type parameters for
generic type "list"  [type-arg]
    ... "Any", success_count: int, failed_count: int, results: list) -> None:
                                                               ^
app/services/task_executor.py:268:13: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                self.logger.info(f"更新任务状态: {task.name}, 成功: {success_count...
                ^~~~~~~~~~~
app/services/task_executor.py:283:13: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                self.logger.info(f"任务状态更新完成: 运行次数={task.run_count}, 成功次数={...
                ^~~~~~~~~~~
app/services/task_executor.py:285:13: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                self.logger.error(f"更新任务状态失败: {e}")
                ^~~~~~~~~~~
app/services/task_executor.py: note: In member "execute_all_active_tasks" of class "TaskExecutor":
app/services/task_executor.py:288:43: error: Missing type parameters for
generic type "dict"  [type-arg]
        def execute_all_active_tasks(self) -> dict:
                                              ^
app/services/task_executor.py:312:17: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                    self.logger.error(f"执行任务 {task.name} 时出错: {e}")
                    ^~~~~~~~~~~
app/services/task_executor.py: note: At top level:
app/services/task_executor.py:334:1: error: Skipping analyzing
"app.templates.tasks.builtin_tasks": module is installed, but missing library
stubs or py.typed marker  [import-untyped]
            from app.templates.tasks.builtin_tasks import BUILTIN_TASKS
    ^
app/services/task_executor.py: note: In member "create_builtin_tasks" of class "TaskExecutor":
app/services/task_executor.py:365:17: error: "TaskExecutor" has no attribute
"logger"  [attr-defined]
                    self.logger.error(f"创建内置任务 {task_config['name']} 失败: {...
                    ^~~~~~~~~~~
app/services/task_executor.py:369:13: error: No return value expected 
[return-value]
                return {
                ^
app/services/task_executor.py:377:13: error: No return value expected 
[return-value]
                return {"success": False, "error": f"创建内置任务失败: {str(e)}"}
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Found 1123 errors in 67 files (checked 78 source files)
