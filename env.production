# 泰摸鱼吧生产环境配置
# 部署前请修改所有密码和密钥！

#------------------------------------------------------------------------------
# 应用配置
#------------------------------------------------------------------------------
FLASK_ENV=production
FLASK_DEBUG=False
SECRET_KEY=your-super-secret-key-change-this-in-production-2024
APP_NAME=泰摸鱼吧
APP_VERSION=1.0.0
APP_DESCRIPTION=数据同步管理平台

#------------------------------------------------------------------------------
# 数据库配置
#------------------------------------------------------------------------------
# PostgreSQL生产数据库
DATABASE_URL=postgresql://taifish_user:Taifish2024!@postgres:5432/taifish_prod

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

#------------------------------------------------------------------------------
# Redis配置
#------------------------------------------------------------------------------
REDIS_URL=redis://:Taifish2024!@redis:6379/0
REDIS_PASSWORD=Taifish2024!

# Redis连接池配置
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=True
REDIS_SOCKET_KEEPALIVE=True

#------------------------------------------------------------------------------
# Celery配置
#------------------------------------------------------------------------------
CELERY_BROKER_URL=redis://:Taifish2024!@redis:6379/1
CELERY_RESULT_BACKEND=redis://:Taifish2024!@redis:6379/2

# Celery任务配置
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=Asia/Shanghai
CELERY_ENABLE_UTC=True

# Celery Worker配置
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_ACKS_LATE=True
CELERY_WORKER_DISABLE_RATE_LIMITS=False

#------------------------------------------------------------------------------
# 日志配置
#------------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=/app/logs/taifish.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# 审计日志
AUDIT_LOG_ENABLED=True
AUDIT_LOG_FILE=/app/logs/audit.log

#------------------------------------------------------------------------------
# 安全配置
#------------------------------------------------------------------------------
# 会话配置
PERMANENT_SESSION_LIFETIME=3600
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# CSRF保护
WTF_CSRF_ENABLED=True
WTF_CSRF_TIME_LIMIT=3600

# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL=True

# 登录安全
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900
SESSION_TIMEOUT=3600

#------------------------------------------------------------------------------
# 文件上传配置
#------------------------------------------------------------------------------
UPLOAD_FOLDER=/app/userdata/uploads
MAX_CONTENT_LENGTH=100MB
ALLOWED_EXTENSIONS=txt,pdf,png,jpg,jpeg,gif,csv,xlsx

#------------------------------------------------------------------------------
# 邮件配置 (可选)
#------------------------------------------------------------------------------
MAIL_SERVER=smtp.example.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_DEFAULT_SENDER=your-email@example.com

#------------------------------------------------------------------------------
# 监控配置
#------------------------------------------------------------------------------
# 健康检查
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_INTERVAL=30

# 性能监控
PERFORMANCE_MONITORING=True
METRICS_COLLECTION=True

# 错误报告
ERROR_REPORTING=True
SENTRY_DSN=your-sentry-dsn-here

#------------------------------------------------------------------------------
# 缓存配置
#------------------------------------------------------------------------------
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://:Taifish2024!@redis:6379/3
CACHE_DEFAULT_TIMEOUT=300

#------------------------------------------------------------------------------
# 限流配置
#------------------------------------------------------------------------------
RATE_LIMIT_ENABLED=True
RATE_LIMIT_STORAGE_URL=redis://:Taifish2024!@redis:6379/4
RATE_LIMIT_DEFAULT=1000 per hour
RATE_LIMIT_LOGIN=10 per minute

#------------------------------------------------------------------------------
# 备份配置
#------------------------------------------------------------------------------
BACKUP_ENABLED=True
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/app/userdata/backups

#------------------------------------------------------------------------------
# 网络配置
#------------------------------------------------------------------------------
# 服务器配置
HOST=0.0.0.0
PORT=5000
WORKERS=4

# 代理配置
PROXY_FIX=True
PROXY_FIX_X_FOR=1
PROXY_FIX_X_PROTO=1
PROXY_FIX_X_HOST=1
PROXY_FIX_X_PORT=1
PROXY_FIX_X_PREFIX=1

#------------------------------------------------------------------------------
# 时区配置
#------------------------------------------------------------------------------
TZ=Asia/Shanghai
TIMEZONE=Asia/Shanghai

#------------------------------------------------------------------------------
# 开发工具配置 (生产环境应设为False)
#------------------------------------------------------------------------------
DEBUG_TOOLBAR_ENABLED=False
FLASK_DEBUG_TB_ENABLED=False
PROFILER_ENABLED=False

#------------------------------------------------------------------------------
# 第三方服务配置
#------------------------------------------------------------------------------
# 如果需要集成其他服务，在这里添加配置
# EXAMPLE_SERVICE_URL=https://api.example.com
# EXAMPLE_SERVICE_KEY=your-api-key

#------------------------------------------------------------------------------
# 环境标识
#------------------------------------------------------------------------------
ENVIRONMENT=production
DEPLOYMENT_DATE=2024-09-12
VERSION=1.0.0
