# 管理员密码管理指南

## 概述

泰摸鱼吧系统使用安全的密码管理机制，支持环境变量配置和随机密码生成。

## 密码生成机制

### 1. 环境变量配置（推荐）

在 `.env` 文件中设置：
```bash
DEFAULT_ADMIN_PASSWORD=your-secure-password
```

### 2. 自动随机生成

如果未设置环境变量，系统会自动生成12位安全密码：
- 包含大小写字母
- 包含数字
- 包含特殊字符 `!@#$%^&*`

## 查看管理员密码

### 方法1：使用脚本查看
```bash
python scripts/show_admin_password.py
```

### 方法2：查看启动日志
在开发环境下，密码会在控制台显示：
```
============================================================
🔐 默认管理员账户已创建
用户名: admin
密码: Abc123!@#456
============================================================
⚠️  请妥善保存此密码，生产环境请立即修改！
============================================================
```

## 重置管理员密码

### 方法1：生成随机密码
```bash
python scripts/reset_admin_password.py
```

### 方法2：设置指定密码
```bash
python scripts/reset_admin_password.py --password "MyNewPassword123!"
```

### 方法3：生成指定长度密码
```bash
python scripts/reset_admin_password.py --length 16
```

## 安全建议

### 开发环境
- 可以使用随机生成的密码
- 密码会在控制台显示
- 建议定期更换密码

### 生产环境
- **必须**设置环境变量 `DEFAULT_ADMIN_PASSWORD`
- 使用强密码（至少12位，包含大小写字母、数字和特殊字符）
- 定期更换密码
- 不要在日志中记录密码

## 密码要求

- 最少8位字符
- 包含大写字母
- 包含小写字母  
- 包含数字
- 建议包含特殊字符

## 故障排除

### 忘记密码
1. 使用重置脚本：`python scripts/reset_admin_password.py`
2. 或设置环境变量后重启应用

### 密码不生效
1. 检查环境变量是否正确设置
2. 重启应用使环境变量生效
3. 检查数据库连接是否正常

### 安全警告
- 生产环境请立即修改默认密码
- 不要在代码中硬编码密码
- 定期审计密码安全性
